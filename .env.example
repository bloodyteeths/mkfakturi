APP_ENV=local
APP_KEY=base64:kgk/4DW1vEVy7aEvet5FPp5un6PIGe/so8H0mvoUtW0=
APP_DEBUG=true
APP_NAME="InvoiceShelf"
APP_LOG_LEVEL=debug
APP_TIMEZONE=UTC
APP_URL=http://invoiceshelf.test

APP_LOCALE=en
APP_FALLBACK_LOCALE=en
APP_FAKER_LOCALE=en_US

APP_MAINTENANCE_DRIVER=file
APP_MAINTENANCE_STORE=database

BCRYPT_ROUNDS=12

# Paddle Payment Gateway Configuration
# For international invoice payments
# Get credentials from: https://vendors.paddle.com/
PADDLE_VENDOR_ID=
PADDLE_API_KEY=
PADDLE_ENVIRONMENT=sandbox
PADDLE_WEBHOOK_SECRET=
PADDLE_PRICE_ID=

DB_CONNECTION=sqlite
DB_HOST=
DB_PORT=
DB_DATABASE=
DB_USERNAME=
DB_PASSWORD=

BROADCAST_CONNECTION=log
CACHE_STORE=file

# Queue Configuration
# Use 'sync' for local development without queue workers
# Use 'redis' for production with dedicated queue workers
QUEUE_CONNECTION=sync
# For production with Redis queue workers, change to:
# QUEUE_CONNECTION=redis

SESSION_DRIVER=file
SESSION_LIFETIME=1440
SESSION_ENCRYPT=false
SESSION_PATH=/
SESSION_DOMAIN=null

# Redis Configuration (required for queue workers)
REDIS_HOST=127.0.0.1
REDIS_PASSWORD=null
REDIS_PORT=6379
# For Railway, these are automatically set by the Redis service

MAIL_DRIVER=smtp
MAIL_HOST=
MAIL_PORT=
MAIL_USERNAME=
MAIL_PASSWORD=
MAIL_ENCRYPTION=

MAIL_FROM_NAME=
MAIL_FROM_ADDRESS=

PUSHER_APP_ID=
PUSHER_KEY=
PUSHER_SECRET=

SANCTUM_STATEFUL_DOMAINS=invoiceshelf.test
TRUSTED_PROXIES="*"

CRON_JOB_AUTH_TOKEN=""
LOG_STACK=single

PDF_DRIVER=dompdf
GOTENBERG_HOST=
GOTENBERG_PAPERSIZE=

# OCR Configuration (for OCR-01 receipt processing)
# Option 1: Self-hosted Tesseract (recommended for Hetzner deployment)
TESSERACT_PATH=/usr/bin/tesseract
TESSERACT_LANGUAGES=eng,mkd

# Option 2: OCR.space API (pay-per-use, GDPR compliant EU servers)
OCR_SPACE_API_KEY=
OCR_SPACE_ENDPOINT=https://api.ocr.space/parse/image

# Option 3: Google Cloud Vision (if needed for complex documents)
GOOGLE_CLOUD_PROJECT_ID=
GOOGLE_CLOUD_KEY_FILE=
GOOGLE_CLOUD_VISION_ENDPOINT=

# PSD2 Banking Integration Configuration
# Stopanska Banka AD Skopje - Macedonia's largest bank
# Developer Portal: https://ob.stb.kibs.mk/docs/getting-started
# Rate Limit: 15 requests per minute (4 second intervals)

# Stopanska Bank OAuth2 Credentials (Client Credentials Flow)
STOPANSKA_CLIENT_ID=
STOPANSKA_CLIENT_SECRET=
STOPANSKA_ENVIRONMENT=sandbox

# Stopanska Sandbox Configuration (for development/testing)
STOPANSKA_SANDBOX_BASE_URL=https://sandbox-api.ob.stb.kibs.mk/xs2a/v1
STOPANSKA_SANDBOX_OAUTH_URL=https://sandbox-api.ob.stb.kibs.mk/xs2a/v1/oauth2/token
STOPANSKA_SANDBOX_ACCOUNTS_URL=https://sandbox-api.ob.stb.kibs.mk/xs2a/v1/accounts
STOPANSKA_SANDBOX_TRANSACTIONS_URL=https://sandbox-api.ob.stb.kibs.mk/xs2a/v1/accounts/{account-id}/transactions

# Stopanska Production Configuration (for live deployment)
STOPANSKA_PRODUCTION_BASE_URL=https://api.ob.stb.kibs.mk/xs2a/v1
STOPANSKA_PRODUCTION_OAUTH_URL=https://api.ob.stb.kibs.mk/xs2a/v1/oauth2/token
STOPANSKA_PRODUCTION_ACCOUNTS_URL=https://api.ob.stb.kibs.mk/xs2a/v1/accounts
STOPANSKA_PRODUCTION_TRANSACTIONS_URL=https://api.ob.stb.kibs.mk/xs2a/v1/accounts/{account-id}/transactions

# Stopanska Account Configuration
STOPANSKA_DEFAULT_ACCOUNT_ID=
STOPANSKA_RATE_LIMIT_ENABLED=true
STOPANSKA_MAX_TRANSACTIONS_PER_REQUEST=200

# Test Account Credentials (sandbox only)
STOPANSKA_SANDBOX_TEST_ACCOUNT_IBAN=MK07290000000000001
STOPANSKA_SANDBOX_TEST_ACCOUNT_ID=STB_SANDBOX_001

# NLB Banka (Nova Ljubljanska Banka) - Second largest bank
# Developer Portal: https://developer-ob.nlb.mk/
NLB_CLIENT_ID=
NLB_CLIENT_SECRET=
NLB_ENVIRONMENT=sandbox

# Komercijalna Banka - Third major bank for PSD2 integration
KOMERCIJALNA_CLIENT_ID=
KOMERCIJALNA_CLIENT_SECRET=
KOMERCIJALNA_ENVIRONMENT=sandbox

# AI Financial Assistant
AI_MCP_URL=http://ai-mcp:3001

# ==============================================================================
# CPAY PAYMENT GATEWAY CONFIGURATION (CASYS)
# ==============================================================================
# CPAY is a Macedonian payment gateway for domestic MKD payments
# Provider: CASYS Payment Solutions - https://cpay.com.mk/
# Used for invoice payment processing with credit/debit cards
# Requires merchant account setup with CPAY

# CPAY Merchant Credentials
CPAY_MERCHANT_ID=
CPAY_SECRET_KEY=

# CPAY API Endpoints
CPAY_PAYMENT_URL=https://cpay.com.mk/payment

# CPAY Return URLs (these are set automatically by the application)
# Success URL: {APP_URL}/cpay/success/{invoice_id}
# Cancel URL: {APP_URL}/cpay/cancel/{invoice_id}
# Callback URL: {APP_URL}/webhooks/cpay/callback

# ==============================================================================
# FAKTURINO FEATURE FLAGS (Laravel Pennant)
# ==============================================================================
# All features default to OFF except partner_mocked_data which defaults to ON
# for safety until staging validation complete. Only flip flags after proper
# testing in staging environment.

# Accounting Backbone (eloquent-ifrs double-entry ledger integration)
# When ON: Invoice/Payment events post to IFRS ledger automatically
FEATURE_ACCOUNTING_BACKBONE=false

# Migration Wizard (Laravel Excel CSV/XLSX imports with Onivo/Megasoft presets)
# When ON: Import wizard available at /admin/migration
FEATURE_MIGRATION_WIZARD=false

# PSD2 Banking (OAuth + encrypted tokens + MT940 fallback)
# When ON: Bank connection endpoints available, sync jobs active
FEATURE_PSD2_BANKING=false

# Partner Portal (Referral tracking and commission APIs)
# When ON: Partner APIs available (respecting mocked data flag below)
FEATURE_PARTNER_PORTAL=false

# Partner Mocked Data (SAFETY FLAG - defaults to ON)
# IMPORTANT: Keep this TRUE until staging validation complete
# When ON: Partner APIs return mocked data instead of real database queries
# Only set to FALSE after explicit approval from staging sign-off
FEATURE_PARTNER_MOCKED_DATA=true

# Partner Commission Configuration
# Default commission rate for partners (percentage, e.g., 5.0 = 5%)
PARTNER_COMMISSION_RATE=5.0

# Advanced Payments (Paddle + CPAY integrations with webhooks)
# When ON: Payment gateway checkout URLs and webhooks active
FEATURE_ADVANCED_PAYMENTS=false

# MCP AI Tools (TypeScript MCP server with UBL validation, tax explanations)
# When ON: MCP tools accessible, audit logging active
FEATURE_MCP_AI_TOOLS=false

# Monitoring (Prometheus metrics + Telescope debugging interface)
# When ON: /metrics and /telescope endpoints available (admin only)
FEATURE_MONITORING=false

# ==============================================================================
# END FEATURE FLAGS
# ==============================================================================

# ==============================================================================
# MCP AI TOOLS SERVER CONFIGURATION
# ==============================================================================
# Model Context Protocol (MCP) Server for AI-powered financial tools
# TypeScript server providing UBL validation, tax explanations, anomaly detection
# Default: localhost:3100 for local development, adjust for production deployment

# MCP Server Feature Flag Control
# Must match FEATURE_MCP_AI_TOOLS flag above
FEATURE_MCP_AI_TOOLS=false

# MCP Server Connection
MCP_SERVER_TOKEN=
MCP_SERVER_URL=http://localhost:3100

# Laravel Internal URL (for MCP server to call back)
# Used by MCP server to fetch invoice/accounting data via internal API
LARAVEL_INTERNAL_URL=http://localhost:8080

# ==============================================================================
# END MCP CONFIGURATION
# ==============================================================================

// LLM-CHECKPOINT
// CLAUDE-CHECKPOINT
