import{a6 as l,s as o,u as r,a3 as a}from"./main-Ds_umSNN.js";const g=(k=!1)=>{const f=k?window.pinia.defineStore:l,{global:n}=window.i18n;return f({id:"disk",state:()=>({disks:[],diskDrivers:[],diskConfigData:null,selected_driver:"local",doSpaceDiskConfig:{name:"",selected_driver:"doSpaces",key:"",secret:"",region:"",bucket:"",endpoint:"",root:""},dropBoxDiskConfig:{name:"",selected_driver:"dropbox",token:"",key:"",secret:"",app:""},localDiskConfig:{name:"",selected_driver:"local",root:""},s3DiskConfigData:{name:"",selected_driver:"s3",key:"",secret:"",region:"",bucket:"",root:""},s3CompatDiskConfigData:{name:"",selected_driver:"s3compat",key:"",secret:"",region:"",bucket:"",root:"",endpoint:""}}),getters:{getDiskDrivers:t=>t.diskDrivers},actions:{fetchDiskEnv(t){return new Promise((s,i)=>{o.get(`/disks/${t.disk}`).then(e=>{s(e)}).catch(e=>{a(e),i(e)})})},fetchDisks(t){return new Promise((s,i)=>{o.get("/disks",{params:t}).then(e=>{this.disks=e.data.data,s(e)}).catch(e=>{a(e),i(e)})})},fetchDiskDrivers(){return new Promise((t,s)=>{o.get("/disk/drivers").then(i=>{this.diskConfigData=i.data,this.diskDrivers=i.data.drivers,t(i)}).catch(i=>{a(i),s(i)})})},deleteFileDisk(t){return new Promise((s,i)=>{o.delete(`/disks/${t}`).then(e=>{if(e.data.success){let d=this.disks.findIndex(c=>c.id===t);this.disks.splice(d,1),r().showNotification({type:"success",message:n.t("settings.disk.deleted_message")})}s(e)}).catch(e=>{a(e),i(e)})})},updateDisk(t){return new Promise((s,i)=>{o.put(`/disks/${t.id}`,t).then(e=>{if(e.data){let d=this.disks.findIndex(c=>c.id===e.data.data);this.disks[d]=t.disks,r().showNotification({type:"success",message:n.t("settings.disk.success_set_default_disk")})}s(e)}).catch(e=>{a(e),i(e)})})},createDisk(t){return new Promise((s,i)=>{o.post("/disks",t).then(e=>{e.data&&r().showNotification({type:"success",message:n.t("settings.disk.success_create")}),this.disks.push(e.data),s(e)}).catch(e=>{a(e),i(e)})})}}})()};export{g as u};
