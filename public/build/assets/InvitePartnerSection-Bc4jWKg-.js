import{v as S,u as $,F as C,e as g,j as N,k,c as d,b as a,L as P,t as o,a as i,w as p,m as D,Q as j,R as q,s as h,r as c,o as m,q as E,M as F}from"./main-Bq1VlIEV.js";import{P as L}from"./PermissionEditor-qb6-JmoZ.js";const M={class:"p-6 bg-white border border-gray-200 rounded-lg shadow"},G={class:"text-lg font-medium text-gray-900 mb-4"},U={class:"text-sm text-gray-600 mb-4"},z={class:"border border-gray-200 rounded-lg p-4 bg-gray-50"},A={key:0,class:"mt-6 pt-6 border-t border-gray-200"},Q={class:"text-sm font-medium text-gray-900 mb-3"},R={class:"space-y-2"},T={class:"text-sm font-medium text-gray-900"},H={class:"text-xs text-gray-500"},J={class:"px-2 py-1 text-xs bg-yellow-100 text-yellow-800 rounded"},X={__name:"InvitePartnerSection",setup(K){const{t:v}=S.useI18n(),y=$(),f=C(),u=g(!1),_=g([]),s=g({partner_email:"",permissions:[]}),w=N(()=>s.value.partner_email&&s.value.permissions.length>0);async function x(){var e,t,r;u.value=!0;try{await h.post("/invitations/company-to-partner",{company_id:(e=f.selectedCompany)==null?void 0:e.id,partner_email:s.value.partner_email,permissions:s.value.permissions}),y.showNotification({type:"success",message:v("settings.invitation_sent_successfully")}),s.value.partner_email="",s.value.permissions=[],b()}catch(l){y.showNotification({type:"error",message:((r=(t=l.response)==null?void 0:t.data)==null?void 0:r.message)||v("settings.invitation_failed")})}finally{u.value=!1}}async function b(){var e;try{const t=await h.get("/invitations/pending",{params:{company_id:(e=f.selectedCompany)==null?void 0:e.id}});_.value=t.data}catch(t){console.error("Failed to load pending invitations:",t)}}function B(e){return new Date(e).toLocaleDateString()}return k(()=>{b()}),(e,t)=>{const r=c("BaseInput"),l=c("BaseInputGroup"),I=c("BaseIcon"),V=c("BaseButton");return m(),d("div",M,[a("h3",G,o(e.$t("settings.invite_partner")),1),a("p",U,o(e.$t("settings.invite_partner_description")),1),a("form",{onSubmit:D(x,["prevent"]),class:"space-y-4"},[i(l,{label:e.$t("partners.email"),required:""},{default:p(()=>[i(r,{modelValue:s.value.partner_email,"onUpdate:modelValue":t[0]||(t[0]=n=>s.value.partner_email=n),type:"email",placeholder:e.$t("settings.partner_email_placeholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),i(l,{label:e.$t("partners.permissions"),required:""},{default:p(()=>[a("div",z,[i(L,{modelValue:s.value.permissions,"onUpdate:modelValue":t[1]||(t[1]=n=>s.value.permissions=n)},null,8,["modelValue"])])]),_:1},8,["label"]),i(V,{type:"submit",loading:u.value,disabled:!w.value},{left:p(n=>[i(I,{name:"PaperAirplaneIcon",class:F(n.class)},null,8,["class"])]),default:p(()=>[E(" "+o(e.$t("settings.send_invitation")),1)]),_:1},8,["loading","disabled"])],32),_.value.length>0?(m(),d("div",A,[a("h4",Q,o(e.$t("settings.pending_invitations")),1),a("div",R,[(m(!0),d(j,null,q(_.value,n=>(m(),d("div",{key:n.id,class:"flex items-center justify-between p-3 bg-gray-50 rounded"},[a("div",null,[a("div",T,o(n.partner_email),1),a("div",H,o(e.$t("settings.invited_at"))+": "+o(B(n.invited_at)),1)]),a("span",J,o(e.$t("general.pending")),1)]))),128))])])):P("",!0)])}}};export{X as default};
