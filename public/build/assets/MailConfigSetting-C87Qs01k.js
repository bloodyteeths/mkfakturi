import{v as O,e as j,I as K,j as V,f as u,g as I,h as E,aK as J,i as P,k as N,r as f,c as G,o as B,a as t,b as F,w as s,l as e,p as Q,a4 as L,q as S,t as k,K as U,L as A,M as x,m as z,G as W,aD as R,Q as Y,a5 as Z}from"./main-DpDYmbyp.js";import{u as T}from"./mail-driver-CyCfVKbW.js";const ee={class:"flex my-10"},X={__name:"SmtpMailDriver",props:{configData:{type:Object,require:!0,default:Object},isSaving:{type:Boolean,require:!0,default:!1},isFetchingInitialData:{type:Boolean,require:!0,default:!1},mailDrivers:{type:Array,require:!0,default:Array}},emits:["submit-data","on-change-driver"],setup(i,{emit:h}){const p=i,c=h,n=T(),{t:d}=O.useI18n();let C=j(!1);const y=K(["none","tls","ssl","starttls"]),_=V(()=>C.value?"text":"password"),l=V(()=>({smtpConfig:{mail_driver:{required:u.withMessage(d("validation.required"),I)},mail_host:{required:u.withMessage(d("validation.required"),I)},mail_port:{required:u.withMessage(d("validation.required"),I),numeric:u.withMessage(d("validation.numbers_only"),J)},mail_encryption:{required:u.withMessage(d("validation.required"),I)},from_mail:{required:u.withMessage(d("validation.required"),I),email:u.withMessage(d("validation.email_incorrect"),E)},from_name:{required:u.withMessage(d("validation.required"),I)}}})),m=P(l,V(()=>n));N(()=>{for(const a in n.smtpConfig)p.configData.hasOwnProperty(a)&&(n.smtpConfig[a]=p.configData[a])});async function g(){return m.value.smtpConfig.$touch(),m.value.smtpConfig.$invalid||c("submit-data",n.smtpConfig),!1}function v(){m.value.smtpConfig.mail_driver.$touch(),c("on-change-driver",n.smtpConfig.mail_driver)}return(a,o)=>{const M=f("BaseMultiselect"),$=f("BaseInputGroup"),D=f("BaseInput"),q=f("BaseIcon"),w=f("BaseInputGrid"),b=f("BaseButton");return B(),G("form",{onSubmit:z(g,["prevent"])},[t(w,null,{default:s(()=>[t($,{label:a.$t("settings.mail.driver"),"content-loading":i.isFetchingInitialData,error:e(m).smtpConfig.mail_driver.$error&&e(m).smtpConfig.mail_driver.$errors[0].$message,required:""},{default:s(()=>[t(M,{modelValue:e(n).smtpConfig.mail_driver,"onUpdate:modelValue":[o[0]||(o[0]=r=>e(n).smtpConfig.mail_driver=r),v],"content-loading":i.isFetchingInitialData,options:i.mailDrivers,"can-deselect":!1,invalid:e(m).smtpConfig.mail_driver.$error},null,8,["modelValue","content-loading","options","invalid"])]),_:1},8,["label","content-loading","error"]),t($,{label:a.$t("settings.mail.host"),"content-loading":i.isFetchingInitialData,error:e(m).smtpConfig.mail_host.$error&&e(m).smtpConfig.mail_host.$errors[0].$message,required:""},{default:s(()=>[t(D,{modelValue:e(n).smtpConfig.mail_host,"onUpdate:modelValue":o[1]||(o[1]=r=>e(n).smtpConfig.mail_host=r),modelModifiers:{trim:!0},"content-loading":i.isFetchingInitialData,type:"text",name:"mail_host",invalid:e(m).smtpConfig.mail_host.$error,onInput:o[2]||(o[2]=r=>e(m).smtpConfig.mail_host.$touch())},null,8,["modelValue","content-loading","invalid"])]),_:1},8,["label","content-loading","error"]),t($,{"content-loading":i.isFetchingInitialData,label:a.$t("settings.mail.username")},{default:s(()=>[t(D,{modelValue:e(n).smtpConfig.mail_username,"onUpdate:modelValue":o[3]||(o[3]=r=>e(n).smtpConfig.mail_username=r),modelModifiers:{trim:!0},"content-loading":i.isFetchingInitialData,type:"text",name:"db_name"},null,8,["modelValue","content-loading"])]),_:1},8,["content-loading","label"]),t($,{"content-loading":i.isFetchingInitialData,label:a.$t("settings.mail.password")},{default:s(()=>[t(D,{modelValue:e(n).smtpConfig.mail_password,"onUpdate:modelValue":o[5]||(o[5]=r=>e(n).smtpConfig.mail_password=r),modelModifiers:{trim:!0},"content-loading":i.isFetchingInitialData,type:_.value,name:"password"},{right:s(()=>[t(q,{name:e(C)?"EyeIcon":"EyeSlashIcon",class:"mr-1 text-gray-500 cursor-pointer",onClick:o[4]||(o[4]=r=>Q(C)?C.value=!e(C):C=!e(C))},null,8,["name"])]),_:1},8,["modelValue","content-loading","type"])]),_:1},8,["content-loading","label"]),t($,{label:a.$t("settings.mail.port"),"content-loading":i.isFetchingInitialData,error:e(m).smtpConfig.mail_port.$error&&e(m).smtpConfig.mail_port.$errors[0].$message,required:""},{default:s(()=>[t(D,{modelValue:e(n).smtpConfig.mail_port,"onUpdate:modelValue":o[6]||(o[6]=r=>e(n).smtpConfig.mail_port=r),modelModifiers:{trim:!0},"content-loading":i.isFetchingInitialData,type:"text",name:"mail_port",invalid:e(m).smtpConfig.mail_port.$error,onInput:o[7]||(o[7]=r=>e(m).smtpConfig.mail_port.$touch())},null,8,["modelValue","content-loading","invalid"])]),_:1},8,["label","content-loading","error"]),t($,{label:a.$t("settings.mail.encryption"),"content-loading":i.isFetchingInitialData,error:e(m).smtpConfig.mail_encryption.$error&&e(m).smtpConfig.mail_encryption.$errors[0].$message,required:""},{default:s(()=>[t(M,{modelValue:e(n).smtpConfig.mail_encryption,"onUpdate:modelValue":o[8]||(o[8]=r=>e(n).smtpConfig.mail_encryption=r),modelModifiers:{trim:!0},"content-loading":i.isFetchingInitialData,options:y,searchable:!0,"show-labels":!1,placeholder:"Select option",invalid:e(m).smtpConfig.mail_encryption.$error,onInput:o[9]||(o[9]=r=>e(m).smtpConfig.mail_encryption.$touch())},null,8,["modelValue","content-loading","options","invalid"])]),_:1},8,["label","content-loading","error"]),t($,{label:a.$t("settings.mail.from_mail"),"content-loading":i.isFetchingInitialData,error:e(m).smtpConfig.from_mail.$error&&e(m).smtpConfig.from_mail.$errors[0].$message,required:""},{default:s(()=>[t(D,{modelValue:e(n).smtpConfig.from_mail,"onUpdate:modelValue":o[10]||(o[10]=r=>e(n).smtpConfig.from_mail=r),modelModifiers:{trim:!0},"content-loading":i.isFetchingInitialData,type:"text",name:"from_mail",invalid:e(m).smtpConfig.from_mail.$error,onInput:o[11]||(o[11]=r=>e(m).smtpConfig.from_mail.$touch())},null,8,["modelValue","content-loading","invalid"])]),_:1},8,["label","content-loading","error"]),t($,{label:a.$t("settings.mail.from_name"),"content-loading":i.isFetchingInitialData,error:e(m).smtpConfig.from_name.$error&&e(m).smtpConfig.from_name.$errors[0].$message,required:""},{default:s(()=>[t(D,{modelValue:e(n).smtpConfig.from_name,"onUpdate:modelValue":o[12]||(o[12]=r=>e(n).smtpConfig.from_name=r),modelModifiers:{trim:!0},"content-loading":i.isFetchingInitialData,type:"text",name:"from_name",invalid:e(m).smtpConfig.from_name.$error,onInput:o[13]||(o[13]=r=>e(m).smtpConfig.from_name.$touch())},null,8,["modelValue","content-loading","invalid"])]),_:1},8,["label","content-loading","error"])]),_:1}),F("div",ee,[t(b,{disabled:i.isSaving,"content-loading":i.isFetchingInitialData,loading:i.isSaving,type:"submit",variant:"primary"},{left:s(r=>[i.isSaving?A("",!0):(B(),U(q,{key:0,name:"ArrowDownOnSquareIcon",class:x(r.class)},null,8,["class"]))]),default:s(()=>[S(" "+k(a.$t("general.save")),1)]),_:1},8,["disabled","content-loading","loading"]),L(a.$slots,"default")])],32)}}},ie={class:"flex my-10"},ne={__name:"MailgunMailDriver",props:{configData:{type:Object,require:!0,default:Object},isSaving:{type:Boolean,require:!0,default:!1},isFetchingInitialData:{type:Boolean,require:!0,default:!1},mailDrivers:{type:Array,require:!0,default:Array}},emits:["submit-data","on-change-driver"],setup(i,{emit:h}){const p=i,c=h,n=T(),{t:d}=O.useI18n();let C=j(!1);const y=V(()=>C.value?"text":"password"),_=V(()=>({mailgunConfig:{mail_driver:{required:u.withMessage(d("validation.required"),I)},mail_mailgun_domain:{required:u.withMessage(d("validation.required"),I)},mail_mailgun_endpoint:{required:u.withMessage(d("validation.required"),I)},mail_mailgun_secret:{required:u.withMessage(d("validation.required"),I)},from_mail:{required:u.withMessage(d("validation.required"),I),email:E},from_name:{required:u.withMessage(d("validation.required"),I)}}})),l=P(_,V(()=>n));N(()=>{for(const v in n.mailgunConfig)p.configData.hasOwnProperty(v)&&(n.mailgunConfig[v]=p.configData[v])});async function m(){return l.value.mailgunConfig.$touch(),l.value.mailgunConfig.$invalid||c("submit-data",n.mailgunConfig),!1}function g(){l.value.mailgunConfig.mail_driver.$touch(),c("on-change-driver",n.mailgunConfig.mail_driver)}return(v,a)=>{const o=f("BaseMultiselect"),M=f("BaseInputGroup"),$=f("BaseInput"),D=f("BaseIcon"),q=f("BaseInputGrid"),w=f("BaseButton");return B(),G("form",{onSubmit:z(m,["prevent"])},[t(q,null,{default:s(()=>[t(M,{label:v.$t("settings.mail.driver"),"content-loading":i.isFetchingInitialData,error:e(l).mailgunConfig.mail_driver.$error&&e(l).mailgunConfig.mail_driver.$errors[0].$message,required:""},{default:s(()=>[t(o,{modelValue:e(n).mailgunConfig.mail_driver,"onUpdate:modelValue":[a[0]||(a[0]=b=>e(n).mailgunConfig.mail_driver=b),g],"content-loading":i.isFetchingInitialData,options:i.mailDrivers,"can-deselect":!1,invalid:e(l).mailgunConfig.mail_driver.$error},null,8,["modelValue","content-loading","options","invalid"])]),_:1},8,["label","content-loading","error"]),t(M,{label:v.$t("settings.mail.mailgun_domain"),"content-loading":i.isFetchingInitialData,error:e(l).mailgunConfig.mail_mailgun_domain.$error&&e(l).mailgunConfig.mail_mailgun_domain.$errors[0].$message,required:""},{default:s(()=>[t($,{modelValue:e(n).mailgunConfig.mail_mailgun_domain,"onUpdate:modelValue":a[1]||(a[1]=b=>e(n).mailgunConfig.mail_mailgun_domain=b),modelModifiers:{trim:!0},"content-loading":i.isFetchingInitialData,type:"text",name:"mailgun_domain",invalid:e(l).mailgunConfig.mail_mailgun_domain.$error,onInput:a[2]||(a[2]=b=>e(l).mailgunConfig.mail_mailgun_domain.$touch())},null,8,["modelValue","content-loading","invalid"])]),_:1},8,["label","content-loading","error"]),t(M,{label:v.$t("settings.mail.mailgun_secret"),"content-loading":i.isFetchingInitialData,error:e(l).mailgunConfig.mail_mailgun_secret.$error&&e(l).mailgunConfig.mail_mailgun_secret.$errors[0].$message,required:""},{default:s(()=>[t($,{modelValue:e(n).mailgunConfig.mail_mailgun_secret,"onUpdate:modelValue":a[4]||(a[4]=b=>e(n).mailgunConfig.mail_mailgun_secret=b),modelModifiers:{trim:!0},"content-loading":i.isFetchingInitialData,type:y.value,name:"mailgun_secret",autocomplete:"off",invalid:e(l).mailgunConfig.mail_mailgun_secret.$error,onInput:a[5]||(a[5]=b=>e(l).mailgunConfig.mail_mailgun_secret.$touch())},{right:s(()=>[t(D,{name:e(C)?"EyeIcon":"EyeSlashIcon",class:"mr-1 text-gray-500 cursor-pointer",onClick:a[3]||(a[3]=b=>Q(C)?C.value=!e(C):C=!e(C))},null,8,["name"])]),_:1},8,["modelValue","content-loading","type","invalid"])]),_:1},8,["label","content-loading","error"]),t(M,{label:v.$t("settings.mail.mailgun_endpoint"),"content-loading":i.isFetchingInitialData,error:e(l).mailgunConfig.mail_mailgun_endpoint.$error&&e(l).mailgunConfig.mail_mailgun_endpoint.$errors[0].$message,required:""},{default:s(()=>[t($,{modelValue:e(n).mailgunConfig.mail_mailgun_endpoint,"onUpdate:modelValue":a[6]||(a[6]=b=>e(n).mailgunConfig.mail_mailgun_endpoint=b),modelModifiers:{trim:!0},"content-loading":i.isFetchingInitialData,type:"text",name:"mailgun_endpoint",invalid:e(l).mailgunConfig.mail_mailgun_endpoint.$error,onInput:a[7]||(a[7]=b=>e(l).mailgunConfig.mail_mailgun_endpoint.$touch())},null,8,["modelValue","content-loading","invalid"])]),_:1},8,["label","content-loading","error"]),t(M,{label:v.$t("settings.mail.from_mail"),"content-loading":i.isFetchingInitialData,error:e(l).mailgunConfig.from_mail.$error&&e(l).mailgunConfig.from_mail.$errors[0].$message,required:""},{default:s(()=>[t($,{modelValue:e(n).mailgunConfig.from_mail,"onUpdate:modelValue":a[8]||(a[8]=b=>e(n).mailgunConfig.from_mail=b),modelModifiers:{trim:!0},"content-loading":i.isFetchingInitialData,type:"text",name:"from_mail",invalid:e(l).mailgunConfig.from_mail.$error,onInput:a[9]||(a[9]=b=>e(l).mailgunConfig.from_mail.$touch())},null,8,["modelValue","content-loading","invalid"])]),_:1},8,["label","content-loading","error"]),t(M,{label:v.$t("settings.mail.from_name"),"content-loading":i.isFetchingInitialData,error:e(l).mailgunConfig.from_name.$error&&e(l).mailgunConfig.from_name.$errors[0].$message,required:""},{default:s(()=>[t($,{modelValue:e(n).mailgunConfig.from_name,"onUpdate:modelValue":a[10]||(a[10]=b=>e(n).mailgunConfig.from_name=b),modelModifiers:{trim:!0},"content-loading":i.isFetchingInitialData,type:"text",name:"from_name",invalid:e(l).mailgunConfig.from_name.$error,onInput:a[11]||(a[11]=b=>e(l).mailgunConfig.from_name.$touch())},null,8,["modelValue","content-loading","invalid"])]),_:1},8,["label","content-loading","error"])]),_:1}),F("div",ie,[t(w,{disabled:i.isSaving,"content-loading":i.isFetchingInitialData,loading:i.isSaving,variant:"primary",type:"submit"},{left:s(b=>[i.isSaving?A("",!0):(B(),U(D,{key:0,name:"ArrowDownOnSquareIcon",class:x(b.class)},null,8,["class"]))]),default:s(()=>[S(" "+k(v.$t("general.save")),1)]),_:1},8,["disabled","content-loading","loading"]),L(v.$slots,"default")])],32)}}},ae={class:"flex my-10"},te={__name:"SesMailDriver",props:{configData:{type:Object,require:!0,default:Object},isSaving:{type:Boolean,require:!0,default:!1},isFetchingInitialData:{type:Boolean,require:!0,default:!1},mailDrivers:{type:Array,require:!0,default:Array}},emits:["submit-data","on-change-driver"],setup(i,{emit:h}){const p=i,c=h,n=T(),{t:d}=O.useI18n();let C=j(!1);const y=K(["tls","ssl","starttls"]),_=V(()=>({sesConfig:{mail_driver:{required:u.withMessage(d("validation.required"),I)},mail_host:{required:u.withMessage(d("validation.required"),I)},mail_port:{required:u.withMessage(d("validation.required"),I),numeric:J},mail_ses_key:{required:u.withMessage(d("validation.required"),I)},mail_ses_secret:{required:u.withMessage(d("validation.required"),I)},mail_ses_region:{required:u.withMessage(d("validation.required"),I)},mail_encryption:{required:u.withMessage(d("validation.required"),I)},from_mail:{required:u.withMessage(d("validation.required"),I),email:u.withMessage(d("validation.email_incorrect"),E)},from_name:{required:u.withMessage(d("validation.required"),I)}}})),l=P(_,V(()=>n)),m=V(()=>C.value?"text":"password");N(()=>{for(const a in n.sesConfig)p.configData.hasOwnProperty(a)&&(n.sesConfig[a]=p.configData[a])});async function g(){return l.value.sesConfig.$touch(),l.value.sesConfig.$invalid||c("submit-data",n.sesConfig),!1}function v(){l.value.sesConfig.mail_driver.$touch(),c("on-change-driver",n.sesConfig.mail_driver)}return(a,o)=>{const M=f("BaseMultiselect"),$=f("BaseInputGroup"),D=f("BaseInput"),q=f("BaseIcon"),w=f("BaseInputGrid"),b=f("BaseButton");return B(),G("form",{onSubmit:z(g,["prevent"])},[t(w,null,{default:s(()=>[t($,{label:a.$t("settings.mail.driver"),"content-loading":i.isFetchingInitialData,error:e(l).sesConfig.mail_driver.$error&&e(l).sesConfig.mail_driver.$errors[0].$message,required:""},{default:s(()=>[t(M,{modelValue:e(n).sesConfig.mail_driver,"onUpdate:modelValue":[o[0]||(o[0]=r=>e(n).sesConfig.mail_driver=r),v],"content-loading":i.isFetchingInitialData,options:i.mailDrivers,"can-deselect":!1,invalid:e(l).sesConfig.mail_driver.$error},null,8,["modelValue","content-loading","options","invalid"])]),_:1},8,["label","content-loading","error"]),t($,{label:a.$t("settings.mail.host"),"content-loading":i.isFetchingInitialData,error:e(l).sesConfig.mail_host.$error&&e(l).sesConfig.mail_host.$errors[0].$message,required:""},{default:s(()=>[t(D,{modelValue:e(n).sesConfig.mail_host,"onUpdate:modelValue":o[1]||(o[1]=r=>e(n).sesConfig.mail_host=r),modelModifiers:{trim:!0},"content-loading":i.isFetchingInitialData,type:"text",name:"mail_host",invalid:e(l).sesConfig.mail_host.$error,onInput:o[2]||(o[2]=r=>e(l).sesConfig.mail_host.$touch())},null,8,["modelValue","content-loading","invalid"])]),_:1},8,["label","content-loading","error"]),t($,{label:a.$t("settings.mail.port"),"content-loading":i.isFetchingInitialData,error:e(l).sesConfig.mail_port.$error&&e(l).sesConfig.mail_port.$errors[0].$message,required:""},{default:s(()=>[t(D,{modelValue:e(n).sesConfig.mail_port,"onUpdate:modelValue":o[3]||(o[3]=r=>e(n).sesConfig.mail_port=r),modelModifiers:{trim:!0},"content-loading":i.isFetchingInitialData,type:"text",name:"mail_port",invalid:e(l).sesConfig.mail_port.$error,onInput:o[4]||(o[4]=r=>e(l).sesConfig.mail_port.$touch())},null,8,["modelValue","content-loading","invalid"])]),_:1},8,["label","content-loading","error"]),t($,{label:a.$t("settings.mail.encryption"),"content-loading":i.isFetchingInitialData,error:e(l).sesConfig.mail_encryption.$error&&e(l).sesConfig.mail_encryption.$errors[0].$message,required:""},{default:s(()=>[t(M,{modelValue:e(n).sesConfig.mail_encryption,"onUpdate:modelValue":o[5]||(o[5]=r=>e(n).sesConfig.mail_encryption=r),modelModifiers:{trim:!0},"content-loading":i.isFetchingInitialData,options:y,invalid:e(l).sesConfig.mail_encryption.$error,placeholder:"Select option",onInput:o[6]||(o[6]=r=>e(l).sesConfig.mail_encryption.$touch())},null,8,["modelValue","content-loading","options","invalid"])]),_:1},8,["label","content-loading","error"]),t($,{label:a.$t("settings.mail.from_mail"),"content-loading":i.isFetchingInitialData,error:e(l).sesConfig.from_mail.$error&&e(l).sesConfig.from_mail.$errors[0].$message,required:""},{default:s(()=>[t(D,{modelValue:e(n).sesConfig.from_mail,"onUpdate:modelValue":o[7]||(o[7]=r=>e(n).sesConfig.from_mail=r),modelModifiers:{trim:!0},"content-loading":i.isFetchingInitialData,type:"text",name:"from_mail",invalid:e(l).sesConfig.from_mail.$error,onInput:o[8]||(o[8]=r=>e(l).sesConfig.from_mail.$touch())},null,8,["modelValue","content-loading","invalid"])]),_:1},8,["label","content-loading","error"]),t($,{label:a.$t("settings.mail.from_name"),"content-loading":i.isFetchingInitialData,error:e(l).sesConfig.from_name.$error&&e(l).sesConfig.from_name.$errors[0].$message,required:""},{default:s(()=>[t(D,{modelValue:e(n).sesConfig.from_name,"onUpdate:modelValue":o[9]||(o[9]=r=>e(n).sesConfig.from_name=r),modelModifiers:{trim:!0},"content-loading":i.isFetchingInitialData,type:"text",name:"name",invalid:e(l).sesConfig.from_name.$error,onInput:o[10]||(o[10]=r=>e(l).sesConfig.from_name.$touch())},null,8,["modelValue","content-loading","invalid"])]),_:1},8,["label","content-loading","error"]),t($,{label:a.$t("settings.mail.ses_key"),"content-loading":i.isFetchingInitialData,error:e(l).sesConfig.mail_ses_key.$error&&e(l).sesConfig.mail_ses_key.$errors[0].$message,required:""},{default:s(()=>[t(D,{modelValue:e(n).sesConfig.mail_ses_key,"onUpdate:modelValue":o[11]||(o[11]=r=>e(n).sesConfig.mail_ses_key=r),modelModifiers:{trim:!0},"content-loading":i.isFetchingInitialData,type:"text",name:"mail_ses_key",invalid:e(l).sesConfig.mail_ses_key.$error,onInput:o[12]||(o[12]=r=>e(l).sesConfig.mail_ses_key.$touch())},null,8,["modelValue","content-loading","invalid"])]),_:1},8,["label","content-loading","error"]),t($,{label:a.$t("settings.mail.ses_secret"),"content-loading":i.isFetchingInitialData,error:e(l).sesConfig.mail_ses_secret.$error&&e(l).mail_ses_secret.$errors[0].$message,required:""},{default:s(()=>[t(D,{modelValue:e(n).sesConfig.mail_ses_secret,"onUpdate:modelValue":o[14]||(o[14]=r=>e(n).sesConfig.mail_ses_secret=r),modelModifiers:{trim:!0},"content-loading":i.isFetchingInitialData,type:m.value,name:"mail_ses_secret",autocomplete:"off",invalid:e(l).sesConfig.mail_ses_secret.$error,onInput:o[15]||(o[15]=r=>e(l).sesConfig.mail_ses_secret.$touch())},{right:s(()=>[t(q,{name:e(C)?"EyeIcon":"EyeSlashIcon",class:"mr-1 text-gray-500 cursor-pointer",onClick:o[13]||(o[13]=r=>Q(C)?C.value=!e(C):C=!e(C))},null,8,["name"])]),_:1},8,["modelValue","content-loading","type","invalid"])]),_:1},8,["label","content-loading","error"]),t($,{label:a.$t("settings.mail.ses_region"),"content-loading":i.isFetchingInitialData,error:e(l).sesConfig.mail_ses_region.$error&&e(l).sesConfig.mail_ses_region.$errors[0].$message,required:""},{default:s(()=>[t(D,{modelValue:e(n).sesConfig.mail_ses_region,"onUpdate:modelValue":o[16]||(o[16]=r=>e(n).sesConfig.mail_ses_region=r),modelModifiers:{trim:!0},"content-loading":i.isFetchingInitialData,type:"text",name:"mail_ses_region",invalid:e(l).sesConfig.mail_ses_region.$error,onInput:o[17]||(o[17]=r=>e(l).sesConfig.mail_ses_region.$touch())},null,8,["modelValue","content-loading","invalid"])]),_:1},8,["label","content-loading","error"])]),_:1}),F("div",ae,[t(b,{disabled:i.isSaving,"content-loading":i.isFetchingInitialData,loading:i.isSaving,variant:"primary",type:"submit"},{left:s(r=>[i.isSaving?A("",!0):(B(),U(q,{key:0,name:"ArrowDownOnSquareIcon",class:x(r.class)},null,8,["class"]))]),default:s(()=>[S(" "+k(a.$t("general.save")),1)]),_:1},8,["disabled","content-loading","loading"]),L(a.$slots,"default")])],32)}}},oe={class:"flex mt-8"},H={__name:"BasicMailDriver",props:{configData:{type:Object,require:!0,default:Object},isSaving:{type:Boolean,require:!0,default:!1},isFetchingInitialData:{type:Boolean,require:!0,default:!1},mailDrivers:{type:Array,require:!0,default:Array}},emits:["submit-data","on-change-driver"],setup(i,{emit:h}){const p=i,c=h,n=T(),{t:d}=O.useI18n(),C=V(()=>({basicMailConfig:{mail_driver:{required:u.withMessage(d("validation.required"),I)},from_mail:{required:u.withMessage(d("validation.required"),I),email:u.withMessage(d("validation.email_incorrect"),E)},from_name:{required:u.withMessage(d("validation.required"),I)}}})),y=P(C,V(()=>n));N(()=>{for(const m in n.basicMailConfig)p.configData.hasOwnProperty(m)&&n.$patch(g=>{g.basicMailConfig[m]=p.configData[m]})});async function _(){return y.value.basicMailConfig.$touch(),y.value.basicMailConfig.$invalid||c("submit-data",n.basicMailConfig),!1}function l(){y.value.basicMailConfig.mail_driver.$touch(),c("on-change-driver",n.basicMailConfig.mail_driver)}return(m,g)=>{const v=f("BaseMultiselect"),a=f("BaseInputGroup"),o=f("BaseInput"),M=f("BaseInputGrid"),$=f("BaseIcon"),D=f("BaseButton");return B(),G("form",{onSubmit:z(_,["prevent"])},[t(M,null,{default:s(()=>[t(a,{label:m.$t("settings.mail.driver"),"content-loading":i.isFetchingInitialData,error:e(y).basicMailConfig.mail_driver.$error&&e(y).basicMailConfig.mail_driver.$errors[0].$message,required:""},{default:s(()=>[t(v,{modelValue:e(n).basicMailConfig.mail_driver,"onUpdate:modelValue":[g[0]||(g[0]=q=>e(n).basicMailConfig.mail_driver=q),l],"content-loading":i.isFetchingInitialData,options:i.mailDrivers,"can-deselect":!1,invalid:e(y).basicMailConfig.mail_driver.$error},null,8,["modelValue","content-loading","options","invalid"])]),_:1},8,["label","content-loading","error"]),t(a,{label:m.$t("settings.mail.from_mail"),"content-loading":i.isFetchingInitialData,error:e(y).basicMailConfig.from_mail.$error&&e(y).basicMailConfig.from_mail.$errors[0].$message,required:""},{default:s(()=>[t(o,{modelValue:e(n).basicMailConfig.from_mail,"onUpdate:modelValue":g[1]||(g[1]=q=>e(n).basicMailConfig.from_mail=q),modelModifiers:{trim:!0},"content-loading":i.isFetchingInitialData,type:"text",name:"from_mail",invalid:e(y).basicMailConfig.from_mail.$error,onInput:g[2]||(g[2]=q=>e(y).basicMailConfig.from_mail.$touch())},null,8,["modelValue","content-loading","invalid"])]),_:1},8,["label","content-loading","error"]),t(a,{label:m.$t("settings.mail.from_name"),"content-loading":i.isFetchingInitialData,error:e(y).basicMailConfig.from_name.$error&&e(y).basicMailConfig.from_name.$errors[0].$message,required:""},{default:s(()=>[t(o,{modelValue:e(n).basicMailConfig.from_name,"onUpdate:modelValue":g[3]||(g[3]=q=>e(n).basicMailConfig.from_name=q),modelModifiers:{trim:!0},"content-loading":i.isFetchingInitialData,type:"text",name:"name",invalid:e(y).basicMailConfig.from_name.$error,onInput:g[4]||(g[4]=q=>e(y).basicMailConfig.from_name.$touch())},null,8,["modelValue","content-loading","invalid"])]),_:1},8,["label","content-loading","error"])]),_:1}),F("div",oe,[t(D,{"content-loading":i.isFetchingInitialData,disabled:i.isSaving,loading:i.isSaving,variant:"primary",type:"submit"},{left:s(q=>[i.isSaving?A("",!0):(B(),U($,{key:0,class:x(q.class),name:"ArrowDownOnSquareIcon"},null,8,["class"]))]),default:s(()=>[S(" "+k(m.$t("general.save")),1)]),_:1},8,["content-loading","disabled","loading"]),L(m.$slots,"default")])],32)}}},le={class:"flex justify-between w-full"},re={class:"p-4 md:p-8"},se={class:"z-0 flex justify-end p-4 border-t border-gray-200 border-solid"},me={__name:"MailTestModal",setup(i){let h=j(!1),p=K({to:"",subject:"",message:""});const c=W(),n=T(),{t:d}=O.useI18n(),C=V(()=>c.active&&c.componentName==="MailTestModal"),y={formData:{to:{required:u.withMessage(d("validation.required"),I),email:u.withMessage(d("validation.email_incorrect"),E)},subject:{required:u.withMessage(d("validation.required"),I),maxLength:u.withMessage(d("validation.subject_maxlength"),R(100))},message:{required:u.withMessage(d("validation.required"),I),maxLength:u.withMessage(d("validation.message_maxlength"),R(255))}}},_=P(y,{formData:p});function l(){p.id="",p.to="",p.subject="",p.message="",_.value.$reset()}async function m(){if(_.value.formData.$touch(),_.value.$invalid)return!0;h.value=!0,(await n.sendTestMail(p)).data&&(g(),h.value=!1)}function g(){c.closeModal(),setTimeout(()=>{c.resetModalData(),l()},300)}return(v,a)=>{const o=f("BaseIcon"),M=f("BaseInput"),$=f("BaseInputGroup"),D=f("BaseTextarea"),q=f("BaseInputGrid"),w=f("BaseButton"),b=f("BaseModal");return B(),U(b,{show:C.value,onClose:g},{header:s(()=>[F("div",le,[S(k(e(c).title)+" ",1),t(o,{name:"XMarkIcon",class:"w-6 h-6 text-gray-500 cursor-pointer",onClick:g})])]),default:s(()=>[F("form",{action:"",onSubmit:z(m,["prevent"])},[F("div",re,[t(q,{layout:"one-column"},{default:s(()=>[t($,{label:v.$t("general.to"),error:e(_).formData.to.$error&&e(_).formData.to.$errors[0].$message,variant:"horizontal",required:""},{default:s(()=>[t(M,{ref:"to",modelValue:e(p).to,"onUpdate:modelValue":a[0]||(a[0]=r=>e(p).to=r),type:"text",invalid:e(_).formData.to.$error,onInput:a[1]||(a[1]=r=>e(_).formData.to.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["label","error"]),t($,{label:v.$t("general.subject"),error:e(_).formData.subject.$error&&e(_).formData.subject.$errors[0].$message,variant:"horizontal",required:""},{default:s(()=>[t(M,{modelValue:e(p).subject,"onUpdate:modelValue":a[2]||(a[2]=r=>e(p).subject=r),type:"text",invalid:e(_).formData.subject.$error,onInput:a[3]||(a[3]=r=>e(_).formData.subject.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["label","error"]),t($,{label:v.$t("general.message"),error:e(_).formData.message.$error&&e(_).formData.message.$errors[0].$message,variant:"horizontal",required:""},{default:s(()=>[t(D,{modelValue:e(p).message,"onUpdate:modelValue":a[4]||(a[4]=r=>e(p).message=r),rows:"4",cols:"50",invalid:e(_).formData.message.$error,onInput:a[5]||(a[5]=r=>e(_).formData.message.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["label","error"])]),_:1})]),F("div",se,[t(w,{variant:"primary-outline",type:"button",class:"mr-3",onClick:a[6]||(a[6]=r=>g())},{default:s(()=>[S(k(v.$t("general.cancel")),1)]),_:1}),t(w,{loading:e(h),variant:"primary",type:"submit"},{left:s(r=>[e(h)?A("",!0):(B(),U(o,{key:0,name:"PaperAirplaneIcon",class:x(r.class)},null,8,["class"]))]),default:s(()=>[S(" "+k(v.$t("general.send")),1)]),_:1},8,["loading"])])],32)]),_:1},8,["show"])}}},de={key:0,class:"mt-14"},fe={__name:"MailConfigSetting",setup(i){let h=j(!1),p=j(!1);const c=T(),n=W(),{t:d}=O.useI18n();y();function C(g){c.mail_driver=g,c.mailConfigData.mail_driver=g}async function y(){p.value=!0,Promise.all([await c.fetchMailDrivers(),await c.fetchMailConfig()]).then(([g])=>{p.value=!1})}const _=V(()=>c.mail_driver=="smtp"?X:c.mail_driver=="mailgun"?ne:c.mail_driver=="sendmail"?H:c.mail_driver=="ses"?te:c.mail_driver=="mail"?H:X);async function l(g){try{return h.value=!0,await c.updateMailConfig(g),h.value=!1,!0}catch(v){console.error(v)}}function m(){n.openModal({title:d("general.test_mail_conf"),componentName:"MailTestModal",size:"sm"})}return(g,v)=>{const a=f("BaseButton"),o=f("BaseSettingCard");return B(),G(Y,null,[t(me),t(o,{title:g.$t("settings.mail.mail_config"),description:g.$t("settings.mail.mail_config_desc")},{default:s(()=>[e(c)&&e(c).mailConfigData?(B(),G("div",de,[(B(),U(Z(_.value),{"config-data":e(c).mailConfigData,"is-saving":e(h),"mail-drivers":e(c).mail_drivers,"is-fetching-initial-data":e(p),onOnChangeDriver:v[0]||(v[0]=M=>C(M)),onSubmitData:l},{default:s(()=>[t(a,{variant:"primary-outline",type:"button",class:"ml-2","content-loading":e(p),onClick:m},{default:s(()=>[S(k(g.$t("general.test_mail_conf")),1)]),_:1},8,["content-loading"])]),_:1},40,["config-data","is-saving","mail-drivers","is-fetching-initial-data"]))])):A("",!0)]),_:1},8,["title","description"])],64)}}};export{fe as default};
