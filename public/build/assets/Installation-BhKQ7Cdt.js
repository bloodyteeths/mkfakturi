import{a6 as $e,F as ee,s as G,a3 as T,e as M,k as J,K as U,w as c,r as h,o as S,b as q,ag as ae,a,l as e,p as te,q as L,t as k,M as W,aB as ne,j as z,L as E,c as P,Q as re,R as se,v as A,ax as ve,I as Y,f as y,a7 as ie,g as B,i as x,bk as Z,aZ as de,m as j,aK as oe,a0 as ue,u as me,a5 as ce,h as Q,O as pe,a2 as we,aF as he,J as ye,H as _e,aD as ge,n as be,bl as Ie}from"./main-DpDYmbyp.js";import{u as X}from"./mail-driver-CyCfVKbW.js";const K=(i=!1)=>{const D=i?window.pinia.defineStore:$e,{global:C}=window.i18n,s=ee();return D({id:"installation",state:()=>({currentDataBaseData:{database_connection:"mysql",database_hostname:"127.0.0.1",database_port:"3306",database_name:null,database_username:null,database_password:null,database_overwrite:!1,app_url:window.location.origin,app_locale:null}}),actions:{fetchInstallationLanguages(){return new Promise((d,l)=>{G.get("/installation/languages").then(u=>{d(u)}).catch(u=>{T(u),l(u)})})},fetchInstallationRequirements(){return new Promise((d,l)=>{G.get("/installation/requirements").then(u=>{d(u)}).catch(u=>{T(u),l(u)})})},fetchInstallationStep(){return new Promise((d,l)=>{G.get("/installation/wizard-step").then(u=>{d(u)}).catch(u=>{T(u),l(u)})})},addInstallationStep(d){return new Promise((l,u)=>{G.post("/installation/wizard-step",d).then(n=>{l(n)}).catch(n=>{T(n),u(n)})})},addInstallationLanguage(d){return new Promise((l,u)=>{G.post("/installation/wizard-language",d).then(n=>{l(n)}).catch(n=>{T(n),u(n)})})},fetchInstallationPermissions(){return new Promise((d,l)=>{G.get("/installation/permissions").then(u=>{d(u)}).catch(u=>{T(u),l(u)})})},fetchInstallationDatabase(d){return new Promise((l,u)=>{G.get("/installation/database/config",{params:d}).then(n=>{l(n)}).catch(n=>{T(n),u(n)})})},addInstallationDatabase(d){return new Promise((l,u)=>{G.post("/installation/database/config",d).then(n=>{l(n)}).catch(n=>{T(n),u(n)})})},addInstallationFinish(){return new Promise((d,l)=>{G.post("/installation/finish").then(u=>{d(u)}).catch(u=>{T(u),l(u)})})},setInstallationDomain(d){return new Promise((l,u)=>{G.put("/installation/set-domain",d).then(n=>{l(n)}).catch(n=>{T(n),u(n)})})},installationLogin(){return new Promise((d,l)=>{G.get(window.location.origin+"/sanctum/csrf-cookie").then(u=>{u&&G.post("/installation/login").then(n=>{s.setSelectedCompany(n.data.company),n.data.token&&window.Ls.set("auth.token",n.data.token),d(n)}).catch(n=>{T(n),l(n)})})})},checkAutheticated(){return new Promise((d,l)=>{G.get("/auth/check").then(u=>{d(u)}).catch(u=>{l(u)})})}}})()},qe={class:"w-full md:w-2/3"},Ve={class:"mb-6"},Be={__name:"Step0SetLanguage",emits:["next"],setup(i,{emit:D}){const{global:C}=window.i18n,s=D;let d=M(!1),l=M(!1),u=M([]),n="en";const g=K();J(()=>{r()});async function r(){d.value=!0;const b=await g.fetchInstallationLanguages();u.value=b.data.languages,d.value=!1}function v(){l.value=!0,s("next"),l.value=!1}function o(b){typeof C.locale!="string"&&(C.locale.value=b)}return(b,t)=>{const m=h("BaseMultiselect"),_=h("BaseInputGroup"),V=h("BaseIcon"),$=h("BaseButton"),f=h("BaseWizardStep");return S(),U(f,{title:b.$t("wizard.install_language.title"),description:b.$t("wizard.install_language.description")},{default:c(()=>[q("div",qe,[q("div",Ve,[a(_,{label:b.$t("wizard.language"),"content-loading":e(d),required:""},{default:c(()=>[a(m,{modelValue:e(n),"onUpdate:modelValue":t[0]||(t[0]=w=>te(n)?n.value=w:n=w),"content-loading":e(d),options:e(u),label:"name","value-prop":"code",placeholder:b.$t("settings.preferences.select_language"),class:"w-full","track-by":"name",searchable:!0,onChange:o},null,8,["modelValue","content-loading","options","placeholder"])]),_:1},8,["label","content-loading"])]),ae(a($,{onClick:v},{left:c(w=>[a(V,{name:"ArrowRightIcon",class:W(w.class)},null,8,["class"])]),default:c(()=>[L(k(b.$t("wizard.continue"))+" ",1)]),_:1},512),[[ne,!e(d)]])])]),_:1},8,["title","description"])}}},Ce={class:"w-full md:w-2/3"},De={class:"mb-6"},Se={key:0,class:"grid grid-flow-row grid-cols-3 p-3 border border-gray-200 lg:gap-24 sm:gap-4"},Fe={class:"col-span-2 text-sm"},Me={class:"text-right"},ze={key:0,class:"inline-block w-4 h-4 ml-3 mr-2 bg-green-500 rounded-full"},ke={key:1,class:"inline-block w-4 h-4 ml-3 mr-2 bg-red-500 rounded-full"},Ue={key:1},Pe={class:"col-span-2 text-sm"},Le={class:"text-right"},Oe={key:0,class:"inline-block w-4 h-4 ml-3 mr-2 bg-green-500 rounded-full"},Ne={key:1,class:"inline-block w-4 h-4 ml-3 mr-2 bg-red-500 rounded-full"},Ge={__name:"Step1RequirementsCheck",emits:["next"],setup(i,{emit:D}){const C=D,s=M(""),d=M(""),l=M(!1);M(!0);const u=K();J(async()=>{g()});const n=z(()=>{if(s.value){let v=!0;for(const o in s.value)return s.value[o]||(v=!1),s.value&&d.value.supported&&v}return!1});async function g(){var o,b,t,m;l.value=!0;const v=await u.fetchInstallationRequirements();v.data&&(s.value=(t=(b=(o=v==null?void 0:v.data)==null?void 0:o.requirements)==null?void 0:b.requirements)==null?void 0:t.php,d.value=(m=v==null?void 0:v.data)==null?void 0:m.phpSupportInfo)}function r(){l.value=!0,C("next"),l.value=!1}return(v,o)=>{const b=h("BaseIcon"),t=h("BaseButton"),m=h("BaseWizardStep");return S(),U(m,{title:v.$t("wizard.req.system_req"),description:v.$t("wizard.req.system_req_desc")},{default:c(()=>[q("div",Ce,[q("div",De,[d.value?(S(),P("div",Se,[q("div",Fe,k(v.$t("wizard.req.php_req_version",{version:d.value.minimum})),1),q("div",Me,[L(k(d.value.current)+" ",1),d.value.supported?(S(),P("span",ze)):(S(),P("span",ke))])])):E("",!0),s.value?(S(),P("div",Ue,[(S(!0),P(re,null,se(s.value,(_,V)=>(S(),P("div",{key:V,class:"grid grid-flow-row grid-cols-3 p-3 border border-gray-200 lg:gap-24 sm:gap-4"},[q("div",Pe,k(V),1),q("div",Le,[_?(S(),P("span",Oe)):(S(),P("span",Ne))])]))),128))])):E("",!0)]),n.value?(S(),U(t,{key:0,onClick:r},{left:c(_=>[a(b,{name:"ArrowRightIcon",class:W(_.class)},null,8,["class"])]),default:c(()=>[L(k(v.$t("wizard.continue"))+" ",1)]),_:1})):E("",!0),s.value?E("",!0):(S(),U(t,{key:1,loading:l.value,disabled:l.value,onClick:g},{default:c(()=>[L(k(v.$t("wizard.req.check_req")),1)]),_:1},8,["loading","disabled"]))])]),_:1},8,["title","description"])}}},Ee={key:1,class:"relative"},We={class:"grid grid-flow-row grid-cols-3 lg:gap-24 sm:gap-4"},Ae={class:"col-span-2 p-3"},Re={class:"p-3 text-right"},Te={key:0,class:"inline-block w-4 h-4 ml-3 mr-2 rounded-full bg-green-500"},xe={key:1,class:"inline-block w-4 h-4 ml-3 mr-2 rounded-full bg-red-500"},je={__name:"Step2PermissionCheck",emits:["next"],setup(i,{emit:D}){const C=D;let s=M(!1),d=M(!1),l=M([]);const{tm:u,t:n}=A.useI18n(),g=K(),r=ve();J(()=>{v()});async function v(){s.value=!0;const b=await g.fetchInstallationPermissions();l.value=b.data.permissions.permissions,b.data&&b.data.permissions.errors&&setTimeout(()=>{r.openDialog({title:u("wizard.permissions.permission_confirm_title"),message:n("wizard.permissions.permission_confirm_desc"),yesLabel:"OK",noLabel:"Cancel",variant:"danger",hideNoButton:!1,size:"lg"}).then(t=>{t.data&&(s.value=!1)})},500),s.value=!1}function o(){d.value=!0,C("next"),d.value=!1}return(b,t)=>{const m=h("BaseContentPlaceholdersText"),_=h("BaseContentPlaceholdersBox"),V=h("BaseContentPlaceholders"),$=h("BaseIcon"),f=h("BaseButton"),w=h("BaseWizardStep");return S(),U(w,{title:b.$t("wizard.permissions.permissions"),description:b.$t("wizard.permissions.permission_desc")},{default:c(()=>[e(s)?(S(),U(V,{key:0},{default:c(()=>[(S(),P(re,null,se(3,(p,I)=>q("div",{key:I,class:"grid grid-flow-row grid-cols-3 lg:gap-24 sm:gap-4 border border-gray-200"},[a(m,{lines:1,class:"col-span-4 p-3"})])),64)),a(_,{rounded:!0,class:"mt-10",style:{width:"96px",height:"42px"}})]),_:1})):(S(),P("div",Ee,[(S(!0),P(re,null,se(e(l),(p,I)=>(S(),P("div",{key:I,class:"border border-gray-200"},[q("div",We,[q("div",Ae,k(p.folder),1),q("div",Re,[p.isSet?(S(),P("span",Te)):(S(),P("span",xe)),q("span",null,k(p.permission),1)])])]))),128)),ae(a(f,{class:"mt-10",loading:e(d),disabled:e(d),onClick:o},{left:c(p=>[a($,{name:"ArrowRightIcon",class:W(p.class)},null,8,["class"])]),default:c(()=>[L(" "+k(b.$t("wizard.continue")),1)]),_:1},8,["loading","disabled"]),[[ne,!e(s)]])]))]),_:1},8,["title","description"])}}},Ye={class:"grid grid-cols-1 gap-5 md:grid-cols-2 lg:mb-6 md:mb-6"},Ke={class:"w-full"},Ze={__name:"MysqlDatabase",props:{configData:{type:Object,require:!0,default:Object},isSaving:{type:Boolean,require:!0,default:!1},isFetchingInitialData:{type:Boolean,default:!1}},emits:["submit-data","on-change-driver"],setup(i,{emit:D}){const C=i,s=D,d=Y(["sqlite","mysql","pgsql"]),{t:l}=A.useI18n(),u=ie("utils"),n=K();J(()=>{for(const m in g.value)C.configData.hasOwnProperty(m)&&(g.value[m]=C.configData[m])});const g=z(()=>n.currentDataBaseData),r=m=>u.checkValidUrl(m),v={database_connection:{required:y.withMessage(l("validation.required"),B)},database_hostname:{required:y.withMessage(l("validation.required"),B)},database_port:{required:y.withMessage(l("validation.required"),B),numeric:oe},database_name:{required:y.withMessage(l("validation.required"),B)},database_username:{required:y.withMessage(l("validation.required"),B)},app_url:{required:y.withMessage(l("validation.required"),B),isUrl:y.withMessage(l("validation.invalid_url"),r)}},o=x(v,g.value);function b(){if(o.value.$touch(),o.value.$invalid)return!0;s("submit-data",g.value)}function t(){o.value.database_connection.$touch(),s("on-change-driver",g.value.database_connection)}return(m,_)=>{const V=h("BaseInput"),$=h("BaseMultiselect"),f=h("BaseIcon"),w=h("BaseButton");return S(),P("form",{action:"",onSubmit:j(b,["prevent"])},[q("div",Ye,[a(Z,{label:m.$t("wizard.database.app_url"),error:e(o).app_url.$error&&e(o).app_url.$errors[0].$message,required:""},{default:c(()=>[a(V,{modelValue:g.value.app_url,"onUpdate:modelValue":_[0]||(_[0]=p=>g.value.app_url=p),invalid:e(o).app_url.$error,type:"text"},null,8,["modelValue","invalid"])]),_:1},8,["label","error"]),a(Z,{label:m.$t("wizard.database.connection"),error:e(o).database_connection.$error&&e(o).database_connection.$errors[0].$message,required:""},{default:c(()=>[a($,{modelValue:g.value.database_connection,"onUpdate:modelValue":[_[1]||(_[1]=p=>g.value.database_connection=p),t],invalid:e(o).database_connection.$error,options:d,"can-deselect":!1,"can-clear":!1},null,8,["modelValue","invalid","options"])]),_:1},8,["label","error"]),a(Z,{label:m.$t("wizard.database.port"),error:e(o).database_port.$error&&e(o).database_port.$errors[0].$message,required:""},{default:c(()=>[a(V,{modelValue:g.value.database_port,"onUpdate:modelValue":_[2]||(_[2]=p=>g.value.database_port=p),invalid:e(o).database_port.$error},null,8,["modelValue","invalid"])]),_:1},8,["label","error"]),a(Z,{label:m.$t("wizard.database.db_name"),error:e(o).database_name.$error&&e(o).database_name.$errors[0].$message,required:""},{default:c(()=>[a(V,{modelValue:g.value.database_name,"onUpdate:modelValue":_[3]||(_[3]=p=>g.value.database_name=p),invalid:e(o).database_name.$error},null,8,["modelValue","invalid"])]),_:1},8,["label","error"]),a(Z,{label:m.$t("wizard.database.username"),error:e(o).database_username.$error&&e(o).database_username.$errors[0].$message,required:""},{default:c(()=>[a(V,{modelValue:g.value.database_username,"onUpdate:modelValue":_[4]||(_[4]=p=>g.value.database_username=p),invalid:e(o).database_username.$error},null,8,["modelValue","invalid"])]),_:1},8,["label","error"]),a(Z,{label:m.$t("wizard.database.password")},{default:c(()=>[a(V,{modelValue:g.value.database_password,"onUpdate:modelValue":_[5]||(_[5]=p=>g.value.database_password=p),type:"password"},null,8,["modelValue"])]),_:1},8,["label"]),a(Z,{label:m.$t("wizard.database.host"),error:e(o).database_hostname.$error&&e(o).database_hostname.$errors[0].$message,required:""},{default:c(()=>[a(V,{modelValue:g.value.database_hostname,"onUpdate:modelValue":_[6]||(_[6]=p=>g.value.database_hostname=p),invalid:e(o).database_hostname.$error},null,8,["modelValue","invalid"])]),_:1},8,["label","error"])]),q("div",Ke,[a(de,{modelValue:g.value.database_overwrite,"onUpdate:modelValue":_[7]||(_[7]=p=>g.value.database_overwrite=p),label:m.$t("wizard.database.overwrite")},null,8,["modelValue","label"])]),a(w,{type:"submit",class:"mt-4",loading:i.isSaving,disabled:i.isSaving},{left:c(p=>[i.isSaving?E("",!0):(S(),U(f,{key:0,name:"ArrowDownOnSquareIcon",class:W(p.class)},null,8,["class"]))]),default:c(()=>[L(" "+k(m.$t("wizard.save_cont")),1)]),_:1},8,["loading","disabled"])],32)}}},Je={class:"grid grid-cols-1 gap-5 md:grid-cols-2 lg:mb-6 md:mb-6"},He={class:"w-full"},Qe={__name:"PgsqlDatabase",props:{configData:{type:Object,require:!0,default:Object},isSaving:{type:Boolean,require:!0,default:!1},isFetchingInitialData:{type:Boolean,require:!0,default:!1}},emits:["submit-data","on-change-driver"],setup(i,{emit:D}){const C=i,s=D,d=Y(["sqlite","mysql","pgsql"]),{t:l}=A.useI18n(),u=ie("utils"),n=K(),g=z(()=>n.currentDataBaseData);J(()=>{for(const m in g.value)C.configData.hasOwnProperty(m)&&(g.value[m]=C.configData[m])});const r=m=>u.checkValidUrl(m),v={database_connection:{required:y.withMessage(l("validation.required"),B)},database_hostname:{required:y.withMessage(l("validation.required"),B)},database_port:{required:y.withMessage(l("validation.required"),B),numeric:oe},database_name:{required:y.withMessage(l("validation.required"),B)},database_username:{required:y.withMessage(l("validation.required"),B)},app_url:{required:y.withMessage(l("validation.required"),B),isUrl:y.withMessage(l("validation.invalid_url"),r)}},o=x(v,g.value);function b(){if(o.value.$touch(),o.value.$invalid)return!0;s("submit-data",g.value)}function t(){o.value.database_connection.$touch(),s("on-change-driver",g.value.database_connection)}return(m,_)=>{const V=h("BaseInput"),$=h("BaseInputGroup"),f=h("BaseMultiselect"),w=h("BaseIcon"),p=h("BaseButton");return S(),P("form",{action:"",onSubmit:j(b,["prevent"])},[q("div",Je,[a($,{label:m.$t("wizard.database.app_url"),"content-loading":i.isFetchingInitialData,error:e(o).app_url.$error&&e(o).app_url.$errors[0].$message,required:""},{default:c(()=>[a(V,{modelValue:g.value.app_url,"onUpdate:modelValue":_[0]||(_[0]=I=>g.value.app_url=I),"content-loading":i.isFetchingInitialData,invalid:e(o).app_url.$error,type:"text"},null,8,["modelValue","content-loading","invalid"])]),_:1},8,["label","content-loading","error"]),a($,{label:m.$t("wizard.database.connection"),"content-loading":i.isFetchingInitialData,error:e(o).database_connection.$error&&e(o).database_connection.$errors[0].$message,required:""},{default:c(()=>[a(f,{modelValue:g.value.database_connection,"onUpdate:modelValue":[_[1]||(_[1]=I=>g.value.database_connection=I),t],"content-loading":i.isFetchingInitialData,invalid:e(o).database_connection.$error,options:d,"can-deselect":!1,"can-clear":!1},null,8,["modelValue","content-loading","invalid","options"])]),_:1},8,["label","content-loading","error"]),a($,{label:m.$t("wizard.database.port"),"content-loading":i.isFetchingInitialData,error:e(o).database_port.$error&&e(o).database_port.$errors[0].$message,required:""},{default:c(()=>[a(V,{modelValue:g.value.database_port,"onUpdate:modelValue":_[2]||(_[2]=I=>g.value.database_port=I),"content-loading":i.isFetchingInitialData,invalid:e(o).database_port.$error},null,8,["modelValue","content-loading","invalid"])]),_:1},8,["label","content-loading","error"]),a($,{label:m.$t("wizard.database.db_name"),"content-loading":i.isFetchingInitialData,error:e(o).database_name.$error&&e(o).database_name.$errors[0].$message,required:""},{default:c(()=>[a(V,{modelValue:g.value.database_name,"onUpdate:modelValue":_[3]||(_[3]=I=>g.value.database_name=I),"content-loading":i.isFetchingInitialData,invalid:e(o).database_name.$error},null,8,["modelValue","content-loading","invalid"])]),_:1},8,["label","content-loading","error"]),a($,{label:m.$t("wizard.database.username"),"content-loading":i.isFetchingInitialData,error:e(o).database_username.$error&&e(o).database_username.$errors[0].$message,required:""},{default:c(()=>[a(V,{modelValue:g.value.database_username,"onUpdate:modelValue":_[4]||(_[4]=I=>g.value.database_username=I),"content-loading":i.isFetchingInitialData,invalid:e(o).database_username.$error},null,8,["modelValue","content-loading","invalid"])]),_:1},8,["label","content-loading","error"]),a($,{"content-loading":i.isFetchingInitialData,label:m.$t("wizard.database.password")},{default:c(()=>[a(V,{modelValue:g.value.database_password,"onUpdate:modelValue":_[5]||(_[5]=I=>g.value.database_password=I),"content-loading":i.isFetchingInitialData,type:"password"},null,8,["modelValue","content-loading"])]),_:1},8,["content-loading","label"]),a($,{label:m.$t("wizard.database.host"),"content-loading":i.isFetchingInitialData,error:e(o).database_hostname.$error&&e(o).database_hostname.$errors[0].$message,required:""},{default:c(()=>[a(V,{modelValue:g.value.database_hostname,"onUpdate:modelValue":_[6]||(_[6]=I=>g.value.database_hostname=I),"content-loading":i.isFetchingInitialData,invalid:e(o).database_hostname.$error},null,8,["modelValue","content-loading","invalid"])]),_:1},8,["label","content-loading","error"])]),q("div",He,[a(de,{modelValue:g.value.database_overwrite,"onUpdate:modelValue":_[7]||(_[7]=I=>g.value.database_overwrite=I),label:m.$t("wizard.database.overwrite")},null,8,["modelValue","label"])]),ae(a(p,{"content-loading":i.isFetchingInitialData,type:"submit",class:"mt-4",loading:i.isSaving,disabled:i.isSaving},{left:c(I=>[i.isSaving?E("",!0):(S(),U(w,{key:0,name:"ArrowDownOnSquareIcon",class:W(I.class)},null,8,["class"]))]),default:c(()=>[L(" "+k(m.$t("wizard.save_cont")),1)]),_:1},8,["content-loading","loading","disabled"]),[[ne,!i.isFetchingInitialData]])],32)}}},Xe={class:"grid grid-cols-1 gap-5 md:grid-cols-2 lg:mb-6 md:mb-6"},ea={class:"w-full"},aa={__name:"SqliteDatabase",props:{configData:{type:Object,require:!0,default:Object},isSaving:{type:Boolean,require:!0,default:!1},isFetchingInitialData:{type:Boolean,require:!0,default:!1}},emits:["submit-data","on-change-driver"],setup(i,{emit:D}){const C=i,s=D,d=Y(["sqlite","mysql","pgsql"]),{t:l}=A.useI18n(),u=ie("utils"),n=K(),g=z(()=>n.currentDataBaseData);J(()=>{for(const m in g.value)C.configData.hasOwnProperty(m)&&(g.value[m]=C.configData[m])});const r=m=>u.checkValidUrl(m),v={database_connection:{required:y.withMessage(l("validation.required"),B)},database_name:{required:y.withMessage(l("validation.required"),B)},app_url:{required:y.withMessage(l("validation.required"),B),isUrl:y.withMessage(l("validation.invalid_url"),r)}},o=x(v,g.value);function b(){if(o.value.$touch(),o.value.$invalid)return!0;s("submit-data",g.value)}function t(){o.value.database_connection.$touch(),s("on-change-driver",g.value.database_connection)}return(m,_)=>{const V=h("BaseInput"),$=h("BaseInputGroup"),f=h("BaseMultiselect"),w=h("BaseIcon"),p=h("BaseButton");return S(),P("form",{action:"",onSubmit:j(b,["prevent"])},[q("div",Xe,[a($,{label:m.$t("wizard.database.app_url"),"content-loading":i.isFetchingInitialData,error:e(o).app_url.$error&&e(o).app_url.$errors[0].$message,required:""},{default:c(()=>[a(V,{modelValue:g.value.app_url,"onUpdate:modelValue":_[0]||(_[0]=I=>g.value.app_url=I),"content-loading":i.isFetchingInitialData,invalid:e(o).app_url.$error,type:"text"},null,8,["modelValue","content-loading","invalid"])]),_:1},8,["label","content-loading","error"]),a($,{label:m.$t("wizard.database.connection"),"content-loading":i.isFetchingInitialData,error:e(o).database_connection.$error&&e(o).database_connection.$errors[0].$message,required:""},{default:c(()=>[a(f,{modelValue:g.value.database_connection,"onUpdate:modelValue":[_[1]||(_[1]=I=>g.value.database_connection=I),t],"content-loading":i.isFetchingInitialData,invalid:e(o).database_connection.$error,options:d,"can-deselect":!1,"can-clear":!1},null,8,["modelValue","content-loading","invalid","options"])]),_:1},8,["label","content-loading","error"]),a($,{label:m.$t("wizard.database.db_path"),error:e(o).database_name.$error&&e(o).database_name.$errors[0].$message,"content-loading":i.isFetchingInitialData,required:""},{default:c(()=>[a(V,{modelValue:g.value.database_name,"onUpdate:modelValue":_[2]||(_[2]=I=>g.value.database_name=I),"content-loading":i.isFetchingInitialData,invalid:e(o).database_name.$error},null,8,["modelValue","content-loading","invalid"])]),_:1},8,["label","error","content-loading"])]),q("div",ea,[a(de,{modelValue:g.value.database_overwrite,"onUpdate:modelValue":_[3]||(_[3]=I=>g.value.database_overwrite=I),label:m.$t("wizard.database.overwrite")},null,8,["modelValue","label"])]),ae(a(p,{"content-loading":i.isFetchingInitialData,type:"submit",class:"mt-4",loading:i.isSaving,disabled:i.isSaving},{left:c(I=>[i.isSaving?E("",!0):(S(),U(w,{key:0,name:"ArrowDownOnSquareIcon",class:W(I.class)},null,8,["class"]))]),default:c(()=>[L(" "+k(m.$t("wizard.save_cont")),1)]),_:1},8,["content-loading","loading","disabled"]),[[ne,!i.isFetchingInitialData]])],32)}}},ta={components:{Mysql:Ze,Pgsql:Qe,Sqlite:aa},emits:["next"],setup(i,{emit:D}){const C=M("mysql"),s=M(!1),{t:d}=A.useI18n(),{global:l}=window.i18n,u=me(),n=K(),g=z(()=>(n.currentDataBaseData.app_locale=l.locale.value,n.currentDataBaseData));async function r(o){let b={connection:o};const t=await n.fetchInstallationDatabase(b);t.data.success&&(g.value.database_connection=t.data.config.database_connection),o==="sqlite"?g.value.database_name=t.data.config.database_name:g.value.database_name=null}async function v(o){s.value=!0;try{let b=await n.addInstallationDatabase(o);if(s.value=!1,b.data.success){await n.addInstallationFinish(),D("next",3);let t={profile_language:l.locale.value};await n.addInstallationLanguage(t),u.showNotification({type:"success",message:d("wizard.success."+b.data.success)});return}else if(b.data.error){if(b.data.requirement){u.showNotification({type:"error",message:d("wizard.errors."+b.data.error,{version:b.data.requirement.minimum,name:o.value.database_connection})});return}u.showNotification({type:"error",message:d("wizard.errors."+b.data.error)})}else b.data.errors?u.showNotification({type:"error",message:b.data.errors[0]}):b.data.error_message&&u.showNotification({type:"error",message:b.data.error_message})}catch{u.showNotification({type:"error",message:d("validation.something_went_wrong")}),s.value=!1}finally{s.value=!1}}return{databaseData:g,database_connection:C,isSaving:s,getDatabaseConfig:r,next:v}}};function na(i,D,C,s,d,l){const u=h("BaseWizardStep");return S(),U(u,{title:i.$t("wizard.database.database"),description:i.$t("wizard.database.desc"),"step-container":"w-full p-8 mb-8 bg-white border border-gray-200 border-solid rounded md:w-full"},{default:c(()=>[(S(),U(ce(s.databaseData.database_connection),{"config-data":s.databaseData,"is-saving":s.isSaving,onOnChangeDriver:s.getDatabaseConfig,onSubmitData:s.next},null,40,["config-data","is-saving","onOnChangeDriver","onSubmitData"]))]),_:1},8,["title","description"])}const ia=ue(ta,[["render",na]]),oa={class:"w-full md:w-2/3"},la={class:"mt-4 mb-0 text-sm text-gray-600"},ra={class:"w-full text-gray-600 list-disc list-inside"},sa={class:"text-sm leading-8"},da={class:"text-sm leading-8"},ua={__name:"Step4VerifyDomain",emits:["next"],setup(i,{emit:D}){const C=D,s=Y({app_domain:window.location.origin.replace(/(^\w+:|^)\/\//,"")}),d=M(!1),{t:l}=A.useI18n(),u=ie("utils"),n=t=>u.checkValidDomainUrl(t),g=K(),r=me(),v={app_domain:{required:y.withMessage(l("validation.required"),B),isUrl:y.withMessage(l("validation.invalid_domain_url"),n)}},o=x(v,z(()=>s));async function b(){if(o.value.$touch(),o.value.$invalid)return!0;d.value=!0;try{await g.setInstallationDomain(s),await g.installationLogin(),C("next",4),d.value=!1}catch(t){console.error("Domain verification error:",t),r.showNotification({type:"error",message:l("wizard.verify_domain.failed")}),d.value=!1}}return(t,m)=>{const _=h("BaseInput"),V=h("BaseInputGroup"),$=h("BaseButton"),f=h("BaseWizardStep");return S(),U(f,{title:t.$t("wizard.verify_domain.title"),description:t.$t("wizard.verify_domain.desc")},{default:c(()=>[q("div",oa,[a(V,{label:t.$t("wizard.verify_domain.app_domain"),error:e(o).app_domain.$error&&e(o).app_domain.$errors[0].$message,required:""},{default:c(()=>[a(_,{modelValue:s.app_domain,"onUpdate:modelValue":m[0]||(m[0]=w=>s.app_domain=w),invalid:e(o).app_domain.$error,type:"text",onInput:m[1]||(m[1]=w=>e(o).app_domain.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["label","error"])]),q("p",la,k(t.$t("wizard.verify_domain.notes.notes")),1),q("ul",ra,[q("li",sa,[L(k(t.$t("wizard.verify_domain.notes.not_contain"))+" ",1),m[2]||(m[2]=q("b",{class:"inline-block px-1 bg-gray-100 rounded-sm"},"https://",-1)),L(" "+k(t.$t("wizard.verify_domain.notes.or"))+" ",1),m[3]||(m[3]=q("b",{class:"inline-block px-1 bg-gray-100 rounded-sm"},"http",-1)),L(" "+k(t.$t("wizard.verify_domain.notes.in_front")),1)]),q("li",da,[L(k(t.$t("wizard.verify_domain.notes.if_you"))+" ",1),m[4]||(m[4]=q("b",{class:"inline-block px-1 bg-gray-100"},"localhost:8080",-1))])]),a($,{loading:d.value,disabled:d.value,class:"mt-8",onClick:b},{default:c(()=>[L(k(t.$t("wizard.verify_domain.verify_now")),1)]),_:1},8,["loading","disabled"])]),_:1},8,["title","description"])}}},ma={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 md:mb-6"},ca={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 md:mb-6"},ga={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 md:mb-6"},fa={class:"grid grid-cols-1 gap-4 mb-6 md:grid-cols-2"},va={__name:"SmtpMailDriver",props:{isSaving:{type:Boolean,require:!0,default:!1},isFetchingInitialData:{type:Boolean,require:!0,default:!1}},emits:["submit-data","on-change-driver"],setup(i,{emit:D}){const C=D;let s=M(!1);const d=Y(["none","tls","ssl","starttls"]),{t:l}=A.useI18n(),u=X(),n=z(()=>u.smtpConfig),g=z(()=>s.value?"text":"password");n.value.mail_driver="smtp";const r=z(()=>({smtpConfig:{mail_driver:{required:y.withMessage(l("validation.required"),B)},mail_host:{required:y.withMessage(l("validation.required"),B)},mail_port:{required:y.withMessage(l("validation.required"),B),numeric:y.withMessage(l("validation.numbers_only"),oe)},mail_encryption:{required:y.withMessage(l("validation.required"),B)},from_mail:{required:y.withMessage(l("validation.required"),B),email:y.withMessage(l("validation.email_incorrect"),Q)},from_name:{required:y.withMessage(l("validation.required"),B)}}})),v=x(r,z(()=>u));async function o(){return v.value.$touch(),v.value.$invalid||C("submit-data",u.smtpConfig),!1}function b(){v.value.smtpConfig.mail_driver.$touch(),C("on-change-driver",u.smtpConfig.mail_driver)}return(t,m)=>{const _=h("BaseMultiselect"),V=h("BaseInputGroup"),$=h("BaseInput"),f=h("BaseIcon"),w=h("BaseButton");return S(),P("form",{onSubmit:j(o,["prevent"])},[q("div",ma,[a(V,{label:t.$t("wizard.mail.driver"),"content-loading":i.isFetchingInitialData,error:e(v).smtpConfig.mail_driver.$error&&e(v).smtpConfig.mail_driver.$errors[0].$message,required:""},{default:c(()=>[a(_,{modelValue:n.value.mail_driver,"onUpdate:modelValue":[m[0]||(m[0]=p=>n.value.mail_driver=p),b],options:e(u).mail_drivers,"can-deselect":!1,"content-loading":i.isFetchingInitialData,invalid:e(v).smtpConfig.mail_driver.$error},null,8,["modelValue","options","content-loading","invalid"])]),_:1},8,["label","content-loading","error"]),a(V,{label:t.$t("wizard.mail.host"),"content-loading":i.isFetchingInitialData,error:e(v).smtpConfig.mail_host.$error&&e(v).smtpConfig.mail_host.$errors[0].$message,required:""},{default:c(()=>[a($,{modelValue:n.value.mail_host,"onUpdate:modelValue":m[1]||(m[1]=p=>n.value.mail_host=p),modelModifiers:{trim:!0},invalid:e(v).smtpConfig.mail_host.$error,"content-loading":i.isFetchingInitialData,type:"text",name:"mail_host",onInput:m[2]||(m[2]=p=>e(v).smtpConfig.mail_host.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","content-loading","error"])]),q("div",ca,[a(V,{label:t.$t("wizard.mail.username"),"content-loading":i.isFetchingInitialData},{default:c(()=>[a($,{modelValue:n.value.mail_username,"onUpdate:modelValue":m[3]||(m[3]=p=>n.value.mail_username=p),modelModifiers:{trim:!0},"content-loading":i.isFetchingInitialData,type:"text",name:"db_name"},null,8,["modelValue","content-loading"])]),_:1},8,["label","content-loading"]),a(V,{label:t.$t("wizard.mail.password"),"content-loading":i.isFetchingInitialData},{default:c(()=>[a($,{modelValue:n.value.mail_password,"onUpdate:modelValue":m[5]||(m[5]=p=>n.value.mail_password=p),modelModifiers:{trim:!0},type:g.value,"content-loading":i.isFetchingInitialData,autocomplete:"off","data-lpignore":"true",name:"password"},{right:c(()=>[a(f,{name:e(s)?"EyeIcon":"EyeSlashIcon",class:"mr-1 text-gray-500 cursor-pointer",onClick:m[4]||(m[4]=p=>te(s)?s.value=!e(s):s=!e(s))},null,8,["name"])]),_:1},8,["modelValue","type","content-loading"])]),_:1},8,["label","content-loading"])]),q("div",ga,[a(V,{label:t.$t("wizard.mail.port"),error:e(v).smtpConfig.mail_port.$error&&e(v).smtpConfig.mail_port.$errors[0].$message,"content-loading":i.isFetchingInitialData,required:""},{default:c(()=>[a($,{modelValue:n.value.mail_port,"onUpdate:modelValue":m[6]||(m[6]=p=>n.value.mail_port=p),modelModifiers:{trim:!0},invalid:e(v).smtpConfig.mail_port.$error,"content-loading":i.isFetchingInitialData,type:"text",name:"mail_port",onInput:m[7]||(m[7]=p=>e(v).smtpConfig.mail_port.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","error","content-loading"]),a(V,{label:t.$t("wizard.mail.encryption"),error:e(v).smtpConfig.mail_encryption.$error&&e(v).smtpConfig.mail_encryption.$errors[0].$message,"content-loading":i.isFetchingInitialData,required:""},{default:c(()=>[a(_,{modelValue:n.value.mail_encryption,"onUpdate:modelValue":m[8]||(m[8]=p=>n.value.mail_encryption=p),modelModifiers:{trim:!0},options:d,"can-deselect":!1,invalid:e(v).smtpConfig.mail_encryption.$error,"content-loading":i.isFetchingInitialData,onInput:m[9]||(m[9]=p=>e(v).smtpConfig.mail_encryption.$touch())},null,8,["modelValue","options","invalid","content-loading"])]),_:1},8,["label","error","content-loading"])]),q("div",fa,[a(V,{label:t.$t("wizard.mail.from_mail"),error:e(v).smtpConfig.from_mail.$error&&e(v).smtpConfig.from_mail.$errors[0].$message,"content-loading":i.isFetchingInitialData,required:""},{default:c(()=>[a($,{modelValue:n.value.from_mail,"onUpdate:modelValue":m[10]||(m[10]=p=>n.value.from_mail=p),modelModifiers:{trim:!0},invalid:e(v).smtpConfig.from_mail.$error,"content-loading":i.isFetchingInitialData,type:"text",name:"from_mail",onInput:m[11]||(m[11]=p=>e(v).smtpConfig.from_mail.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","error","content-loading"]),a(V,{label:t.$t("wizard.mail.from_name"),error:e(v).smtpConfig.from_name.$error&&e(v).smtpConfig.from_name.$errors[0].$message,"content-loading":i.isFetchingInitialData,required:""},{default:c(()=>[a($,{modelValue:n.value.from_name,"onUpdate:modelValue":m[12]||(m[12]=p=>n.value.from_name=p),modelModifiers:{trim:!0},invalid:e(v).smtpConfig.from_name.$error,"content-loading":i.isFetchingInitialData,type:"text",name:"from_name",onInput:m[13]||(m[13]=p=>e(v).smtpConfig.from_name.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","error","content-loading"])]),a(w,{loading:i.isSaving,disabled:i.isSaving,"content-loading":i.isFetchingInitialData,class:"mt-4"},{left:c(p=>[i.isSaving?E("",!0):(S(),U(f,{key:0,name:"ArrowDownOnSquareIcon",class:W(p.class)},null,8,["class"]))]),default:c(()=>[L(" "+k(t.$t("general.save")),1)]),_:1},8,["loading","disabled","content-loading"])],32)}}},pa={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 lg:mb-6 md:mb-6"},_a={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 lg:mb-6 md:mb-6"},ba={class:"grid grid-cols-1 gap-4 mb-6 md:grid-cols-2"},$a={__name:"MailgunMailDriver",props:{isSaving:{type:Boolean,require:!0,default:!1},isFetchingInitialData:{type:Boolean,require:!0,default:!1}},emits:["submit-data","on-change-driver"],setup(i,{emit:D}){const C=D;let s=M(!1);const d=X(),{t:l}=A.useI18n(),u=z(()=>d.mailgunConfig),n=z(()=>s.value?"text":"password");u.value.mail_driver="mailgun";const g=z(()=>({mailgunConfig:{mail_driver:{required:y.withMessage(l("validation.required"),B)},mail_mailgun_domain:{required:y.withMessage(l("validation.required"),B)},mail_mailgun_endpoint:{required:y.withMessage(l("validation.required"),B)},mail_mailgun_secret:{required:y.withMessage(l("validation.required"),B)},from_mail:{required:y.withMessage(l("validation.required"),B),email:Q},from_name:{required:y.withMessage(l("validation.required"),B)}}})),r=x(g,z(()=>d));function v(){return r.value.$touch(),r.value.$invalid||C("submit-data",d.mailgunConfig),!1}function o(){r.value.mailgunConfig.mail_driver.$touch(),C("on-change-driver",d.mailgunConfig.mail_driver)}return(b,t)=>{const m=h("BaseMultiselect"),_=h("BaseInputGroup"),V=h("BaseInput"),$=h("BaseIcon"),f=h("BaseButton");return S(),P("form",{onSubmit:j(v,["prevent"])},[q("div",pa,[a(_,{label:b.$t("wizard.mail.driver"),"content-loading":i.isFetchingInitialData,error:e(r).mailgunConfig.mail_driver.$error&&e(r).mailgunConfig.mail_driver.$errors[0].$message,required:""},{default:c(()=>[a(m,{modelValue:u.value.mail_driver,"onUpdate:modelValue":[t[0]||(t[0]=w=>u.value.mail_driver=w),o],options:e(d).mail_drivers,"can-deselect":!1,invalid:e(r).mailgunConfig.mail_driver.$error,"content-loading":i.isFetchingInitialData},null,8,["modelValue","options","invalid","content-loading"])]),_:1},8,["label","content-loading","error"]),a(_,{label:b.$t("wizard.mail.mailgun_domain"),"content-loading":i.isFetchingInitialData,error:e(r).mailgunConfig.mail_mailgun_domain.$error&&e(r).mailgunConfig.mail_mailgun_domain.$errors[0].$message,required:""},{default:c(()=>[a(V,{modelValue:u.value.mail_mailgun_domain,"onUpdate:modelValue":t[1]||(t[1]=w=>u.value.mail_mailgun_domain=w),modelModifiers:{trim:!0},invalid:e(r).mailgunConfig.mail_mailgun_domain.$error,"content-loading":i.isFetchingInitialData,type:"text",name:"mailgun_domain",onInput:t[2]||(t[2]=w=>e(r).mailgunConfig.mail_mailgun_domain.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","content-loading","error"])]),q("div",_a,[a(_,{label:b.$t("wizard.mail.mailgun_secret"),"content-loading":i.isFetchingInitialData,error:e(r).mailgunConfig.mail_mailgun_secret.$error&&e(r).mailgunConfig.mail_mailgun_secret.$errors[0].$message,required:""},{default:c(()=>[a(V,{modelValue:u.value.mail_mailgun_secret,"onUpdate:modelValue":t[4]||(t[4]=w=>u.value.mail_mailgun_secret=w),modelModifiers:{trim:!0},invalid:e(r).mailgunConfig.mail_mailgun_secret.$error,type:n.value,"content-loading":i.isFetchingInitialData,name:"mailgun_secret",autocomplete:"off","data-lpignore":"true",onInput:t[5]||(t[5]=w=>e(r).mailgunConfig.mail_mailgun_secret.$touch())},{right:c(()=>[a($,{name:e(s)?"EyeIcon":"EyeSlashIcon",class:"mr-1 text-gray-500 cursor-pointer",onClick:t[3]||(t[3]=w=>te(s)?s.value=!e(s):s=!e(s))},null,8,["name"])]),_:1},8,["modelValue","invalid","type","content-loading"])]),_:1},8,["label","content-loading","error"]),a(_,{label:b.$t("wizard.mail.mailgun_endpoint"),"content-loading":i.isFetchingInitialData,error:e(r).mailgunConfig.mail_mailgun_endpoint.$error&&e(r).mailgunConfig.mail_mailgun_endpoint.$errors[0].$message,required:""},{default:c(()=>[a(V,{modelValue:u.value.mail_mailgun_endpoint,"onUpdate:modelValue":t[6]||(t[6]=w=>u.value.mail_mailgun_endpoint=w),modelModifiers:{trim:!0},invalid:e(r).mailgunConfig.mail_mailgun_endpoint.$error,"content-loading":i.isFetchingInitialData,type:"text",name:"mailgun_endpoint",onInput:t[7]||(t[7]=w=>e(r).mailgunConfig.mail_mailgun_endpoint.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","content-loading","error"])]),q("div",ba,[a(_,{label:b.$t("wizard.mail.from_mail"),"content-loading":i.isFetchingInitialData,error:e(r).mailgunConfig.from_mail.$error&&e(r).mailgunConfig.from_mail.$errors[0].$message,required:""},{default:c(()=>[a(V,{modelValue:u.value.from_mail,"onUpdate:modelValue":t[8]||(t[8]=w=>u.value.from_mail=w),modelModifiers:{trim:!0},name:"from_mail",type:"text",invalid:e(r).mailgunConfig.from_mail.$error,"content-loading":i.isFetchingInitialData,onInput:t[9]||(t[9]=w=>e(r).mailgunConfig.from_mail.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","content-loading","error"]),a(_,{label:b.$t("wizard.mail.from_name"),"content-loading":i.isFetchingInitialData,error:e(r).mailgunConfig.from_name.$error&&e(r).mailgunConfig.from_name.$errors[0].$message,required:""},{default:c(()=>[a(V,{modelValue:u.value.from_name,"onUpdate:modelValue":t[10]||(t[10]=w=>u.value.from_name=w),modelModifiers:{trim:!0},invalid:e(r).mailgunConfig.from_name.$error,"content-loading":i.isFetchingInitialData,type:"text",name:"from_name",onInput:t[11]||(t[11]=w=>e(r).mailgunConfig.from_name.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","content-loading","error"])]),a(f,{loading:b.loading,disabled:i.isSaving,"content-loading":i.isFetchingInitialData,class:"mt-4"},{left:c(w=>[i.isSaving?E("",!0):(S(),U($,{key:0,name:"ArrowDownOnSquareIcon",class:W(w.class)},null,8,["class"]))]),default:c(()=>[L(" "+k(b.$t("general.save")),1)]),_:1},8,["loading","disabled","content-loading"])],32)}}},wa={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 md:mb-6"},ha={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 md:mb-6"},ya={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 md:mb-6"},Ia={class:"grid grid-cols-1 gap-4 mb-6 md:grid-cols-2"},qa={__name:"SesMailDriver",props:{isSaving:{type:Boolean,require:!0,default:!1},isFetchingInitialData:{type:Boolean,require:!0,default:!1}},emits:["submit-data","on-change-driver"],setup(i,{emit:D}){const C=D,{t:s}=A.useI18n(),d=Y(["tls","ssl","starttls"]);let l=M(!1);const u=X(),n=z(()=>u.sesConfig);n.value.mail_driver="ses";const g=z(()=>({sesConfig:{mail_driver:{required:y.withMessage(s("validation.required"),B)},mail_host:{required:y.withMessage(s("validation.required"),B)},mail_port:{required:y.withMessage(s("validation.required"),B),numeric:oe},mail_ses_key:{required:y.withMessage(s("validation.required"),B)},mail_ses_secret:{required:y.withMessage(s("validation.required"),B)},mail_ses_region:{required:y.withMessage(s("validation.required"),B)},mail_encryption:{required:y.withMessage(s("validation.required"),B)},from_mail:{required:y.withMessage(s("validation.required"),B),email:y.withMessage(s("validation.email_incorrect"),Q)},from_name:{required:y.withMessage(s("validation.required"),B)}}})),r=x(g,z(()=>u));async function v(){return r.value.$touch(),r.value.$invalid||C("submit-data",u.sesConfig),!1}function o(){r.value.sesConfig.mail_driver.$touch(),C("on-change-driver",u.sesConfig.mail_driver)}return(b,t)=>{const m=h("BaseMultiselect"),_=h("BaseInputGroup"),V=h("BaseInput"),$=h("BaseIcon"),f=h("BaseButton");return S(),P("form",{onSubmit:j(v,["prevent"])},[q("div",wa,[a(_,{label:b.$t("wizard.mail.driver"),"content-loading":i.isFetchingInitialData,error:e(r).sesConfig.mail_driver.$error&&e(r).sesConfig.mail_driver.$errors[0].$message,required:""},{default:c(()=>[a(m,{modelValue:n.value.mail_driver,"onUpdate:modelValue":[t[0]||(t[0]=w=>n.value.mail_driver=w),o],options:e(u).mail_drivers,"can-deselect":!1,"content-loading":i.isFetchingInitialData,invalid:e(r).sesConfig.mail_driver.$error},null,8,["modelValue","options","content-loading","invalid"])]),_:1},8,["label","content-loading","error"]),a(_,{label:b.$t("wizard.mail.host"),"content-loading":i.isFetchingInitialData,error:e(r).sesConfig.mail_host.$error&&e(r).sesConfig.mail_host.$errors[0].$message,required:""},{default:c(()=>[a(V,{modelValue:n.value.mail_host,"onUpdate:modelValue":t[1]||(t[1]=w=>n.value.mail_host=w),modelModifiers:{trim:!0},invalid:e(r).sesConfig.mail_host.$error,"content-loading":i.isFetchingInitialData,type:"text",name:"mail_host",onInput:t[2]||(t[2]=w=>e(r).sesConfig.mail_host.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","content-loading","error"])]),q("div",ha,[a(_,{label:b.$t("wizard.mail.port"),"content-loading":i.isFetchingInitialData,error:e(r).sesConfig.mail_port.$error&&e(r).sesConfig.mail_port.$errors[0].$message,required:""},{default:c(()=>[a(V,{modelValue:n.value.mail_port,"onUpdate:modelValue":t[3]||(t[3]=w=>n.value.mail_port=w),modelModifiers:{trim:!0},invalid:e(r).sesConfig.mail_port.$error,"content-loading":i.isFetchingInitialData,type:"text",name:"mail_port",onInput:t[4]||(t[4]=w=>e(r).sesConfig.mail_port.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","content-loading","error"]),a(_,{label:b.$t("wizard.mail.encryption"),"content-loading":i.isFetchingInitialData,error:e(r).sesConfig.mail_encryption.$error&&e(r).sesConfig.mail_encryption.$errors[0].$message,required:""},{default:c(()=>[a(m,{modelValue:n.value.mail_encryption,"onUpdate:modelValue":t[5]||(t[5]=w=>n.value.mail_encryption=w),modelModifiers:{trim:!0},invalid:e(r).sesConfig.mail_encryption.$error,options:d,"content-loading":i.isFetchingInitialData,onInput:t[6]||(t[6]=w=>e(r).sesConfig.mail_encryption.$touch())},null,8,["modelValue","invalid","options","content-loading"])]),_:1},8,["label","content-loading","error"])]),q("div",ya,[a(_,{label:b.$t("wizard.mail.from_mail"),"content-loading":i.isFetchingInitialData,error:e(r).sesConfig.from_mail.$error&&e(r).sesConfig.from_mail.$errors[0].$message,required:""},{default:c(()=>[a(V,{modelValue:n.value.from_mail,"onUpdate:modelValue":t[7]||(t[7]=w=>n.value.from_mail=w),modelModifiers:{trim:!0},invalid:e(r).sesConfig.from_mail.$error,"content-loading":i.isFetchingInitialData,type:"text",name:"from_mail",onInput:t[8]||(t[8]=w=>e(r).sesConfig.from_mail.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","content-loading","error"]),a(_,{label:b.$t("wizard.mail.from_name"),"content-loading":i.isFetchingInitialData,error:e(r).sesConfig.from_name.$error&&e(r).sesConfig.from_name.$errors[0].$message,required:""},{default:c(()=>[a(V,{modelValue:n.value.from_name,"onUpdate:modelValue":t[9]||(t[9]=w=>n.value.from_name=w),modelModifiers:{trim:!0},invalid:e(r).sesConfig.from_name.$error,"content-loading":i.isFetchingInitialData,type:"text",name:"name",onInput:t[10]||(t[10]=w=>e(r).sesConfig.from_name.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","content-loading","error"])]),q("div",Ia,[a(_,{label:b.$t("wizard.mail.ses_key"),"content-loading":i.isFetchingInitialData,error:e(r).sesConfig.mail_ses_key.$error&&e(r).sesConfig.mail_ses_key.$errors[0].$message,required:""},{default:c(()=>[a(V,{modelValue:n.value.mail_ses_key,"onUpdate:modelValue":t[11]||(t[11]=w=>n.value.mail_ses_key=w),modelModifiers:{trim:!0},invalid:e(r).sesConfig.mail_ses_key.$error,"content-loading":i.isFetchingInitialData,type:"text",name:"mail_ses_key",onInput:t[12]||(t[12]=w=>e(r).sesConfig.mail_ses_key.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","content-loading","error"]),a(_,{label:b.$t("wizard.mail.ses_secret"),"content-loading":i.isFetchingInitialData,error:e(r).sesConfig.mail_ses_secret.$error&&e(r).sesConfig.mail_ses_secret.$errors[0].$message,required:""},{default:c(()=>[a(V,{modelValue:n.value.mail_ses_secret,"onUpdate:modelValue":t[14]||(t[14]=w=>n.value.mail_ses_secret=w),modelModifiers:{trim:!0},invalid:e(r).sesConfig.mail_ses_secret.$error,type:b.getInputType,"content-loading":i.isFetchingInitialData,name:"mail_ses_secret",autocomplete:"off","data-lpignore":"true",onInput:t[15]||(t[15]=w=>e(r).sesConfig.mail_ses_secret.$touch())},{right:c(()=>[a($,{name:e(l)?"EyeIcon":"EyeSlashIcon",class:"mr-1 text-gray-500 cursor-pointer",onClick:t[13]||(t[13]=w=>te(l)?l.value=!e(l):l=!e(l))},null,8,["name"])]),_:1},8,["modelValue","invalid","type","content-loading"])]),_:1},8,["label","content-loading","error"]),a(_,{label:b.$t("settings.mail.ses_region"),"content-loading":i.isFetchingInitialData,error:e(r).sesConfig.mail_ses_region.$error&&e(r).sesConfig.mail_ses_region.$errors[0].$message,required:""},{default:c(()=>[a(V,{modelValue:e(u).sesConfig.mail_ses_region,"onUpdate:modelValue":t[16]||(t[16]=w=>e(u).sesConfig.mail_ses_region=w),modelModifiers:{trim:!0},"content-loading":i.isFetchingInitialData,type:"text",name:"mail_ses_region",invalid:e(r).sesConfig.mail_ses_region.$error,onInput:t[17]||(t[17]=w=>e(r).sesConfig.mail_ses_region.$touch())},null,8,["modelValue","content-loading","invalid"])]),_:1},8,["label","content-loading","error"])]),a(f,{loading:i.isSaving,disabled:i.isSaving,"content-loading":i.isFetchingInitialData,class:"mt-4"},{left:c(w=>[i.isSaving?E("",!0):(S(),U($,{key:0,name:"ArrowDownOnSquareIcon",class:W(w.class)},null,8,["class"]))]),default:c(()=>[L(" "+k(b.$t("general.save")),1)]),_:1},8,["loading","disabled","content-loading"])],32)}}},Va={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 md:mb-6"},Ba={class:"grid grid-cols-1 gap-4 mb-6 md:grid-cols-2"},fe={__name:"BasicMailDriver",props:{isSaving:{type:Boolean,require:!0,default:!1},isFetchingInitialData:{type:Boolean,require:!0,default:!1}},emits:["submit-data","on-change-driver"],setup(i,{emit:D}){const C=D,{t:s}=A.useI18n(),d=X(),l=z(()=>d.basicMailConfig);z(()=>d.mail_drivers),l.value.mail_driver="mail";const u=z(()=>({basicMailConfig:{mail_driver:{required:y.withMessage(s("validation.required"),B)},from_mail:{required:y.withMessage(s("validation.required"),B),email:y.withMessage(s("validation.email_incorrect"),Q)},from_name:{required:y.withMessage(s("validation.required"),B)}}})),n=x(u,z(()=>d));function g(){return n.value.$touch(),n.value.$invalid||C("submit-data",d.basicMailConfig),!1}function r(){var v;n.value.basicMailConfig.mail_driver.$touch(),C("on-change-driver",(v=d==null?void 0:d.basicMailConfig)==null?void 0:v.mail_driver)}return(v,o)=>{const b=h("BaseMultiselect"),t=h("BaseInputGroup"),m=h("BaseInput"),_=h("BaseIcon"),V=h("BaseButton");return S(),P("form",{onSubmit:j(g,["prevent"])},[q("div",Va,[a(t,{label:v.$t("wizard.mail.driver"),"content-loading":i.isFetchingInitialData,error:e(n).basicMailConfig.mail_driver.$error&&e(n).basicMailConfig.mail_driver.$errors[0].$message,required:""},{default:c(()=>[a(b,{modelValue:l.value.mail_driver,"onUpdate:modelValue":[o[0]||(o[0]=$=>l.value.mail_driver=$),r],invalid:e(n).basicMailConfig.mail_driver.$error,options:e(d).mail_drivers,"can-deselect":!1,"content-loading":i.isFetchingInitialData},null,8,["modelValue","invalid","options","content-loading"])]),_:1},8,["label","content-loading","error"])]),q("div",Ba,[a(t,{label:v.$t("wizard.mail.from_name"),"content-loading":i.isFetchingInitialData,error:e(n).basicMailConfig.from_name.$error&&e(n).basicMailConfig.from_name.$errors[0].$message,required:""},{default:c(()=>[a(m,{modelValue:l.value.from_name,"onUpdate:modelValue":o[1]||(o[1]=$=>l.value.from_name=$),modelModifiers:{trim:!0},invalid:e(n).basicMailConfig.from_name.$error,"content-loading":i.isFetchingInitialData,type:"text",name:"name",onInput:o[2]||(o[2]=$=>e(n).basicMailConfig.from_name.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","content-loading","error"]),a(t,{label:v.$t("wizard.mail.from_mail"),"content-loading":i.isFetchingInitialData,error:e(n).basicMailConfig.from_mail.$error&&e(n).basicMailConfig.from_mail.$errors[0].$message,required:""},{default:c(()=>[a(m,{modelValue:l.value.from_mail,"onUpdate:modelValue":o[3]||(o[3]=$=>l.value.from_mail=$),modelModifiers:{trim:!0},invalid:e(n).basicMailConfig.from_mail.$error,"content-loading":i.isFetchingInitialData,type:"text",onInput:o[4]||(o[4]=$=>e(n).basicMailConfig.from_mail.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","content-loading","error"])]),a(V,{loading:i.isSaving,disabled:i.isSaving,"content-loading":i.isFetchingInitialData,class:"mt-4"},{left:c($=>[i.isSaving?E("",!0):(S(),U(_,{key:0,name:"ArrowDownOnSquareIcon",class:W($.class)},null,8,["class"]))]),default:c(()=>[L(" "+k(v.$t("general.save")),1)]),_:1},8,["loading","disabled","content-loading"])],32)}}},Ca={components:{Smtp:va,Mailgun:$a,Ses:qa,sendmail:fe,Mail:fe},emits:["next"],setup(i,{emit:D}){const C=M(!1),s=M(!1),d=X();d.mail_driver="mail",u();function l(g){d.mail_driver=g}async function u(){s.value=!0,await d.fetchMailDrivers(),s.value=!1}async function n(g){C.value=!0;let r=await d.updateMailConfig(g);C.value=!1,r.data.success&&await D("next",5)}return{mailDriverStore:d,isSaving:C,isFetchingInitialData:s,changeDriver:l,next:n}}};function Da(i,D,C,s,d,l){const u=h("BaseWizardStep");return S(),U(u,{title:i.$t("wizard.mail.mail_config"),description:i.$t("wizard.mail.mail_config_desc")},{default:c(()=>[q("form",{action:"",onSubmit:D[1]||(D[1]=j((...n)=>s.next&&s.next(...n),["prevent"]))},[(S(),U(ce(s.mailDriverStore.mail_driver),{"config-data":s.mailDriverStore.mailConfigData,"is-saving":s.isSaving,"is-fetching-initial-data":s.isFetchingInitialData,onOnChangeDriver:D[0]||(D[0]=n=>s.changeDriver(n)),onSubmitData:s.next},null,40,["config-data","is-saving","is-fetching-initial-data","onSubmitData"]))],32)]),_:1},8,["title","description"])}const Sa=ue(Ca,[["render",Da]]),Fa={class:"grid grid-cols-1 mb-4 md:grid-cols-2 md:mb-6"},Ma={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 md:mb-6"},za={class:"grid grid-cols-1 gap-4 mb-6 md:grid-cols-2"},ka={__name:"Step6AccountSettings",emits:["next"],setup(i,{emit:D}){const C=D;let s=M(!1);const d=M(!1),l=M(!1);let u=M(""),n=M(null);const g=pe(),r=ee(),{t:v}=A.useI18n(),o=z(()=>g.userForm),b=z(()=>({userForm:{name:{required:y.withMessage(v("validation.required"),B)},email:{required:y.withMessage(v("validation.required"),B),email:y.withMessage(v("validation.email_incorrect"),Q)},password:{required:y.withMessage(v("validation.required"),B),minLength:y.withMessage(v("validation.password_min_length",{count:8}),ye(8))},confirm_password:{required:y.withMessage(v("validation.required"),he(g.userForm.password)),sameAsPassword:y.withMessage(v("validation.password_incorrect"),we(g.userForm.password))}}})),t=x(b,z(()=>g));function m($,f){n.value=f}function _(){n.value=null}async function V(){if(t.value.userForm.$touch(),t.value.userForm.$invalid)return!0;s.value=!0;let $=await g.updateCurrentUser(o.value);if(s.value=!1,$.data.data){if(n.value){let w=new FormData;w.append("admin_avatar",n.value),await g.uploadAvatar(w)}const f=$.data.data.companies[0];await r.setSelectedCompany(f),C("next",6)}}return($,f)=>{const w=h("BaseFileUploader"),p=h("BaseInputGroup"),I=h("BaseInput"),N=h("BaseIcon"),R=h("BaseButton"),H=h("BaseWizardStep");return S(),U(H,{title:$.$t("wizard.account_info"),description:$.$t("wizard.account_info_desc")},{default:c(()=>[q("form",{action:"",onSubmit:j(V,["prevent"])},[q("div",Fa,[a(p,{label:$.$t("settings.account_settings.profile_picture")},{default:c(()=>[a(w,{avatar:!0,"preview-image":e(u),onChange:m,onRemove:_},null,8,["preview-image"])]),_:1},8,["label"])]),q("div",Ma,[a(p,{label:$.$t("wizard.name"),error:e(t).userForm.name.$error&&e(t).userForm.name.$errors[0].$message,required:""},{default:c(()=>[a(I,{modelValue:o.value.name,"onUpdate:modelValue":f[0]||(f[0]=O=>o.value.name=O),modelModifiers:{trim:!0},invalid:e(t).userForm.name.$error,type:"text",name:"name",onInput:f[1]||(f[1]=O=>e(t).userForm.name.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["label","error"]),a(p,{label:$.$t("wizard.email"),error:e(t).userForm.email.$error&&e(t).userForm.email.$errors[0].$message,required:""},{default:c(()=>[a(I,{modelValue:o.value.email,"onUpdate:modelValue":f[2]||(f[2]=O=>o.value.email=O),modelModifiers:{trim:!0},invalid:e(t).userForm.email.$error,type:"text",name:"email",onInput:f[3]||(f[3]=O=>e(t).userForm.email.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["label","error"])]),q("div",za,[a(p,{label:$.$t("wizard.password"),error:e(t).userForm.password.$error&&e(t).userForm.password.$errors[0].$message,required:""},{default:c(()=>[a(I,{modelValue:o.value.password,"onUpdate:modelValue":f[5]||(f[5]=O=>o.value.password=O),modelModifiers:{trim:!0},invalid:e(t).userForm.password.$error,type:d.value?"text":"password",name:"password",onInput:f[6]||(f[6]=O=>e(t).userForm.password.$touch())},{right:c(()=>[a(N,{name:d.value?"EyeIcon":"EyeSlashIcon",class:"mr-1 text-gray-500 cursor-pointer",onClick:f[4]||(f[4]=O=>d.value=!d.value)},null,8,["name"])]),_:1},8,["modelValue","invalid","type"])]),_:1},8,["label","error"]),a(p,{label:$.$t("wizard.confirm_password"),error:e(t).userForm.confirm_password.$error&&e(t).userForm.confirm_password.$errors[0].$message,required:""},{default:c(()=>[a(I,{modelValue:o.value.confirm_password,"onUpdate:modelValue":f[8]||(f[8]=O=>o.value.confirm_password=O),modelModifiers:{trim:!0},invalid:e(t).userForm.confirm_password.$error,type:l.value?"text":"password",name:"confirm_password",onInput:f[9]||(f[9]=O=>e(t).userForm.confirm_password.$touch())},{right:c(()=>[a(N,{name:l.value?"EyeIcon":"EyeSlashIcon",class:"mr-1 text-gray-500 cursor-pointer",onClick:f[7]||(f[7]=O=>l.value=!l.value)},null,8,["name"])]),_:1},8,["modelValue","invalid","type"])]),_:1},8,["label","error"])]),a(R,{loading:e(s),disabled:e(s),class:"mt-4"},{left:c(O=>[e(s)?E("",!0):(S(),U(N,{key:0,name:"ArrowDownOnSquareIcon",class:W(O.class)},null,8,["class"]))]),default:c(()=>[L(" "+k($.$t("wizard.save_cont")),1)]),_:1},8,["loading","disabled"])],32)]),_:1},8,["title","description"])}}},Ua={class:"grid grid-cols-1 mb-4 md:grid-cols-2 md:mb-6"},Pa={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 md:mb-6"},La={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 md:mb-6"},Oa={class:"grid grid-cols-1 gap-4 mb-6 md:grid-cols-2"},Na={__name:"Step7CompanyInfo",emits:["next"],setup(i,{emit:D}){const C=D;let s=M(!1),d=M(!1);const{t:l}=A.useI18n();let u=M(null),n=M(null),g=M(null);const r=Y({name:null,tax_id:null,vat_id:null,address:{address_street_1:"",address_street_2:"",website:"",country_id:null,state:"",city:"",phone:"",zip:""}}),v=ee(),o=_e();J(async()=>{var $;s.value=!0,await o.fetchCountries(),s.value=!1,r.address.country_id=($=o.countries.find(f=>f.code=="US"))==null?void 0:$.id});const b={companyForm:{name:{required:y.withMessage(l("validation.required"),B)},address:{country_id:{required:y.withMessage(l("validation.required"),B)},address_street_1:{maxLength:y.withMessage(l("validation.address_maxlength",{count:255}),ge(255))},address_street_2:{maxLength:y.withMessage(l("validation.address_maxlength",{count:255}),ge(255))}}}},t=x(b,{companyForm:r});function m($,f,w,p){g.value=p.name,n.value=f}function _(){n.value=null}async function V(){if(t.value.companyForm.$touch(),t.value.$invalid)return!0;if(d.value=!0,v.updateCompany(r)){if(n.value){let f=new FormData;f.append("company_logo",JSON.stringify({name:g.value,data:n.value})),await v.updateCompanyLogo(f)}d.value=!1,C("next",7)}}return($,f)=>{const w=h("BaseFileUploader"),p=h("BaseInputGroup"),I=h("BaseInput"),N=h("BaseMultiselect"),R=h("BaseTextarea"),H=h("BaseIcon"),O=h("BaseButton"),le=h("BaseWizardStep");return S(),U(le,{title:$.$t("wizard.company_info"),description:$.$t("wizard.company_info_desc"),"step-container":"bg-white border border-gray-200 border-solid mb-8 md:w-full p-8 rounded w-full"},{default:c(()=>[q("form",{action:"",onSubmit:j(V,["prevent"])},[q("div",Ua,[a(p,{label:$.$t("settings.company_info.company_logo")},{default:c(()=>[a(w,{base64:"","preview-image":e(u),onChange:m,onRemove:_},null,8,["preview-image"])]),_:1},8,["label"])]),q("div",Pa,[a(p,{label:$.$t("wizard.company_name"),error:e(t).companyForm.name.$error&&e(t).companyForm.name.$errors[0].$message,required:""},{default:c(()=>[a(I,{modelValue:r.name,"onUpdate:modelValue":f[0]||(f[0]=F=>r.name=F),modelModifiers:{trim:!0},invalid:e(t).companyForm.name.$error,type:"text",name:"name",onInput:f[1]||(f[1]=F=>e(t).companyForm.name.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["label","error"]),a(p,{label:$.$t("wizard.country"),error:e(t).companyForm.address.country_id.$error&&e(t).companyForm.address.country_id.$errors[0].$message,"content-loading":e(s),required:""},{default:c(()=>[a(N,{modelValue:r.address.country_id,"onUpdate:modelValue":f[2]||(f[2]=F=>r.address.country_id=F),label:"name",invalid:e(t).companyForm.address.country_id.$error,options:e(o).countries,"value-prop":"id","can-deselect":!1,"can-clear":!1,"content-loading":e(s),placeholder:$.$t("general.select_country"),searchable:"","track-by":"name"},null,8,["modelValue","invalid","options","content-loading","placeholder"])]),_:1},8,["label","error","content-loading"])]),q("div",La,[a(p,{label:$.$t("wizard.state")},{default:c(()=>[a(I,{modelValue:r.address.state,"onUpdate:modelValue":f[3]||(f[3]=F=>r.address.state=F),name:"state",type:"text"},null,8,["modelValue"])]),_:1},8,["label"]),a(p,{label:$.$t("wizard.city")},{default:c(()=>[a(I,{modelValue:r.address.city,"onUpdate:modelValue":f[4]||(f[4]=F=>r.address.city=F),name:"city",type:"text"},null,8,["modelValue"])]),_:1},8,["label"])]),q("div",Oa,[q("div",null,[a(p,{label:$.$t("wizard.address"),error:e(t).companyForm.address.address_street_1.$error&&e(t).companyForm.address.address_street_1.$errors[0].$message},{default:c(()=>[a(R,{modelValue:r.address.address_street_1,"onUpdate:modelValue":f[5]||(f[5]=F=>r.address.address_street_1=F),modelModifiers:{trim:!0},invalid:e(t).companyForm.address.address_street_1.$error,placeholder:$.$t("general.street_1"),name:"billing_street1",rows:"2",onInput:f[6]||(f[6]=F=>e(t).companyForm.address.address_street_1.$touch())},null,8,["modelValue","invalid","placeholder"])]),_:1},8,["label","error"]),a(p,{error:e(t).companyForm.address.address_street_2.$error&&e(t).companyForm.address.address_street_2.$errors[0].$message,class:"mt-1 lg:mt-2 md:mt-2"},{default:c(()=>[a(R,{modelValue:r.address.address_street_2,"onUpdate:modelValue":f[7]||(f[7]=F=>r.address.address_street_2=F),invalid:e(t).companyForm.address.address_street_2.$error,placeholder:$.$t("general.street_2"),name:"billing_street2",rows:"2",onInput:f[8]||(f[8]=F=>e(t).companyForm.address.address_street_2.$touch())},null,8,["modelValue","invalid","placeholder"])]),_:1},8,["error"])]),q("div",null,[a(p,{label:$.$t("wizard.zip_code")},{default:c(()=>[a(I,{modelValue:r.address.zip,"onUpdate:modelValue":f[9]||(f[9]=F=>r.address.zip=F),modelModifiers:{trim:!0},type:"text",name:"zip"},null,8,["modelValue"])]),_:1},8,["label"]),a(p,{label:$.$t("wizard.phone"),class:"mt-4"},{default:c(()=>[a(I,{modelValue:r.address.phone,"onUpdate:modelValue":f[10]||(f[10]=F=>r.address.phone=F),modelModifiers:{trim:!0},type:"text",name:"phone"},null,8,["modelValue"])]),_:1},8,["label"])]),a(p,{label:$.$t("settings.company_info.tax_id")},{default:c(()=>[a(I,{modelValue:r.tax_id,"onUpdate:modelValue":f[11]||(f[11]=F=>r.tax_id=F),modelModifiers:{trim:!0},type:"text",name:"tax_id"},null,8,["modelValue"])]),_:1},8,["label"]),a(p,{label:$.$t("settings.company_info.vat_id")},{default:c(()=>[a(I,{modelValue:r.vat_id,"onUpdate:modelValue":f[12]||(f[12]=F=>r.vat_id=F),modelModifiers:{trim:!0},type:"text",name:"vat_id"},null,8,["modelValue"])]),_:1},8,["label"])]),a(O,{loading:e(d),disabled:e(d),class:"mt-4"},{left:c(F=>[e(d)?E("",!0):(S(),U(H,{key:0,name:"ArrowDownOnSquareIcon",class:W(F.class)},null,8,["class"]))]),default:c(()=>[L(" "+k($.$t("wizard.save_cont")),1)]),_:1},8,["loading","disabled"])],32)]),_:1},8,["title","description"])}}},Ga={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 md:mb-6"},Ea={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 md:mb-6"},Wa={class:"grid grid-cols-1 gap-4 mb-6 md:grid-cols-2"},Aa={__name:"Step8CompanyPreferences",emits:["next"],setup(i,{emit:D}){const C=D,s=M(!1);let d=M(!1),l=Y({currency:1,language:"en",carbon_date_format:"d M Y",time_zone:"UTC",fiscal_year:"1-12"});const{tm:u,t:n}=A.useI18n(),g=be();d.value=!0;const r=z(()=>o.fiscalYears.map(p=>Object.assign({},p,{key:n(p.key)})));Y([{title:u("settings.customization.invoices.allow"),value:"allow"},{title:u("settings.customization.invoices.disable_on_invoice_partial_paid"),value:"disable_on_invoice_partial_paid"},{title:u("settings.customization.invoices.disable_on_invoice_paid"),value:"disable_on_invoice_paid"},{title:u("settings.customization.invoices.disable_on_invoice_sent"),value:"disable_on_invoice_sent"}]);const v=ve(),o=_e(),b=ee(),t=pe(),m=me();let _={key:"fiscal_years"},V={key:"languages"};d.value=!0,Promise.all([o.fetchCurrencies(),o.fetchDateFormats(),o.fetchTimeZones(),o.fetchCountries(),o.fetchConfig(_),o.fetchConfig(V)]).then(([p])=>{d.value=!1});const $=z(()=>({currentPreferences:{currency:{required:y.withMessage(n("validation.required"),B)},language:{required:y.withMessage(n("validation.required"),B)},carbon_date_format:{required:y.withMessage(n("validation.required"),B)},time_zone:{required:y.withMessage(n("validation.required"),B)},fiscal_year:{required:y.withMessage(n("validation.required"),B)}}})),f=x($,{currentPreferences:l});async function w(){if(f.value.currentPreferences.$touch(),f.value.$invalid)return!0;v.openDialog({title:n("general.do_you_wish_to_continue"),message:n("wizard.currency_set_alert"),yesLabel:n("general.ok"),noLabel:n("general.cancel"),variant:"danger",size:"lg",hideNoButton:!1}).then(async p=>{if(p){let I={settings:{...l}};s.value=!0,delete I.settings.discount_per_item;let N=await b.updateCompanySettings({data:I});if(N.data){N.data.token&&Ie.set("auth.token",N.data.token),s.value=!1;let R={settings:{language:l.language}};(await t.updateUserSettings(R)).data&&(C("next","COMPLETED"),m.showNotification({type:"success",message:"Login Successful"}),g.push("/admin/dashboard"))}return!0}return s.value=!1,!0})}return(p,I)=>{const N=h("BaseMultiselect"),R=h("BaseInputGroup"),H=h("BaseIcon"),O=h("BaseButton"),le=h("BaseWizardStep");return S(),U(le,{title:p.$t("wizard.preferences"),description:p.$t("wizard.preferences_desc"),"step-container":"bg-white border border-gray-200 border-solid mb-8 md:w-full p-8 rounded w-full"},{default:c(()=>[q("form",{action:"",onSubmit:j(w,["prevent"])},[q("div",null,[q("div",Ga,[a(R,{label:p.$t("wizard.currency"),error:e(f).currentPreferences.currency.$error&&e(f).currentPreferences.currency.$errors[0].$message,"content-loading":e(d),required:""},{default:c(()=>[a(N,{modelValue:e(l).currency,"onUpdate:modelValue":I[0]||(I[0]=F=>e(l).currency=F),"content-loading":e(d),options:e(o).currencies,label:"name","value-prop":"id",searchable:!0,"track-by":"name",placeholder:p.$t("settings.currencies.select_currency"),invalid:e(f).currentPreferences.currency.$error,class:"w-full"},null,8,["modelValue","content-loading","options","placeholder","invalid"])]),_:1},8,["label","error","content-loading"]),a(R,{label:p.$t("settings.preferences.default_language"),error:e(f).currentPreferences.language.$error&&e(f).currentPreferences.language.$errors[0].$message,"content-loading":e(d),required:""},{default:c(()=>[a(N,{modelValue:e(l).language,"onUpdate:modelValue":I[1]||(I[1]=F=>e(l).language=F),"content-loading":e(d),options:e(o).languages,label:"name","value-prop":"code",placeholder:p.$t("settings.preferences.select_language"),class:"w-full","track-by":"name",searchable:!0,invalid:e(f).currentPreferences.language.$error},null,8,["modelValue","content-loading","options","placeholder","invalid"])]),_:1},8,["label","error","content-loading"])]),q("div",Ea,[a(R,{label:p.$t("wizard.date_format"),error:e(f).currentPreferences.carbon_date_format.$error&&e(f).currentPreferences.carbon_date_format.$errors[0].$message,"content-loading":e(d),required:""},{default:c(()=>[a(N,{modelValue:e(l).carbon_date_format,"onUpdate:modelValue":I[2]||(I[2]=F=>e(l).carbon_date_format=F),"content-loading":e(d),options:e(o).dateFormats,label:"display_date","value-prop":"carbon_format_value",placeholder:p.$t("settings.preferences.select_date_format"),"track-by":"display_date",searchable:"",invalid:e(f).currentPreferences.carbon_date_format.$error,class:"w-full"},null,8,["modelValue","content-loading","options","placeholder","invalid"])]),_:1},8,["label","error","content-loading"]),a(R,{label:p.$t("wizard.time_zone"),error:e(f).currentPreferences.time_zone.$error&&e(f).currentPreferences.time_zone.$errors[0].$message,"content-loading":e(d),required:""},{default:c(()=>[a(N,{modelValue:e(l).time_zone,"onUpdate:modelValue":I[3]||(I[3]=F=>e(l).time_zone=F),"content-loading":e(d),options:e(o).timeZones,label:"key","value-prop":"value",placeholder:p.$t("settings.preferences.select_time_zone"),"track-by":"key",searchable:!0,invalid:e(f).currentPreferences.time_zone.$error},null,8,["modelValue","content-loading","options","placeholder","invalid"])]),_:1},8,["label","error","content-loading"])]),q("div",Wa,[a(R,{label:p.$t("wizard.fiscal_year"),error:e(f).currentPreferences.fiscal_year.$error&&e(f).currentPreferences.fiscal_year.$errors[0].$message,"content-loading":e(d),required:""},{default:c(()=>[a(N,{modelValue:e(l).fiscal_year,"onUpdate:modelValue":I[4]||(I[4]=F=>e(l).fiscal_year=F),"content-loading":e(d),options:r.value,label:"key","value-prop":"value",placeholder:p.$t("settings.preferences.select_financial_year"),invalid:e(f).currentPreferences.fiscal_year.$error,"track-by":"key",searchable:!0,class:"w-full"},null,8,["modelValue","content-loading","options","placeholder","invalid"])]),_:1},8,["label","error","content-loading"])]),a(O,{loading:s.value,disabled:s.value,"content-loading":e(d),class:"mt-4"},{left:c(F=>[a(H,{name:"ArrowDownOnSquareIcon",class:W(F.class)},null,8,["class"])]),default:c(()=>[L(" "+k(p.$t("wizard.save_cont")),1)]),_:1},8,["loading","disabled","content-loading"])])],32)]),_:1},8,["title","description"])}}},Ra={components:{step_0:Be,step_1:Ge,step_2:je,step_3:ia,step_4:ua,step_5:Sa,step_6:ka,step_7:Na,step_8:Aa},setup(){let i=M("step_0"),D=M(0);const C=be(),s=K(),{global:d}=window.i18n;l();async function l(){let v=await s.fetchInstallationStep();if(v.data.profile_complete==="COMPLETED"){C.push("/admin/dashboard");return}typeof v.data.profile_language=="string"&&(d.locale.value=v.data.profile_language);let o=parseInt(v.data.profile_complete);o&&(D.value=o+1,i.value=`step_${o+1}`)}async function u(v){var b,t;let o={profile_complete:v};try{return await s.addInstallationStep(o),!0}catch(m){return((t=(b=m==null?void 0:m.response)==null?void 0:b.data)==null?void 0:t.message)==="The MAC is invalid."&&window.location.reload(),!1}}async function n(v){if(v&&!await u(v))return!1;D.value++,D.value<=9&&(i.value="step_"+D.value)}function g(v){}function r(){return new URL("/build/assets/logo-BG0V948L.png",import.meta.url)}return{stepComponent:i,currentStepNumber:D,onStepChange:n,saveStepProgress:u,onNavClick:g,getTickImage:r}}},Ta={class:"flex flex-col items-center justify-between w-full pt-10"},xa=["src"];function ja(i,D,C,s,d,l){const u=h("BaseWizard");return S(),P("div",Ta,[q("img",{id:"logo-facturino",src:s.getTickImage(),alt:"Facturino Logo",class:"h-12 mb-5 md:mb-10"},null,8,xa),a(u,{steps:9,"current-step":s.currentStepNumber,onClick:s.onNavClick},{default:c(()=>[(S(),U(ce(s.stepComponent),{onNext:s.onStepChange},null,40,["onNext"]))]),_:1},8,["current-step","onClick"])])}const Za=ue(Ra,[["render",ja]]);export{Za as default};
