import{a0 as p,c as l,b as t,L as g,t as n,m as y,ag as u,ah as c,aP as b,a1 as x,Q as f,R as h,o as i,M as k}from"./main-DpDYmbyp.js";const v={name:"PartnerPayouts",data(){return{bankDetails:{account_holder:"",bank_name:"",account_number:"",bank_code:""},bankDetailsForm:{account_holder:"",bank_name:"",account_number:"",bank_code:""},editingBankDetails:!1,savingBankDetails:!1,payoutSummary:{totalPaid:0,pending:0,thisMonth:0,nextPayout:0,nextPayoutDate:null},payouts:[],statusFilter:"",pagination:{currentPage:1,perPage:20,total:0,lastPage:1,from:0,to:0},loading:!1}},mounted(){this.fetchBankDetails(),this.fetchPayouts()},methods:{async fetchBankDetails(){try{const a=await axios.get("/partner/bank-details");this.bankDetails=a.data}catch(a){console.error("Failed to fetch bank details:",a)}},async saveBankDetails(){this.savingBankDetails=!0;try{const a=await axios.post("/partner/bank-details",this.bankDetailsForm);this.bankDetails=a.data,this.editingBankDetails=!1}catch(a){console.error("Failed to save bank details:",a),alert("Failed to save bank details. Please try again.")}finally{this.savingBankDetails=!1}},cancelEditBankDetails(){this.bankDetailsForm={...this.bankDetails},this.editingBankDetails=!1},async fetchPayouts(){this.loading=!0;try{const a={page:this.pagination.currentPage,per_page:this.pagination.perPage,status:this.statusFilter||void 0},e=await axios.get("/partner/payouts",{params:a});this.payouts=e.data.data,this.payoutSummary=e.data.summary,this.pagination={currentPage:e.data.current_page,perPage:e.data.per_page,total:e.data.total,lastPage:e.data.last_page,from:e.data.from,to:e.data.to}}catch(a){console.error("Failed to fetch payouts:",a)}finally{this.loading=!1}},goToPage(a){a<1||a>this.pagination.lastPage||(this.pagination.currentPage=a,this.fetchPayouts())},async downloadReceipt(a){try{const e=await axios.get(`/partner/payouts/${a}/receipt`,{responseType:"blob"}),m=window.URL.createObjectURL(new Blob([e.data])),d=document.createElement("a");d.href=m,d.setAttribute("download",`payout-receipt-${a}.pdf`),document.body.appendChild(d),d.click(),d.remove()}catch(e){console.error("Failed to download receipt:",e),alert("Failed to download receipt. Please try again.")}},formatCurrency(a){return new Intl.NumberFormat("en-US",{style:"currency",currency:"EUR"}).format(a||0)},formatDate(a){return a?new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"-"},formatPaymentMethod(a){return{bank_transfer:"Bank Transfer",paypal:"PayPal",stripe:"Stripe",manual:"Manual"}[a]||a||"-"},formatStatus(a){return{pending:"Pending",processing:"Processing",completed:"Completed",failed:"Failed",cancelled:"Cancelled"}[a]||a},getStatusBadgeClass(a){return{pending:"bg-yellow-100 text-yellow-800",processing:"bg-blue-100 text-blue-800",completed:"bg-green-100 text-green-800",failed:"bg-red-100 text-red-800",cancelled:"bg-gray-100 text-gray-800"}[a]||"bg-gray-100 text-gray-800"}}},w={class:"payouts-page"},P={class:"bg-white rounded-lg shadow p-6 mb-8"},_={class:"flex items-center justify-between mb-4"},D={key:0,class:"grid grid-cols-1 md:grid-cols-2 gap-4"},B={class:"text-gray-900"},F={class:"text-gray-900"},C={class:"text-gray-900"},S={class:"text-gray-900"},N={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},M={class:"flex gap-3"},A=["disabled"],T={class:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8"},U={class:"bg-white rounded-lg shadow p-6"},V={class:"text-3xl font-bold text-green-600"},R={class:"bg-white rounded-lg shadow p-6"},E={class:"text-3xl font-bold text-yellow-600"},I={class:"bg-white rounded-lg shadow p-6"},L={class:"text-3xl font-bold text-blue-600"},j={class:"bg-white rounded-lg shadow p-6"},H={class:"text-3xl font-bold text-purple-600"},q={class:"text-xs text-gray-500 mt-1"},O={class:"bg-white rounded-lg shadow"},W={class:"px-6 py-4 border-b border-gray-200 flex items-center justify-between"},z={class:"overflow-x-auto"},Q={class:"min-w-full divide-y divide-gray-200"},G={class:"bg-white divide-y divide-gray-200"},J={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},K={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-600"},X={class:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-gray-900"},Y={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-600"},Z={class:"px-6 py-4 whitespace-nowrap"},$={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-600"},tt={class:"px-6 py-4 whitespace-nowrap text-sm"},et=["onClick"],st={key:0,class:"px-6 py-12 text-center"},at={class:"mt-1 text-sm text-gray-500"},ot={key:1,class:"px-6 py-4 border-t border-gray-200 flex items-center justify-between"},nt={class:"text-sm text-gray-700"},rt={class:"flex gap-2"},lt=["disabled"],it=["disabled"];function dt(a,e,m,d,s,r){return i(),l("div",w,[e[32]||(e[32]=t("div",{class:"mb-8"},[t("h1",{class:"text-3xl font-bold text-gray-900 mb-2"},"Payout Management"),t("p",{class:"text-gray-600"},"View payout history and manage bank account settings")],-1)),t("div",P,[t("div",_,[e[11]||(e[11]=t("h3",{class:"text-lg font-semibold text-gray-900"},"Bank Account Details",-1)),s.editingBankDetails?g("",!0):(i(),l("button",{key:0,onClick:e[0]||(e[0]=o=>s.editingBankDetails=!0),class:"px-4 py-2 text-blue-600 hover:bg-blue-50 rounded-lg transition"}," Edit "))]),s.editingBankDetails?(i(),l("form",{key:1,onSubmit:e[6]||(e[6]=y((...o)=>r.saveBankDetails&&r.saveBankDetails(...o),["prevent"])),class:"space-y-4"},[t("div",N,[t("div",null,[e[16]||(e[16]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Account Holder Name *",-1)),u(t("input",{"onUpdate:modelValue":e[1]||(e[1]=o=>s.bankDetailsForm.account_holder=o),type:"text",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[c,s.bankDetailsForm.account_holder]])]),t("div",null,[e[17]||(e[17]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Bank Name *",-1)),u(t("input",{"onUpdate:modelValue":e[2]||(e[2]=o=>s.bankDetailsForm.bank_name=o),type:"text",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[c,s.bankDetailsForm.bank_name]])]),t("div",null,[e[18]||(e[18]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Account Number / IBAN *",-1)),u(t("input",{"onUpdate:modelValue":e[3]||(e[3]=o=>s.bankDetailsForm.account_number=o),type:"text",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[c,s.bankDetailsForm.account_number]])]),t("div",null,[e[19]||(e[19]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Bank Code / SWIFT",-1)),u(t("input",{"onUpdate:modelValue":e[4]||(e[4]=o=>s.bankDetailsForm.bank_code=o),type:"text",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[c,s.bankDetailsForm.bank_code]])])]),t("div",M,[t("button",{type:"submit",disabled:s.savingBankDetails,class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition"},n(s.savingBankDetails?"Saving...":"Save Changes"),9,A),t("button",{type:"button",onClick:e[5]||(e[5]=(...o)=>r.cancelEditBankDetails&&r.cancelEditBankDetails(...o)),class:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition"}," Cancel ")])],32)):(i(),l("div",D,[t("div",null,[e[12]||(e[12]=t("label",{class:"block text-sm font-medium text-gray-600 mb-1"},"Account Holder Name",-1)),t("p",B,n(s.bankDetails.account_holder||"Not set"),1)]),t("div",null,[e[13]||(e[13]=t("label",{class:"block text-sm font-medium text-gray-600 mb-1"},"Bank Name",-1)),t("p",F,n(s.bankDetails.bank_name||"Not set"),1)]),t("div",null,[e[14]||(e[14]=t("label",{class:"block text-sm font-medium text-gray-600 mb-1"},"Account Number / IBAN",-1)),t("p",C,n(s.bankDetails.account_number||"Not set"),1)]),t("div",null,[e[15]||(e[15]=t("label",{class:"block text-sm font-medium text-gray-600 mb-1"},"Bank Code / SWIFT",-1)),t("p",S,n(s.bankDetails.bank_code||"Not set"),1)])]))]),t("div",T,[t("div",U,[e[20]||(e[20]=t("h3",{class:"text-sm font-medium text-gray-600 mb-2"},"Total Paid Out",-1)),t("div",V,n(r.formatCurrency(s.payoutSummary.totalPaid)),1),e[21]||(e[21]=t("p",{class:"text-xs text-gray-500 mt-1"},"Lifetime payouts",-1))]),t("div",R,[e[22]||(e[22]=t("h3",{class:"text-sm font-medium text-gray-600 mb-2"},"Pending Payout",-1)),t("div",E,n(r.formatCurrency(s.payoutSummary.pending)),1),e[23]||(e[23]=t("p",{class:"text-xs text-gray-500 mt-1"},"Awaiting processing",-1))]),t("div",I,[e[24]||(e[24]=t("h3",{class:"text-sm font-medium text-gray-600 mb-2"},"This Month",-1)),t("div",L,n(r.formatCurrency(s.payoutSummary.thisMonth)),1),e[25]||(e[25]=t("p",{class:"text-xs text-gray-500 mt-1"},"Current month earnings",-1))]),t("div",j,[e[26]||(e[26]=t("h3",{class:"text-sm font-medium text-gray-600 mb-2"},"Next Payout",-1)),t("div",H,n(r.formatCurrency(s.payoutSummary.nextPayout)),1),t("p",q,n(r.formatDate(s.payoutSummary.nextPayoutDate)),1)])]),t("div",O,[t("div",W,[e[28]||(e[28]=t("h3",{class:"text-lg font-semibold text-gray-900"},"Payout History",-1)),u(t("select",{"onUpdate:modelValue":e[7]||(e[7]=o=>s.statusFilter=o),onChange:e[8]||(e[8]=(...o)=>r.fetchPayouts&&r.fetchPayouts(...o)),class:"px-4 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},e[27]||(e[27]=[x('<option value="" data-v-fa960152>All Statuses</option><option value="pending" data-v-fa960152>Pending</option><option value="processing" data-v-fa960152>Processing</option><option value="completed" data-v-fa960152>Completed</option><option value="failed" data-v-fa960152>Failed</option>',5)]),544),[[b,s.statusFilter]])]),t("div",z,[t("table",Q,[e[29]||(e[29]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Payout ID "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Date "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Amount "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Payment Method "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Reference "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ")])],-1)),t("tbody",G,[(i(!0),l(f,null,h(s.payouts,o=>(i(),l("tr",{key:o.id,class:"hover:bg-gray-50"},[t("td",J," #"+n(o.id),1),t("td",K,n(r.formatDate(o.payout_date)),1),t("td",X,n(r.formatCurrency(o.amount)),1),t("td",Y,n(r.formatPaymentMethod(o.payment_method)),1),t("td",Z,[t("span",{class:k([r.getStatusBadgeClass(o.status),"px-2 py-1 text-xs font-semibold rounded-full"])},n(r.formatStatus(o.status)),3)]),t("td",$,n(o.payment_reference||"-"),1),t("td",tt,[o.status==="completed"?(i(),l("button",{key:0,onClick:ut=>r.downloadReceipt(o.id),class:"text-blue-600 hover:text-blue-800 font-medium"}," Download Receipt ",8,et)):g("",!0)])]))),128))])])]),!s.loading&&s.payouts.length===0?(i(),l("div",st,[e[30]||(e[30]=t("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})],-1)),e[31]||(e[31]=t("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"No payouts yet",-1)),t("p",at,n(s.statusFilter?"No payouts with this status":"Payouts will appear here once processed"),1)])):g("",!0),s.pagination.total>s.pagination.perPage?(i(),l("div",ot,[t("div",nt," Showing "+n(s.pagination.from)+" to "+n(s.pagination.to)+" of "+n(s.pagination.total)+" results ",1),t("div",rt,[t("button",{onClick:e[9]||(e[9]=o=>r.goToPage(s.pagination.currentPage-1)),disabled:s.pagination.currentPage===1,class:"px-3 py-1 border border-gray-300 rounded-lg text-sm disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50"}," Previous ",8,lt),t("button",{onClick:e[10]||(e[10]=o=>r.goToPage(s.pagination.currentPage+1)),disabled:s.pagination.currentPage===s.pagination.lastPage,class:"px-3 py-1 border border-gray-300 rounded-lg text-sm disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50"}," Next ",8,it)])])):g("",!0)])])}const ct=p(v,[["render",dt],["__scopeId","data-v-fa960152"]]);export{ct as default};
