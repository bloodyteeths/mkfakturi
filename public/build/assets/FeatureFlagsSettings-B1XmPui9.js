import{a0 as j,v as V,u as q,e as c,k as z,s as k,a3 as B,c as o,a as i,K as D,L as f,w as d,Q as C,r as u,o as n,R as K,M as _,b as s,t as a,q as $}from"./main-rC5xHABW.js";const Q={key:0,class:"flex justify-center py-8"},R={key:1,class:"mt-6 space-y-4"},A={class:"flex-1"},G={class:"flex items-center gap-3 mb-2"},H={class:"text-base font-semibold text-gray-900"},J={key:0,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800"},O={class:"text-sm text-gray-600"},P={key:0,class:"mt-3 flex items-start gap-2 p-3 bg-yellow-50 border border-yellow-200 rounded-md"},U={class:"text-sm text-yellow-800"},W={class:"flex-shrink-0 ml-6"},X=["disabled","onClick"],Y={key:2,class:"text-center py-8 text-gray-500"},Z={class:"space-y-4"},ee={class:"flex items-start gap-3 p-4 bg-yellow-50 border border-yellow-200 rounded-md"},te={class:"text-sm font-medium text-yellow-900"},se={class:"mt-2 text-sm text-yellow-800"},ae={class:"flex justify-end gap-3"},ne={__name:"FeatureFlagsSettings",setup(oe){const{t:F}=V.useI18n(),I=q(),g=c(!1),m=c([]),p=c(!1),l=c(null),b=c(!0);z(async()=>{await S()});async function S(){g.value=!0;try{const e=await k.get("/settings/feature-flags");m.value=e.data.flags||[]}catch(e){B(e)}finally{g.value=!1}}function M(e){e.critical&&e.enabled?(l.value=e,p.value=!0):h(e)}function v(){p.value=!1,l.value=null}async function N(){l.value&&await h(l.value),v()}async function h(e){try{const r=await k.post(`/settings/feature-flags/${e.flag}/toggle`);r.data.success&&(e.enabled=r.data.enabled,I.showNotification({type:"success",message:r.data.message||F("settings.feature_flags.toggle_success")}))}catch(r){B(r)}}return(e,r)=>{const T=u("BaseLoader"),x=u("BaseIcon"),E=u("BaseSettingCard"),w=u("BaseButton"),L=u("BaseModal");return n(),o(C,null,[i(E,{title:e.$t("settings.feature_flags.title"),description:e.$t("settings.feature_flags.description")},{default:d(()=>[g.value?(n(),o("div",Q,[i(T)])):(n(),o("div",R,[(n(!0),o(C,null,K(m.value,t=>(n(),o("div",{key:t.flag,class:_(["relative flex items-start justify-between p-6 border border-gray-200 rounded-lg hover:border-gray-300 transition-colors",{"bg-green-50 border-green-200":t.enabled,"bg-gray-50":!t.enabled,"border-yellow-300":t.critical&&t.enabled}])},[s("div",A,[s("div",G,[s("h3",H,a(t.name),1),s("span",{class:_(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",{"bg-green-100 text-green-800":t.enabled,"bg-gray-200 text-gray-700":!t.enabled}])},a(t.enabled?e.$t("settings.feature_flags.enabled"):e.$t("settings.feature_flags.disabled")),3),t.critical?(n(),o("span",J,a(e.$t("settings.feature_flags.critical")),1)):f("",!0)]),s("p",O,a(t.description),1),t.flag==="partner-mocked-data"&&t.enabled?(n(),o("div",P,[i(x,{name:"ExclamationTriangleIcon",class:"w-5 h-5 text-yellow-600 flex-shrink-0 mt-0.5"}),s("p",U,a(e.$t("settings.feature_flags.partner_mocked_data_warning")),1)])):f("",!0)]),s("div",W,[s("button",{type:"button",disabled:t.flag==="partner-mocked-data"&&!b.value,class:_(["relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2",{"bg-primary-600":t.enabled,"bg-gray-200":!t.enabled,"opacity-50 cursor-not-allowed":t.flag==="partner-mocked-data"&&!b.value}]),onClick:y=>M(t)},[s("span",{class:_(["pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out",{"translate-x-5":t.enabled,"translate-x-0":!t.enabled}])},null,2)],10,X)])],2))),128))])),!g.value&&m.value.length===0?(n(),o("div",Y,a(e.$t("settings.feature_flags.no_flags")),1)):f("",!0)]),_:1},8,["title","description"]),p.value?(n(),D(L,{key:0,title:e.$t("settings.feature_flags.confirm_toggle_title")},{footer:d(()=>[s("div",ae,[i(w,{variant:"secondary",onClick:v},{default:d(()=>[$(a(e.$t("general.cancel")),1)]),_:1}),i(w,{variant:"primary",onClick:N},{default:d(()=>[$(a(e.$t("general.confirm")),1)]),_:1})])]),default:d(()=>{var t,y;return[s("div",Z,[s("div",ee,[i(x,{name:"ExclamationTriangleIcon",class:"w-6 h-6 text-yellow-600 flex-shrink-0 mt-0.5"}),s("div",null,[s("p",te,a(e.$t("settings.feature_flags.confirm_toggle_message",{flag:(t=l.value)==null?void 0:t.name})),1),s("p",se,a((y=l.value)==null?void 0:y.description),1)])])])]}),_:1},8,["title"])):f("",!0)],64)}}},re=j(ne,[["__scopeId","data-v-f6e92d1f"]]);export{re as default};
