import{v as S,u as T,e as l,k as j,K as z,w as i,s as x,r as a,o as _,a as o,b as e,c as h,L as k,t as s,q as $,M,m as G}from"./main-Ds_umSNN.js";const H={class:"mt-6 grid grid-cols-1 gap-6 md:grid-cols-2"},Q={class:"p-6 bg-white border border-gray-200 rounded-lg shadow"},R={class:"text-lg font-medium text-gray-900 mb-4"},A={class:"text-sm text-gray-600 mb-4"},F={key:0,class:"flex items-center justify-center h-64"},K={key:1,class:"space-y-4"},U={class:"flex justify-center p-6 bg-gray-50 rounded"},J=["src"],O={class:"text-center"},W={class:"text-xs text-gray-500 mb-2"},X={class:"p-6 bg-white border border-gray-200 rounded-lg shadow"},Y={class:"text-lg font-medium text-gray-900 mb-4"},Z={class:"text-sm text-gray-600 mb-4"},ee={key:0,class:"space-y-4"},te={class:"pt-4 border-t border-gray-200"},se={class:"text-sm font-medium text-gray-900 mb-3"},oe={class:"mt-6 p-6 bg-white border border-gray-200 rounded-lg shadow"},ae={class:"text-lg font-medium text-gray-900 mb-4"},ne={class:"grid grid-cols-1 gap-4 md:grid-cols-3"},ie={class:"p-4 bg-gray-50 rounded"},le={class:"text-sm text-gray-500"},re={class:"text-2xl font-bold text-primary-600"},ce={class:"p-4 bg-gray-50 rounded"},de={class:"text-sm text-gray-500"},_e={class:"text-2xl font-bold text-green-600"},ue={class:"p-4 bg-gray-50 rounded"},me={class:"text-sm text-gray-500"},pe={class:"text-2xl font-bold text-blue-600"},he={__name:"InvitePartner",setup(ve){const{t:r}=S.useI18n(),c=T(),u=l(!0),m=l(!1),p=l(!1),n=l(null),v=l({}),d=l({email:""});async function I(){u.value=!0;try{const t=await x.post("/invitations/partner-to-partner");n.value=t.data}catch{c.showNotification({type:"error",message:r("console.invite_partner.load_failed")})}finally{u.value=!1}}function C(){navigator.clipboard.writeText(n.value.link),p.value=!0,c.showNotification({type:"success",message:r("console.invite_partner.link_copied")}),setTimeout(()=>p.value=!1,2e3)}function N(){const t=document.createElement("a");t.href=n.value.qr_code_url,t.download="partner-referral-qr.png",t.click()}async function q(){m.value=!0;try{await x.post("/invitations/send-partner-email",{email:d.value.email,link:n.value.link}),c.showNotification({type:"success",message:r("console.invite_partner.email_sent")}),d.value.email=""}catch{c.showNotification({type:"error",message:r("console.invite_partner.email_failed")})}finally{m.value=!1}}return j(()=>{I()}),(t,f)=>{const y=a("BaseBreadcrumbItem"),V=a("BaseBreadcrumb"),E=a("BasePageHeader"),L=a("BaseLoader"),b=a("BaseIcon"),B=a("BaseButton"),w=a("BaseInput"),P=a("BaseInputGroup"),D=a("BasePage");return _(),z(D,null,{default:i(()=>[o(E,{title:t.$t("console.invite_partner.title")},{default:i(()=>[o(V,null,{default:i(()=>[o(y,{title:t.$t("general.home"),to:"/admin/console"},null,8,["title"]),o(y,{title:t.$t("console.invite_partner.title"),to:"#",active:""},null,8,["title"])]),_:1})]),_:1},8,["title"]),e("div",H,[e("div",Q,[e("h3",R,s(t.$t("console.invite_partner.qr_code")),1),e("p",A,s(t.$t("console.invite_partner.qr_description")),1),u.value?(_(),h("div",F,[o(L)])):n.value?(_(),h("div",K,[e("div",U,[e("img",{src:n.value.qr_code_url,alt:"QR Code",class:"w-64 h-64"},null,8,J)]),e("div",O,[e("p",W,s(t.$t("console.invite_partner.scan_to_signup")),1),o(B,{variant:"primary-outline",size:"sm",onClick:N},{left:i(g=>[o(b,{name:"ArrowDownTrayIcon",class:M(g.class)},null,8,["class"])]),default:i(()=>[$(" "+s(t.$t("console.invite_partner.download_qr")),1)]),_:1})])])):k("",!0)]),e("div",X,[e("h3",Y,s(t.$t("console.invite_partner.share_link")),1),e("p",Z,s(t.$t("console.invite_partner.link_description")),1),n.value?(_(),h("div",ee,[o(P,{label:t.$t("console.invite_partner.your_link")},{default:i(()=>[o(w,{"model-value":n.value.link,readonly:""},{right:i(()=>[e("button",{onClick:C,class:"text-primary-500 hover:text-primary-700"},[o(b,{name:p.value?"CheckIcon":"ClipboardDocumentIcon",class:"w-5 h-5"},null,8,["name"])])]),_:1},8,["model-value"])]),_:1},8,["label"]),e("div",te,[e("h4",se,s(t.$t("console.invite_partner.email_invite")),1),e("form",{onSubmit:G(q,["prevent"]),class:"space-y-3"},[o(w,{modelValue:d.value.email,"onUpdate:modelValue":f[0]||(f[0]=g=>d.value.email=g),type:"email",placeholder:t.$t("console.invite_partner.email_placeholder")},null,8,["modelValue","placeholder"]),o(B,{type:"submit",loading:m.value,size:"sm"},{default:i(()=>[$(s(t.$t("console.invite_partner.send_email")),1)]),_:1},8,["loading"])],32)])])):k("",!0)])]),e("div",oe,[e("h3",ae,s(t.$t("console.invite_partner.referral_stats")),1),e("div",ne,[e("div",ie,[e("div",le,s(t.$t("console.invite_partner.total_referrals")),1),e("div",re,s(v.value.total_referrals||0),1)]),e("div",ce,[e("div",de,s(t.$t("console.invite_partner.active_downline")),1),e("div",_e,s(v.value.active_downline||0),1)]),e("div",ue,[e("div",me,s(t.$t("console.invite_partner.upline_earnings")),1),e("div",pe,"â‚¬"+s(v.value.upline_earnings||0),1)])])])]),_:1})}}};export{he as default};
