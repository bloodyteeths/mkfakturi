import{G as z,u as V,ax as j,O as M,v as R,N as F,n as O,a7 as P,r as p,K as i,o as r,w as n,L as d,l as o,V as w,a as u,q as m,t as g,ag as U,aB as q}from"./main-rC5xHABW.js";import{u as H}from"./bills-B8x7utVJ.js";const W={__name:"BillIndexDropdown",props:{row:{type:Object,default:null},table:{type:Object,default:null},loadData:{type:Function,default:()=>{}}},setup(s){const y=s,h=H(),x=z(),D=V(),v=j(),f=M(),{t:a}=R.useI18n(),B=F(),_=O(),S=P("utils");function I(e){return e.status=="DRAFT"&&B.name!=="bills.view"&&f.hasAbilities(w.SEND_BILL)}async function $(e){v.openDialog({title:a("general.are_you_sure"),message:a("bills.confirm_delete"),yesLabel:a("general.ok"),noLabel:a("general.cancel"),variant:"danger",hideNoButton:!1,size:"lg"}).then(l=>{e=e,l&&h.deleteBill({ids:[e]}).then(t=>{t.data.success&&(_.push("/admin/bills"),y.table&&y.table.refresh(),h.$patch(b=>{b.selectedBills=[],b.selectAllField=!1}))})})}async function E(e){v.openDialog({title:a("general.are_you_sure"),message:a("bills.confirm_clone"),yesLabel:a("general.ok"),noLabel:a("general.cancel"),variant:"primary",hideNoButton:!1,size:"lg"}).then(l=>{l&&h.cloneBill(e).then(t=>{_.push(`/admin/bills/${t.data.data.id}/edit`)})})}async function C(e){v.openDialog({title:a("general.are_you_sure"),message:a("bills.bill_mark_as_sent"),yesLabel:a("general.ok"),noLabel:a("general.cancel"),variant:"primary",hideNoButton:!1,size:"lg"}).then(l=>{const t={id:e,status:"SENT"};l&&h.markAsSent(t).then(b=>{y.table&&y.table.refresh()})})}async function N(e){x.openModal({title:a("bills.send_bill"),componentName:"SendBillModal",id:e.id,data:e,variant:"sm"})}function A(){let e=`${window.location.origin}/bills/pdf/${y.row.unique_hash}`;S.copyTextToClipboard(e),D.showNotification({type:"success",message:a("general.copied_pdf_url_clipboard")})}return(e,l)=>{const t=p("BaseIcon"),b=p("BaseButton"),c=p("BaseDropdownItem"),L=p("router-link"),T=p("BaseDropdown");return r(),i(T,null,{activator:n(()=>[o(B).name==="bills.view"?(r(),i(b,{key:0,variant:"primary"},{default:n(()=>[u(t,{name:"EllipsisHorizontalIcon",class:"h-5 text-white"})]),_:1})):(r(),i(t,{key:1,name:"EllipsisHorizontalIcon",class:"h-5 text-gray-500"}))]),default:n(()=>[o(B).name!=="bills.view"&&o(f).hasAbilities(o(w).VIEW_BILL)?(r(),i(L,{key:0,to:`/admin/bills/${s.row.id}/view`},{default:n(()=>[u(c,null,{default:n(()=>[u(t,{name:"EyeIcon",class:"w-5 h-5 mr-3 text-gray-400 group-hover:text-gray-500"}),m(" "+g(e.$t("general.view")),1)]),_:1})]),_:1},8,["to"])):d("",!0),o(f).hasAbilities(o(w).EDIT_BILL)?(r(),i(L,{key:1,to:`/admin/bills/${s.row.id}/edit`},{default:n(()=>[U(u(c,null,{default:n(()=>[u(t,{name:"PencilIcon",class:"w-5 h-5 mr-3 text-gray-400 group-hover:text-gray-500"}),m(" "+g(e.$t("general.edit")),1)]),_:1},512),[[q,s.row.allow_edit]])]),_:1},8,["to"])):d("",!0),o(f).hasAbilities(o(w).CREATE_BILL)?(r(),i(c,{key:2,onClick:l[0]||(l[0]=k=>E(s.row))},{default:n(()=>[u(t,{name:"DocumentTextIcon",class:"w-5 h-5 mr-3 text-gray-400 group-hover:text-gray-500"}),m(" "+g(e.$t("bills.clone_bill")),1)]),_:1})):d("",!0),I(s.row)?(r(),i(c,{key:3,onClick:l[1]||(l[1]=k=>C(s.row.id))},{default:n(()=>[u(t,{name:"CheckCircleIcon",class:"w-5 h-5 mr-3 text-gray-400 group-hover:text-gray-500"}),m(" "+g(e.$t("bills.mark_as_sent")),1)]),_:1})):d("",!0),I(s.row)?(r(),i(c,{key:4,onClick:l[2]||(l[2]=k=>N(s.row))},{default:n(()=>[u(t,{name:"PaperAirplaneIcon",class:"w-5 h-5 mr-3 text-gray-400 group-hover:text-gray-500"}),m(" "+g(e.$t("bills.send_bill")),1)]),_:1})):d("",!0),o(B).name==="bills.view"?(r(),i(c,{key:5,onClick:A},{default:n(()=>[u(t,{name:"LinkIcon",class:"w-5 h-5 mr-3 text-gray-400 group-hover:text-gray-500"}),m(" "+g(e.$t("general.copy_pdf_url")),1)]),_:1})):d("",!0),o(f).hasAbilities(o(w).DELETE_BILL)?(r(),i(c,{key:6,onClick:l[3]||(l[3]=k=>$(s.row.id))},{default:n(()=>[u(t,{name:"TrashIcon",class:"w-5 h-5 mr-3 text-gray-400 group-hover:text-gray-500"}),m(" "+g(e.$t("general.delete")),1)]),_:1})):d("",!0)]),_:1})}}};export{W as _};
