import{x as D,y as we,z as $e,j as N,A as te,B as P,C as ke,D as Ce,E as Se,l as t,n as K,F as Q,G as Z,H as X,v as H,e as L,I as Ie,f as G,g as J,J as Be,i as ue,r as k,K as V,o as a,w as u,b as s,m as ne,a as n,c as d,q as M,t as f,L as I,M as j,N as ee,O as ae,P as oe,k as de,Q as R,R as T,T as me,S as Ee,U as Me,d as Ae,_ as pe,V as O,Y as Ue,W as se,X as Le,Z as Ve,u as Re,$ as Te}from"./main-C3HD31Qx.js";import{u as fe}from"./exchange-rate-CV0NGzj5.js";import{u as Fe}from"./console-e4_BWoZp.js";import{u as je}from"./users-BRy8uutt.js";import{N as Ne}from"./NotificationRoot-OwOrE4rj.js";import{V as Oe}from"./index-C8fCFE-t.js";const _e=$e?window:void 0;function W(B){var p;const o=P(B);return(p=o==null?void 0:o.$el)!=null?p:o}function z(...B){const p=[],o=()=>{p.forEach(v=>v()),p.length=0},l=(v,i,r,$)=>(v.addEventListener(i,r,$),()=>v.removeEventListener(i,r,$)),x=N(()=>{const v=te(P(B[0])).filter(i=>i!=null);return v.every(i=>typeof i!="string")?v:void 0}),y=ke(()=>{var v,i;return[(i=(v=x.value)==null?void 0:v.map(r=>W(r)))!=null?i:[_e].filter(r=>r!=null),te(P(x.value?B[1]:B[0])),te(t(x.value?B[2]:B[1])),P(x.value?B[3]:B[2])]},([v,i,r,$])=>{if(o(),!(v!=null&&v.length)||!(i!=null&&i.length)||!(r!=null&&r.length))return;const _=Se($)?{...$}:$;p.push(...v.flatMap(E=>i.flatMap(U=>r.map(h=>l(E,U,h,_)))))},{flush:"post"}),g=()=>{y(),o()};return Ce(o),g}let ce=!1;function ye(B,p,o={}){const{window:l=_e,ignore:x=[],capture:y=!0,detectIframe:g=!1,controls:v=!1}=o;if(!l)return v?{stop:D,cancel:D,trigger:D}:D;if(we&&!ce){ce=!0;const c={passive:!0};Array.from(l.document.body.children).forEach(e=>z(e,"click",D,c)),z(l.document.documentElement,"click",D,c)}let i=!0;const r=c=>P(x).some(e=>{if(typeof e=="string")return Array.from(l.document.querySelectorAll(e)).some(m=>m===c.target||c.composedPath().includes(m));{const m=W(e);return m&&(c.target===m||c.composedPath().includes(m))}});function $(c){const e=P(c);return e&&e.$.subTree.shapeFlag===16}function _(c,e){const m=P(c),C=m.$.subTree&&m.$.subTree.children;return C==null||!Array.isArray(C)?!1:C.some(w=>w.el===e.target||e.composedPath().includes(w.el))}const E=c=>{const e=W(B);if(c.target!=null&&!(!(e instanceof Element)&&$(B)&&_(B,c))&&!(!e||e===c.target||c.composedPath().includes(e))){if("detail"in c&&c.detail===0&&(i=!r(c)),!i){i=!0;return}p(c)}};let U=!1;const h=[z(l,"click",c=>{U||(U=!0,setTimeout(()=>{U=!1},0),E(c))},{passive:!0,capture:y}),z(l,"pointerdown",c=>{const e=W(B);i=!r(c)&&!!(e&&!c.composedPath().includes(e))},{passive:!0}),g&&z(l,"blur",c=>{setTimeout(()=>{var e;const m=W(B);((e=l.document.activeElement)==null?void 0:e.tagName)==="IFRAME"&&!(m!=null&&m.contains(l.document.activeElement))&&p(c)},0)},{passive:!0})].filter(Boolean),A=()=>h.forEach(c=>c());return v?{stop:A,cancel:()=>{i=!1},trigger:c=>{i=!0,E(c),i=!1}}:A}const Pe={class:"flex justify-between w-full"},qe={class:"p-4 mb-16 sm:p-6 space-y-4"},De={key:1,class:"flex flex-col items-center"},Ge={class:"z-0 flex justify-end p-4 bg-gray-50 border-modal-bg"},ze={__name:"CompanyModal",setup(B){const p=K(),o=Q(),l=Z(),x=X(),{t:y}=H.useI18n();let g=L(!1),v=L(null),i=L(!1),r=L(null),$=L(null);const _=Ie({name:null,currency:"",address:{country_id:null}}),E=N(()=>l.active&&l.componentName==="CompanyModal"),U={newCompanyForm:{name:{required:G.withMessage(y("validation.required"),J),minLength:G.withMessage(y("validation.name_min_length",{count:3}),Be(3))},address:{country_id:{required:G.withMessage(y("validation.required"),J)}},currency:{required:G.withMessage(y("validation.required"),J)}}},h=ue(U,{newCompanyForm:_});async function A(){i.value=!0,await x.fetchCurrencies(),await x.fetchCountries(),_.currency=o.selectedCompanyCurrency.id,_.address.country_id=o.selectedCompany.address.country_id,i.value=!1}function c(b,S){$.value=b,r.value=S}function e(){$.value=null,r.value=null}async function m(){if(h.value.newCompanyForm.$touch(),h.value.$invalid)return!0;g.value=!0;try{const b=await o.addNewCompany(_);if(b.data.data){if(await o.setSelectedCompany(b.data.data),r&&r.value){let S=new FormData;S.append("company_logo",JSON.stringify({name:$.value,data:r.value})),await o.updateCompanyLogo(S),p.push("/admin/dashboard")}await x.setIsAppLoaded(!1),await x.bootstrap(),w()}g.value=!1}catch{g.value=!1}}function C(){_.name="",_.currency="",_.address.country_id="",h.value.$reset()}function w(){l.closeModal(),setTimeout(()=>{C(),h.value.$reset()},300)}return(b,S)=>{const q=k("BaseIcon"),re=k("BaseContentPlaceholdersBox"),he=k("BaseContentPlaceholders"),ge=k("BaseFileUploader"),Y=k("BaseInputGroup"),ve=k("BaseInput"),le=k("BaseMultiselect"),be=k("BaseInputGrid"),ie=k("BaseButton"),xe=k("BaseModal");return a(),V(xe,{show:E.value,onClose:w,onOpen:A},{header:u(()=>[s("div",Pe,[M(f(t(l).title)+" ",1),n(q,{name:"XMarkIcon",class:"w-6 h-6 text-gray-500 cursor-pointer",onClick:w})])]),default:u(()=>[s("form",{action:"",onSubmit:ne(m,["prevent"])},[s("div",qe,[n(be,{layout:"one-column"},{default:u(()=>[n(Y,{"content-loading":t(i),label:b.$t("settings.company_info.company_logo")},{default:u(()=>[t(i)?(a(),V(he,{key:0},{default:u(()=>[n(re,{rounded:!0,class:"w-full h-24"})]),_:1})):(a(),d("div",De,[n(ge,{"preview-image":t(v),base64:"",onRemove:e,onChange:c},null,8,["preview-image"])]))]),_:1},8,["content-loading","label"]),n(Y,{label:b.$t("settings.company_info.company_name"),error:t(h).newCompanyForm.name.$error&&t(h).newCompanyForm.name.$errors[0].$message,"content-loading":t(i),required:""},{default:u(()=>[n(ve,{modelValue:_.name,"onUpdate:modelValue":S[0]||(S[0]=F=>_.name=F),invalid:t(h).newCompanyForm.name.$error,"content-loading":t(i),onInput:S[1]||(S[1]=F=>t(h).newCompanyForm.name.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","error","content-loading"]),n(Y,{"content-loading":t(i),label:b.$t("settings.company_info.country"),error:t(h).newCompanyForm.address.country_id.$error&&t(h).newCompanyForm.address.country_id.$errors[0].$message,required:""},{default:u(()=>[n(le,{modelValue:_.address.country_id,"onUpdate:modelValue":S[2]||(S[2]=F=>_.address.country_id=F),"content-loading":t(i),label:"name",invalid:t(h).newCompanyForm.address.country_id.$error,options:t(x).countries,"value-prop":"id","can-deselect":!0,"can-clear":!1,searchable:"","track-by":"name"},null,8,["modelValue","content-loading","invalid","options"])]),_:1},8,["content-loading","label","error"]),n(Y,{label:b.$t("wizard.currency"),error:t(h).newCompanyForm.currency.$error&&t(h).newCompanyForm.currency.$errors[0].$message,"content-loading":t(i),"help-text":b.$t("wizard.currency_set_alert"),required:""},{default:u(()=>[n(le,{modelValue:_.currency,"onUpdate:modelValue":S[3]||(S[3]=F=>_.currency=F),"content-loading":t(i),options:t(x).currencies,label:"name","value-prop":"id",searchable:!0,"track-by":"name",placeholder:b.$t("settings.currencies.select_currency"),invalid:t(h).newCompanyForm.currency.$error,class:"w-full"},null,8,["modelValue","content-loading","options","placeholder","invalid"])]),_:1},8,["label","error","content-loading","help-text"])]),_:1})]),s("div",Ge,[n(ie,{class:"mr-3 text-sm",variant:"primary-outline",outline:"",type:"button",onClick:w},{default:u(()=>[M(f(b.$t("general.cancel")),1)]),_:1}),n(ie,{loading:t(g),disabled:t(g),variant:"primary",type:"submit"},{left:u(F=>[t(g)?I("",!0):(a(),V(q,{key:0,name:"ArrowDownOnSquareIcon",class:j(F.class)},null,8,["class"]))]),default:u(()=>[M(" "+f(b.$t("general.save")),1)]),_:1},8,["loading","disabled"])])],32)]),_:1},8,["show"])}}},We={key:0,class:"w-16 text-sm font-medium truncate sm:w-auto"},Xe={key:0,class:"absolute right-0 mt-2 bg-white rounded-md shadow-lg"},He={class:"overflow-y-auto scrollbar-thin scrollbar-thumb-rounded-full w-[250px] max-h-[350px] scrollbar-thumb-gray-300 scrollbar-track-gray-10 pb-4"},Ye={class:"px-3 py-2 text-xs font-semibold text-gray-400 mb-0.5 block uppercase"},Je={key:0,class:"flex flex-col items-center justify-center p-2 px-3 mt-4 text-base text-gray-400"},Ke={key:1},Qe={key:0},Ze=["onClick"],et={class:"flex items-center"},tt={class:"flex items-center justify-center mr-3 overflow-hidden text-base font-semibold bg-gray-200 rounded-md w-9 h-9 text-primary-500"},st={key:0},nt=["src"],at={class:"flex flex-col"},ot={class:"text-sm"},rt={key:2},lt={class:"px-3 py-2 text-xs font-semibold text-blue-500 mb-0.5 block uppercase"},it={key:0,class:"flex flex-col items-center justify-center p-2 px-3 mt-4 text-base text-gray-400"},ct={key:1},ut=["onClick"],dt={class:"flex items-center"},mt={class:"flex items-center justify-center mr-3 overflow-hidden text-base font-semibold bg-blue-100 rounded-md w-9 h-9 text-blue-600"},pt={key:0},ft=["src"],_t={class:"flex flex-col"},yt={class:"text-sm font-medium"},ht={class:"flex items-center text-xs text-gray-500"},gt={key:0,class:"ml-2 text-blue-500"},vt={class:"font-medium"},bt={class:"font-medium"},xt={__name:"CompanySwitcher",setup(B){const p=Q(),o=Fe(),l=Z(),x=ee(),y=K(),g=X(),{t:v}=H.useI18n(),i=ae(),r=L(!1),$=L(""),_=L(null),E=N(()=>o.companies.length>0||o.partner!==null);oe(x,()=>{r.value=!1,$.value=""}),ye(_,()=>{r.value=!1});function U(m){if(m)return m.split(" ")[0].charAt(0).toUpperCase()}function h(){l.openModal({title:v("company_switcher.new_company"),componentName:"CompanyModal",size:"sm"})}de(async()=>{try{await o.initialize()}catch(m){console.debug("User is not a partner:",m)}});async function A(m){await p.setSelectedCompany(m),y.push("/admin/dashboard"),await g.setIsAppLoaded(!1),await g.bootstrap()}async function c(m){try{await o.switchCompany(m.id),r.value=!1,y.push("/admin/dashboard")}catch(C){console.error("Failed to switch to partner company:",C)}}function e(){r.value=!1,y.push("/admin/console")}return(m,C)=>{const w=k("BaseIcon");return a(),d("div",{ref_key:"companySwitchBar",ref:_,class:"relative rounded"},[n(ze),s("div",{class:"flex items-center justify-center px-3 h-8 md:h-9 ml-2 text-sm text-white bg-white rounded cursor-pointer bg-opacity-20",onClick:C[0]||(C[0]=b=>r.value=!r.value)},[t(p).selectedCompany?(a(),d("span",We,f(t(p).selectedCompany.name),1)):I("",!0),n(w,{name:"ChevronDownIcon",class:"h-5 ml-1 text-white"})]),n(me,{"enter-active-class":"transition duration-200 ease-out","enter-from-class":"translate-y-1 opacity-0","enter-to-class":"translate-y-0 opacity-100","leave-active-class":"transition duration-150 ease-in","leave-from-class":"translate-y-0 opacity-100","leave-to-class":"translate-y-1 opacity-0"},{default:u(()=>[r.value?(a(),d("div",Xe,[s("div",He,[s("label",Ye,f(m.$t("company_switcher.label")),1),t(p).companies.length<1&&!E.value?(a(),d("div",Je,[n(w,{name:"ExclamationCircleIcon",class:"h-5 text-gray-400"}),M(" "+f(m.$t("company_switcher.no_results_found")),1)])):E.value?I("",!0):(a(),d("div",Ke,[t(p).companies.length>0?(a(),d("div",Qe,[(a(!0),d(R,null,T(t(p).companies,(b,S)=>(a(),d("div",{key:S,class:j(["p-2 px-3 rounded-md cursor-pointer hover:bg-gray-100 hover:text-primary-500",{"bg-gray-100 text-primary-500":t(p).selectedCompany.id===b.id}]),onClick:q=>A(b)},[s("div",et,[s("span",tt,[b.logo?(a(),d("img",{key:1,src:b.logo,alt:"Company logo",class:"w-full h-full object-contain"},null,8,nt)):(a(),d("span",st,f(U(b.name)),1))]),s("div",at,[s("span",ot,f(b.name),1)])])],10,Ze))),128))])):I("",!0)])),E.value?(a(),d("div",rt,[s("label",lt,f(m.$t("company_switcher.partner_clients"))+" ("+f(t(o).companies.length)+") ",1),t(o).companies.length<1?(a(),d("div",it,[n(w,{name:"ExclamationCircleIcon",class:"h-5 text-gray-400"}),M(" "+f(m.$t("company_switcher.no_partner_companies_found")),1)])):(a(),d("div",ct,[(a(!0),d(R,null,T(t(o).companies,(b,S)=>{var q;return a(),d("div",{key:`partner-${S}`,class:j(["p-2 px-3 rounded-md cursor-pointer hover:bg-blue-50 hover:text-blue-600",{"bg-blue-50 text-blue-600 border-l-2 border-blue-500":((q=t(o).currentCompany)==null?void 0:q.id)===b.id}]),onClick:re=>c(b)},[s("div",dt,[s("span",mt,[b.logo?(a(),d("img",{key:1,src:b.logo,alt:"Company logo",class:"w-full h-full object-contain"},null,8,ft)):(a(),d("span",pt,f(U(b.name)),1))]),s("div",_t,[s("span",yt,f(b.name),1),s("div",ht,[s("span",null,f(b.commission_rate)+"% "+f(m.$t("company_switcher.commission")),1),b.is_primary?(a(),d("span",gt,"â€¢ "+f(m.$t("company_switcher.primary")),1)):I("",!0)])])])],10,ut)}),128))])),s("div",{class:"flex items-center justify-center p-3 mt-2 border-t-2 border-gray-100 cursor-pointer text-blue-500 hover:text-blue-600 hover:bg-blue-50",onClick:e},[n(w,{name:"CogIcon",class:"h-5 mr-2"}),s("span",vt,f(m.$t("company_switcher.manage_clients")),1)])])):I("",!0)]),t(i).currentUser.is_owner?(a(),d("div",{key:0,class:"flex items-center justify-center p-4 pl-3 border-t-2 border-gray-100 cursor-pointer text-primary-400 hover:text-primary-500",onClick:h},[n(w,{name:"PlusIcon",class:"h-5 mr-2"}),s("span",bt,f(m.$t("company_switcher.add_new_company")),1)])):I("",!0)])):I("",!0)]),_:1})],512)}}},wt={key:0,class:"scrollbar-thin scrollbar-thumb-rounded-full scrollbar-thumb-gray-300 scrollbar-track-gray-100 overflow-y-auto bg-white rounded-md mt-2 shadow-lg p-3 absolute w-[300px] h-[200px] right-0"},$t={key:0,class:"flex items-center justify-center text-gray-400 text-base flex-col mt-4"},kt={key:1},Ct={key:0},St={class:"text-sm text-gray-400 mb-0.5 block px-2 uppercase"},It={class:"flex items-center justify-center w-9 h-9 mr-3 text-base font-semibold bg-gray-200 rounded-full text-primary-500"},Bt={class:"flex flex-col"},Et={class:"text-sm"},Mt={key:0,class:"text-xs text-gray-400"},At={key:1,class:"text-xs text-gray-400"},Ut={key:1,class:"mt-2"},Lt={class:"text-sm text-gray-400 mb-2 block px-2 mb-0.5 uppercase"},Vt={class:"flex items-center justify-center w-9 h-9 mr-3 text-base font-semibold bg-gray-200 rounded-full text-primary-500"},Rt={class:"flex flex-col"},Tt={class:"text-sm"},Ft={class:"text-xs text-gray-400"},jt={__name:"GlobalSearchBar",setup(B){const p=je(),o=L(!1),l=L(""),x=L(null),y=L(!1),g=ee();oe(g,()=>{o.value=!1,l.value=""}),v=Ee.debounce(v,500),ye(x,()=>{o.value=!1,l.value=""});function v(){let r={search:l.value};l.value&&(y.value=!0,p.searchUsers(r).then(()=>{o.value=!0}),y.value=!1),l.value===""&&(o.value=!1)}function i(r){if(r)return r.split(" ")[0].charAt(0).toUpperCase()}return(r,$)=>{const _=k("BaseIcon"),E=k("BaseInput"),U=k("router-link");return a(),d("div",{ref_key:"searchBar",ref:x,class:"hidden rounded md:block relative"},[s("div",null,[n(E,{modelValue:l.value,"onUpdate:modelValue":$[0]||($[0]=h=>l.value=h),placeholder:r.$t("global_search.search"),"container-class":"!rounded",class:"h-8 md:h-9 !rounded",onInput:v},{left:u(()=>[n(_,{name:"MagnifyingGlassIcon",class:"text-gray-400"})]),right:u(()=>[y.value?(a(),V(Me,{key:0,class:"h-5 text-primary-500"})):I("",!0)]),_:1},8,["modelValue","placeholder"])]),n(me,{"enter-active-class":"transition duration-200 ease-out","enter-from-class":"translate-y-1 opacity-0","enter-to-class":"translate-y-0 opacity-100","leave-active-class":"transition duration-150 ease-in","leave-from-class":"translate-y-0 opacity-100","leave-to-class":"translate-y-1 opacity-0"},{default:u(()=>[o.value?(a(),d("div",wt,[t(p).userList.length<1&&t(p).customerList.length<1?(a(),d("div",$t,[n(_,{name:"ExclamationCircleIcon",class:"text-gray-400"}),M(" "+f(r.$t("global_search.no_results_found")),1)])):(a(),d("div",kt,[t(p).customerList.length>0?(a(),d("div",Ct,[s("label",St,f(r.$t("global_search.customers")),1),(a(!0),d(R,null,T(t(p).customerList,(h,A)=>(a(),d("div",{key:A,class:"p-2 hover:bg-gray-100 cursor-pointer rounded-md"},[n(U,{to:{path:`/admin/customers/${h.id}/view`},class:"flex items-center"},{default:u(()=>[s("span",It,f(i(h.name)),1),s("div",Bt,[s("span",Et,f(h.name),1),h.contact_name?(a(),d("span",Mt,f(h.contact_name),1)):(a(),d("span",At,f(h.email),1))])]),_:2},1032,["to"])]))),128))])):I("",!0),t(p).userList.length>0?(a(),d("div",Ut,[s("label",Lt,f(r.$t("global_search.users")),1),(a(!0),d(R,null,T(t(p).userList,(h,A)=>(a(),d("div",{key:A,class:"p-2 hover:bg-gray-100 cursor-pointer rounded-md"},[n(U,{to:{path:`/admin/users/${h.id}/edit`},class:"flex items-center"},{default:u(()=>[s("span",Vt,f(i(h.name)),1),s("div",Rt,[s("span",Tt,f(h.name),1),s("span",Ft,f(h.email),1)])]),_:2},1032,["to"])]))),128))])):I("",!0)]))])):I("",!0)]),_:1})],512)}}},Nt={class:"fixed top-0 left-0 z-20 flex items-center justify-between w-full px-4 py-3 md:h-16 md:px-8 bg-gradient-to-r from-primary-500 to-primary-400"},Ot=["src"],Pt={class:"flex float-right h-8 m-0 list-none md:h-9"},qt={key:0,class:"relative hidden float-left m-0 md:block"},Dt={class:"flex items-center justify-center w-8 h-8 ml-2 text-sm text-black bg-white rounded md:h-9 md:w-9"},Gt={class:"ml-2"},zt={class:"relative block float-left ml-2"},Wt={class:"flex items-center justify-center w-8 h-8 text-sm text-black bg-white rounded md:h-9 md:w-9 cursor-pointer hover:bg-gray-100"},Xt={class:"flex items-center"},Ht={key:0,class:"ml-auto text-green-500"},Yt={class:"flex items-center"},Jt={key:0,class:"ml-auto text-green-500"},Kt={class:"flex items-center"},Qt={key:0,class:"ml-auto text-green-500"},Zt={class:"flex items-center"},es={key:0,class:"ml-auto text-green-500"},ts={class:"flex items-center"},ss={key:0,class:"ml-auto text-green-500"},ns={class:"flex items-center"},as={key:0,class:"ml-auto text-green-500"},os={class:"flex items-center"},rs={key:0,class:"ml-auto text-green-500"},ls={class:"flex items-center"},is={key:0,class:"ml-auto text-green-500"},cs={class:"relative block float-left ml-2"},us=["src"],ds={__name:"TheSiteHeader",setup(B){const p=Ae(),o=ae(),l=X(),x=K(),{locale:y}=H.useI18n(),g=N(()=>y.value),v=N(()=>o.currentUser&&o.currentUser.avatar!==0?o.currentUser.avatar:$()),i=L(!1),r=N(()=>{var m;if(i.value)return!1;const c=typeof window<"u"?window.admin_logo:null;if(c)return c;const e=(m=l.globalSettings)==null?void 0:m.admin_portal_logo;return e||!1});oe(()=>{var c;return(c=l.globalSettings)==null?void 0:c.admin_portal_logo},()=>{i.value=!1});function $(){return new URL("/build/assets/default-avatar-DiPf6Xay.jpg",import.meta.url)}function _(){return o.hasAbilities([O.CREATE_INVOICE,O.CREATE_ESTIMATE,O.CREATE_CUSTOMER])}async function E(){await p.logout(),x.push("/login")}function U(){l.setSidebarVisibility(!0)}function h(){i.value=!0}function A(c){y.value=c,localStorage.setItem("invoiceshelf_locale",c);try{l.updateLanguage(c)}catch{console.log("Global store updateLanguage not available, using localStorage only")}}return(c,e)=>{const m=k("router-link"),C=k("BaseIcon"),w=k("BaseDropdownItem"),b=k("BaseDropdown");return a(),d("header",Nt,[n(m,{to:"/admin/dashboard",class:"float-none text-lg not-italic font-black tracking-wider text-white brand-main md:float-left font-base hidden md:block"},{default:u(()=>[r.value?(a(),d("img",{key:0,src:r.value,class:"h-8",onError:h},null,40,Ot)):(a(),V(pe,{key:1,class:"block h-8 w-auto",variant:"clear"}))]),_:1}),s("div",{class:j([{"is-active":t(l).isSidebarOpen},"flex float-left p-1 overflow-visible text-sm ease-linear bg-white border-0 rounded cursor-pointer md:hidden md:ml-0 hover:bg-gray-100"]),onClick:ne(U,["prevent"])},[n(C,{name:"Bars3Icon",class:"!w-6 !h-6 text-gray-500"})],2),s("ul",Pt,[_?(a(),d("li",qt,[n(b,{"width-class":"w-48"},{activator:u(()=>[s("div",Dt,[n(C,{name:"PlusIcon",class:"w-5 h-5 text-gray-600"})])]),default:u(()=>[n(m,{to:"/admin/invoices/create"},{default:u(()=>[t(o).hasAbilities(t(O).CREATE_INVOICE)?(a(),V(w,{key:0},{default:u(()=>[n(C,{name:"DocumentTextIcon",class:"w-5 h-5 mr-3 text-gray-400 group-hover:text-gray-500","aria-hidden":"true"}),M(" "+f(c.$t("invoices.new_invoice")),1)]),_:1})):I("",!0)]),_:1}),n(m,{to:"/admin/estimates/create"},{default:u(()=>[t(o).hasAbilities(t(O).CREATE_ESTIMATE)?(a(),V(w,{key:0},{default:u(()=>[n(C,{name:"DocumentIcon",class:"w-5 h-5 mr-3 text-gray-400 group-hover:text-gray-500","aria-hidden":"true"}),M(" "+f(c.$t("estimates.new_estimate")),1)]),_:1})):I("",!0)]),_:1}),n(m,{to:"/admin/customers/create"},{default:u(()=>[t(o).hasAbilities(t(O).CREATE_CUSTOMER)?(a(),V(w,{key:0},{default:u(()=>[n(C,{name:"UserIcon",class:"w-5 h-5 mr-3 text-gray-400 group-hover:text-gray-500","aria-hidden":"true"}),M(" "+f(c.$t("customers.new_customer")),1)]),_:1})):I("",!0)]),_:1})]),_:1})])):I("",!0),s("li",Gt,[t(o).currentUser.is_owner||t(o).hasAbilities(t(O).VIEW_CUSTOMER)?(a(),V(jt,{key:0})):I("",!0)]),s("li",null,[n(xt)]),s("li",zt,[n(b,{"width-class":"w-48"},{activator:u(()=>[s("div",Wt,[n(C,{name:"LanguageIcon",class:"w-5 h-5 text-gray-600"})])]),default:u(()=>[n(w,{onClick:e[0]||(e[0]=S=>A("en"))},{default:u(()=>[s("div",Xt,[e[8]||(e[8]=s("span",{class:"mr-3 text-base"},"ðŸ‡ºðŸ‡¸",-1)),e[9]||(e[9]=M(" English ",-1)),g.value==="en"?(a(),d("span",Ht,"âœ“")):I("",!0)])]),_:1}),n(w,{onClick:e[1]||(e[1]=S=>A("mk"))},{default:u(()=>[s("div",Yt,[e[10]||(e[10]=s("span",{class:"mr-3 text-base"},"ðŸ‡²ðŸ‡°",-1)),e[11]||(e[11]=M(" ÐœÐ°ÐºÐµÐ´Ð¾Ð½ÑÐºÐ¸ ",-1)),g.value==="mk"?(a(),d("span",Jt,"âœ“")):I("",!0)])]),_:1}),n(w,{onClick:e[2]||(e[2]=S=>A("tr"))},{default:u(()=>[s("div",Kt,[e[12]||(e[12]=s("span",{class:"mr-3 text-base"},"ðŸ‡¹ðŸ‡·",-1)),e[13]||(e[13]=M(" TÃ¼rkÃ§e ",-1)),g.value==="tr"?(a(),d("span",Qt,"âœ“")):I("",!0)])]),_:1}),n(w,{onClick:e[3]||(e[3]=S=>A("sq"))},{default:u(()=>[s("div",Zt,[e[14]||(e[14]=s("span",{class:"mr-3 text-base"},"ðŸ‡¦ðŸ‡±",-1)),e[15]||(e[15]=M(" Shqip ",-1)),g.value==="sq"?(a(),d("span",es,"âœ“")):I("",!0)])]),_:1}),n(w,{onClick:e[4]||(e[4]=S=>A("sr"))},{default:u(()=>[s("div",ts,[e[16]||(e[16]=s("span",{class:"mr-3 text-base"},"ðŸ‡·ðŸ‡¸",-1)),e[17]||(e[17]=M(" Ð¡Ñ€Ð¿ÑÐºÐ¸ ",-1)),g.value==="sr"?(a(),d("span",ss,"âœ“")):I("",!0)])]),_:1}),n(w,{onClick:e[5]||(e[5]=S=>A("sk"))},{default:u(()=>[s("div",ns,[e[18]||(e[18]=s("span",{class:"mr-3 text-base"},"ðŸ‡¸ðŸ‡°",-1)),e[19]||(e[19]=M(" SlovenÄina ",-1)),g.value==="sk"?(a(),d("span",as,"âœ“")):I("",!0)])]),_:1}),n(w,{onClick:e[6]||(e[6]=S=>A("hr"))},{default:u(()=>[s("div",os,[e[20]||(e[20]=s("span",{class:"mr-3 text-base"},"ðŸ‡­ðŸ‡·",-1)),e[21]||(e[21]=M(" Hrvatski ",-1)),g.value==="hr"?(a(),d("span",rs,"âœ“")):I("",!0)])]),_:1}),n(w,{onClick:e[7]||(e[7]=S=>A("de"))},{default:u(()=>[s("div",ls,[e[22]||(e[22]=s("span",{class:"mr-3 text-base"},"ðŸ‡©ðŸ‡ª",-1)),e[23]||(e[23]=M(" Deutsch ",-1)),g.value==="de"?(a(),d("span",is,"âœ“")):I("",!0)])]),_:1})]),_:1})]),s("li",cs,[n(b,{"width-class":"w-48"},{activator:u(()=>[s("img",{src:v.value,class:"block w-8 h-8 rounded md:h-9 md:w-9 object-cover"},null,8,us)]),default:u(()=>[n(m,{to:"/admin/settings/account-settings"},{default:u(()=>[n(w,null,{default:u(()=>[n(C,{name:"CogIcon",class:"w-5 h-5 mr-3 text-gray-400 group-hover:text-gray-500","aria-hidden":"true"}),M(" "+f(c.$t("navigation.settings")),1)]),_:1})]),_:1}),n(w,{onClick:E},{default:u(()=>[n(C,{name:"ArrowRightOnRectangleIcon",class:"w-5 h-5 mr-3 text-gray-400 group-hover:text-gray-500","aria-hidden":"true"}),M(" "+f(c.$t("navigation.logout")),1)]),_:1})]),_:1})])])])}}},ms={class:"relative flex flex-col flex-1 w-full max-w-xs bg-white"},ps={class:"absolute top-0 right-0 pt-2 -mr-12"},fs={class:"flex-1 h-0 pt-5 pb-4 overflow-y-auto"},_s={class:"flex items-center shrink-0 px-4 mb-6"},ys={class:"hidden w-56 h-screen pb-32 overflow-y-auto bg-white border-r border-gray-200 border-solid xl:w-64 md:fixed md:flex md:flex-col md:inset-y-0 pt-16"},hs={__name:"TheSiteSidebar",setup(B){const p=ee(),o=X();function l(x){return p.path.indexOf(x)>-1}return(x,y)=>{const g=k("BaseIcon"),v=k("router-link");return a(),d(R,null,[n(t(Ve),{as:"template",show:t(o).isSidebarOpen},{default:u(()=>[n(t(Ue),{as:"div",class:"fixed inset-0 z-40 flex md:hidden",onClose:y[3]||(y[3]=i=>t(o).setSidebarVisibility(!1))},{default:u(()=>[n(t(se),{as:"template",enter:"transition-opacity ease-linear duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"transition-opacity ease-linear duration-300","leave-from":"opacity-100","leave-to":"opacity-0"},{default:u(()=>[n(t(Le),{class:"fixed inset-0 bg-gray-600 bg-opacity-75"})]),_:1}),n(t(se),{as:"template",enter:"transition ease-in-out duration-300","enter-from":"-translate-x-full","enter-to":"translate-x-0",leave:"transition ease-in-out duration-300","leave-from":"translate-x-0","leave-to":"-translate-x-full"},{default:u(()=>[s("div",ms,[n(t(se),{as:"template",enter:"ease-in-out duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"ease-in-out duration-300","leave-from":"opacity-100","leave-to":"opacity-0"},{default:u(()=>[s("div",ps,[s("button",{class:"flex items-center justify-center w-10 h-10 ml-1 rounded-full focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white",onClick:y[0]||(y[0]=i=>t(o).setSidebarVisibility(!1))},[y[4]||(y[4]=s("span",{class:"sr-only"},"Close sidebar",-1)),n(g,{name:"XMarkIcon",class:"w-6 h-6 text-white","aria-hidden":"true"})])])]),_:1}),s("div",fs,[s("div",_s,[n(pe,{class:"block h-16 w-auto",variant:"clear",alt:"Facturino Logo"})]),(a(!0),d(R,null,T(t(o).menuGroups,i=>(a(),d("nav",{key:i,class:"mt-5 space-y-1"},[(a(!0),d(R,null,T(i,r=>(a(),V(v,{key:r.name,to:r.link,class:j([l(r.link)?"text-primary-500 border-primary-500 bg-gray-100 ":"text-black","cursor-pointer px-0 pl-4 py-3 border-transparent flex items-center border-l-4 border-solid text-sm not-italic font-medium"]),onClick:y[2]||(y[2]=$=>t(o).setSidebarVisibility(!1))},{default:u(()=>[n(g,{name:r.icon,class:j([l(r.link)?"text-primary-500 ":"text-gray-400","mr-4 shrink-0 h-5 w-5"]),onClick:y[1]||(y[1]=$=>t(o).setSidebarVisibility(!1))},null,8,["name","class"]),M(" "+f(x.$t(r.title)),1)]),_:2},1032,["to","class"]))),128))]))),128))])])]),_:1}),y[5]||(y[5]=s("div",{class:"shrink-0 w-14"},null,-1))]),_:1,__:[5]})]),_:1},8,["show"]),s("div",ys,[(a(!0),d(R,null,T(t(o).menuGroups,i=>(a(),d("div",{key:i,class:"p-0 m-0 mt-6 list-none"},[(a(!0),d(R,null,T(i,r=>(a(),V(v,{key:r,to:r.link,class:j([l(r.link)?"text-primary-500 border-primary-500 bg-gray-100 ":"text-black","cursor-pointer px-0 pl-6 hover:bg-gray-50 py-3 group flex items-center border-l-4 border-solid text-sm not-italic font-medium"])},{default:u(()=>[n(g,{name:r.icon,class:j([l(r.link)?"text-primary-500 group-hover:text-primary-500 ":"text-gray-400 group-hover:text-black","mr-4 shrink-0 h-5 w-5 "])},null,8,["name","class"]),M(" "+f(x.$t(r.title)),1)]),_:2},1032,["to","class"]))),128))]))),128))])],64)}}},gs={class:"font-medium text-lg text-left"},vs={class:"mt-2 text-sm leading-snug text-gray-500",style:{"max-width":"680px"}},bs={class:"text-gray-500 sm:text-sm"},xs={class:"text-gray-400 text-xs mt-2 font-light"},ws={slot:"footer",class:"z-0 flex justify-end mt-4 pt-4 border-t border-gray-200 border-solid border-modal-bg"},$s={__name:"ExchangeRateBulkUpdate",emits:["update"],setup(B,{emit:p}){const o=fe();Re();const l=Q(),{t:x,tm:y}=H.useI18n();let g=L(!1);L(!1);const v={exchange_rate:{required:G.withMessage(x("validation.required"),J),decimal:G.withMessage(x("validation.valid_exchange_rate"),Te)}},i=ue(),r=p;async function $(){if(i.value.$touch(),i.value.$invalid)return!0;g.value=!0;let _=o.bulkCurrencies.map(U=>({id:U.id,exchange_rate:U.exchange_rate})),E=await o.updateBulkExchangeRate({currencies:_});E.data.success&&r("update",E.data.success),g.value=!1}return(_,E)=>{const U=k("BaseInput"),h=k("BaseInputGroup"),A=k("BaseButton"),c=k("BaseCard");return a(),V(c,null,{default:u(()=>[s("h6",gs,f(_.$t("settings.exchange_rate.title")),1),s("p",vs,f(_.$t("settings.exchange_rate.description",{currency:t(l).selectedCompanyCurrency.name})),1),s("form",{action:"",onSubmit:ne($,["prevent"])},[(a(!0),d(R,null,T(t(o).bulkCurrencies,(e,m)=>(a(),V(t(Oe),{key:m,state:e,rules:v},{default:u(({v:C})=>[n(h,{class:"my-5",label:`${e.code} to ${t(l).selectedCompanyCurrency.code}`,error:C.exchange_rate.$error&&C.exchange_rate.$errors[0].$message,required:""},{default:u(()=>[n(U,{modelValue:e.exchange_rate,"onUpdate:modelValue":w=>e.exchange_rate=w,addon:`1 ${e.code} =`,invalid:C.exchange_rate.$error,onInput:w=>C.exchange_rate.$touch()},{right:u(()=>[s("span",bs,f(t(l).selectedCompanyCurrency.code),1)]),_:2},1032,["modelValue","onUpdate:modelValue","addon","invalid","onInput"]),s("span",xs,f(_.$t("settings.exchange_rate.exchange_help_text",{currency:e.code,baseCurrency:t(l).selectedCompanyCurrency.code})),1)]),_:2},1032,["label","error"])]),_:2},1032,["state"]))),128)),s("div",ws,[n(A,{loading:t(g),variant:"primary",type:"submit"},{default:u(()=>[M(f(_.$t("general.save")),1)]),_:1},8,["loading"])])],32)]),_:1})}}},ks={__name:"ExchangeRateBulkUpdateModal",setup(B){const p=Z(),o=N(()=>p.active&&p.componentName==="ExchangeRateBulkUpdateModal");function l(){p.closeModal()}return(x,y)=>{const g=k("BaseModal");return a(),V(g,{show:o.value},{default:u(()=>[n($s,{onUpdate:y[0]||(y[0]=v=>l())})]),_:1},8,["show"])}}},Cs={key:0,class:"h-full"},Ss={class:"h-screen h-screen-ios overflow-y-auto md:pl-56 xl:pl-64 min-h-0"},Is={class:"pt-16 pb-16"},Bs={key:1,class:"h-full flex items-center justify-center"},Rs={__name:"LayoutBasic",setup(B){const p=X(),o=ee(),l=ae(),x=K(),y=Z(),{t:g}=H.useI18n(),v=fe(),i=Q(),r=N(()=>p.isAppLoaded);return de(()=>{p.bootstrap().then($=>{if(o.meta.ability&&l.currentAbilities&&l.currentAbilities.length>0&&!l.hasAbilities(o.meta.ability)){x.push({name:"account.settings"});return}if(o.meta.isPartner&&l.currentUser){if(!(l.currentUser.role==="partner"||l.currentUser.account_type==="accountant"||l.currentUser.is_partner)){x.push({name:"dashboard"});return}return}if(o.meta.isOwner&&l.currentUser&&l.currentUser.is_owner===!1){x.push({name:"account.settings"});return}$.data.current_company_settings.bulk_exchange_rate_configured==="NO"&&v.fetchBulkCurrencies().then(_=>{if(_.data.currencies.length)y.openModal({componentName:"ExchangeRateBulkUpdateModal",size:"sm"});else{let E={settings:{bulk_exchange_rate_configured:"YES"}};i.updateCompanySettings({data:E})}})})}),($,_)=>{const E=k("router-view");return r.value?(a(),d("div",Cs,[n(Ne),n(ds),n(hs),n(ks),s("main",Ss,[s("div",Is,[n(E)])])])):(a(),d("div",Bs,_[0]||(_[0]=[s("div",{class:"text-primary-500"},"Loading...",-1)])))}}};export{Rs as default};
