import{v as D,u as V,e as g,k as j,K as z,w as u,s as b,r as c,o as a,a as i,b as t,c as o,Q as y,R as f,t as n,q as k}from"./main-C3HD31Qx.js";const A={class:"mt-6 space-y-4"},E={key:0,class:"space-y-2"},F={key:1,class:"text-center py-12"},H={class:"text-gray-500"},L={key:2,class:"space-y-4"},T={class:"flex items-start justify-between"},q={class:"flex-1"},K={class:"text-lg font-medium text-gray-900"},M={class:"text-sm text-gray-600 mt-1"},O={class:"text-xs text-gray-500 mt-2"},Q={class:"mt-3"},R={class:"text-xs font-medium text-gray-700"},G={class:"flex flex-wrap gap-1 mt-1"},U={class:"flex gap-2 ml-4"},Y={__name:"PartnerInvitations",setup(W){const{t:m}=D.useI18n(),h=V(),v=g(!0),_=g(null),r=g([]);async function w(){v.value=!0;try{const e=await b.get("/invitations/pending-for-partner");r.value=e.data}catch(e){console.error("Failed to load invitations:",e)}finally{v.value=!1}}async function x(e,l){_.value=e;try{await b.post(`/invitations/${e}/respond`,{action:l}),h.showNotification({type:"success",message:m(l==="accept"?"console.invitations.accepted":"console.invitations.declined")}),r.value=r.value.filter(d=>d.id!==e)}catch{h.showNotification({type:"error",message:m("console.invitations.response_failed")})}finally{_.value=null}}function $(e){try{const l=typeof e=="string"?JSON.parse(e):e;return Array.isArray(l)?l:[]}catch{return[]}}function I(e){return new Date(e).toLocaleDateString()}return j(()=>{w()}),(e,l)=>{const d=c("BaseBreadcrumbItem"),N=c("BaseBreadcrumb"),C=c("BasePageHeader"),P=c("BaseIcon"),B=c("BaseButton"),S=c("BasePage");return a(),z(S,null,{default:u(()=>[i(C,{title:e.$t("console.invitations.title")},{default:u(()=>[i(N,null,{default:u(()=>[i(d,{title:e.$t("general.home"),to:"/admin/console"},null,8,["title"]),i(d,{title:e.$t("console.invitations.title"),to:"#",active:""},null,8,["title"])]),_:1})]),_:1},8,["title"]),t("div",A,[v.value?(a(),o("div",E,[(a(),o(y,null,f(3,s=>t("div",{key:s,class:"h-20 bg-gray-200 rounded animate-pulse"})),64))])):r.value.length===0?(a(),o("div",F,[i(P,{name:"InboxIcon",class:"w-16 h-16 mx-auto text-gray-400 mb-4"}),t("p",H,n(e.$t("console.invitations.no_invitations")),1)])):(a(),o("div",L,[(a(!0),o(y,null,f(r.value,s=>(a(),o("div",{key:s.id,class:"p-6 bg-white border border-gray-200 rounded-lg shadow"},[t("div",T,[t("div",q,[t("h4",K,n(s.company_name),1),t("p",M,n(e.$t("console.invitations.invited_by"))+": "+n(s.inviter_name),1),t("p",O,n(I(s.invited_at)),1),t("div",Q,[t("span",R,n(e.$t("partners.permissions"))+":",1),t("div",G,[(a(!0),o(y,null,f($(s.permissions),p=>(a(),o("span",{key:p,class:"px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded"},n(p),1))),128))])])]),t("div",U,[i(B,{variant:"primary",size:"sm",onClick:p=>x(s.id,"accept"),loading:_.value===s.id},{default:u(()=>[k(n(e.$t("general.accept")),1)]),_:2},1032,["onClick","loading"]),i(B,{variant:"danger-outline",size:"sm",onClick:p=>x(s.id,"decline"),loading:_.value===s.id},{default:u(()=>[k(n(e.$t("general.decline")),1)]),_:2},1032,["onClick","loading"])])])]))),128))]))])]),_:1})}}};export{Y as default};
