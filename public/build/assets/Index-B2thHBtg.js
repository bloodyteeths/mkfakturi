import{v as W,bg as j,O as q,e as E,I as x,j as H,k as O,K as _,w as l,r as n,o as u,a,ag as C,c as z,L as K,q as c,t as p,M as f,aB as P,l as o,V as B,a8 as $}from"./main-C3HD31Qx.js";import{_ as X}from"./SupplierIndexDropdown-CsdKKS9k.js";const J={key:1,class:"relative table-container"},ee={__name:"Index",setup(Q){const{t:b}=W.useI18n(),r=j(),g=q(),d=E(!1),I=E(null),s=x({search:"",page:1,limit:10,orderByField:void 0,orderBy:void 0}),F=H(()=>[{key:"name",label:b("suppliers.name")},{key:"email",label:b("suppliers.email")},{key:"tax_id",label:b("suppliers.tax_id")},{key:"actions",label:"",sortable:!1,tdClass:"text-right text-sm font-medium pl-0",thClass:"pl-0"}]);function y(e){s.page=(e==null?void 0:e.page)??s.page,s.limit=(e==null?void 0:e.limit)??s.limit,e!=null&&e.orderByField&&(s.orderByField=e.orderByField,s.orderBy=e.orderBy);const i={search:s.search,page:s.page,limit:s.limit,orderByField:s.orderByField,orderBy:s.orderBy};r.fetchSuppliers(i)}function k(){s.search="",y()}function S(){d.value&&k(),d.value=!d.value}function T(){y()}function w(){return g.hasAbilities([B.DELETE_SUPPLIER,B.EDIT_SUPPLIER,B.VIEW_SUPPLIER])}return O(()=>{y()}),(e,i)=>{const v=n("BaseBreadcrumbItem"),L=n("BaseBreadcrumb"),m=n("BaseIcon"),h=n("BaseButton"),V=n("BasePageHeader"),A=n("BaseInput"),R=n("BaseInputGroup"),U=n("BaseFilterWrapper"),D=n("BaseEmptyPlaceholder"),G=n("router-link"),M=n("BaseTable"),N=n("BasePage");return u(),_(N,null,{default:l(()=>[a(V,{title:e.$t("suppliers.title")},{actions:l(()=>[C(a(h,{variant:"primary-outline",onClick:S},{right:l(t=>[d.value?(u(),_(m,{key:1,name:"XMarkIcon",class:f(t.class)},null,8,["class"])):(u(),_(m,{key:0,name:"FunnelIcon",class:f(t.class)},null,8,["class"]))]),default:l(()=>[c(p(e.$t("general.filter"))+" ",1)]),_:1},512),[[P,o(r).supplierTotalCount]]),o(g).hasAbilities(o(B).CREATE_SUPPLIER)?(u(),_(h,{key:0,variant:"primary",class:"ml-4",onClick:i[0]||(i[0]=t=>e.$router.push("/admin/suppliers/create"))},{left:l(t=>[a(m,{name:"PlusIcon",class:f(t.class)},null,8,["class"])]),default:l(()=>[c(" "+p(e.$t("suppliers.new_supplier")),1)]),_:1})):K("",!0)]),default:l(()=>[a(L,null,{default:l(()=>[a(v,{title:e.$t("general.home"),to:"dashboard"},null,8,["title"]),a(v,{title:e.$t("suppliers.title"),to:"#",active:""},null,8,["title"])]),_:1})]),_:1},8,["title"]),C(a(U,{onClear:k},{default:l(()=>[a(R,{label:e.$t("suppliers.name")},{default:l(()=>[a(A,{modelValue:s.search,"onUpdate:modelValue":i[1]||(i[1]=t=>s.search=t)},{left:l(t=>[a(m,{name:"MagnifyingGlassIcon",class:f(t.class)},null,8,["class"])]),_:1},8,["modelValue"])]),_:1},8,["label"])]),_:1},512),[[P,d.value]]),!o(r).supplierTotalCount&&!o(r).isFetchingList?(u(),_(D,{key:0,title:e.$t("suppliers.no_suppliers"),description:e.$t("suppliers.empty_description")},$({_:2},[o(g).hasAbilities(o(B).CREATE_SUPPLIER)?{name:"actions",fn:l(()=>[a(h,{variant:"primary-outline",onClick:i[2]||(i[2]=t=>e.$router.push("/admin/suppliers/create"))},{left:l(t=>[a(m,{name:"PlusIcon",class:f(t.class)},null,8,["class"])]),default:l(()=>[c(" "+p(e.$t("suppliers.add_new_supplier")),1)]),_:1})]),key:"0"}:void 0]),1032,["title","description"])):(u(),z("div",J,[a(M,{ref_key:"tableComponent",ref:I,data:o(r).suppliers,columns:F.value,meta:{total:o(r).supplierTotalCount},loading:o(r).isFetchingList,onGetData:y},$({"cell-name":l(({row:t})=>[a(G,{to:{path:`/admin/suppliers/${t.data.id}/view`},class:"font-medium text-primary-500"},{default:l(()=>[c(p(t.data.name),1)]),_:2},1032,["to"])]),"cell-email":l(({row:t})=>[c(p(t.data.email||"-"),1)]),"cell-tax_id":l(({row:t})=>[c(p(t.data.tax_id||"-"),1)]),_:2},[w()?{name:"cell-actions",fn:l(({row:t})=>[a(X,{row:t.data,table:I.value,"load-data":T},null,8,["row","table"])]),key:"0"}:void 0]),1032,["data","columns","meta","loading"])]))]),_:1})}}};export{ee as default};
