import{u as Y}from"./auth-IeXQ28U8.js";import{bJ as j,j as k,k as V,ap as H,e as w,aH as Z,bK as ee,bL as $,bM as M,bN as B,bO as Q,bP as te,bQ as U,bR as T,bS as A,bT as se,bU as K,a7 as z,v as ae,N as X,n as oe,P as re,r as C,K as D,o as v,w as f,b as a,a as d,l as u,c as O,_ as le,Q as N,R as E,M as L,q as I,t as x,bV as ne,bW as ue,bX as ie,bY as ce,bZ as de,b_ as pe,L as fe}from"./main-DpDYmbyp.js";import{u as q}from"./global-DA0cOODk.js";import{N as me}from"./NotificationRoot-D5aCLmC8.js";var ve=(s=>(s[s.Open=0]="Open",s[s.Closed=1]="Closed",s))(ve||{});let F=Symbol("DisclosureContext");function R(s){let c=z(F,null);if(c===null){let p=new Error(`<${s} /> is missing a parent <Disclosure /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(p,R),p}return c}let G=Symbol("DisclosurePanelContext");function ge(){return z(G,null)}let be=j({name:"Disclosure",props:{as:{type:[Object,String],default:"template"},defaultOpen:{type:[Boolean],default:!1}},setup(s,{slots:c,attrs:p}){let t=w(s.defaultOpen?0:1),e=w(null),g=w(null),r={buttonId:w(`headlessui-disclosure-button-${A()}`),panelId:w(`headlessui-disclosure-panel-${A()}`),disclosureState:t,panel:e,button:g,toggleDisclosure(){t.value=K(t.value,{0:1,1:0})},closeDisclosure(){t.value!==1&&(t.value=1)},close(o){r.closeDisclosure();let m=o?o instanceof HTMLElement?o:o.value instanceof HTMLElement?$(o):$(r.button):$(r.button);m==null||m.focus()}};return Q(F,r),se(k(()=>K(t.value,{0:U.Open,1:U.Closed}))),()=>{let{defaultOpen:o,...m}=s,b={open:t.value===0,close:r.close};return M({theirProps:m,ourProps:{},slot:b,slots:c,attrs:p,name:"Disclosure"})}}}),ye=j({name:"DisclosureButton",props:{as:{type:[Object,String],default:"button"},disabled:{type:[Boolean],default:!1},id:{type:String,default:null}},setup(s,{attrs:c,slots:p,expose:t}){let e=R("DisclosureButton"),g=ge(),r=k(()=>g===null?!1:g.value===e.panelId.value);V(()=>{r.value||s.id!==null&&(e.buttonId.value=s.id)}),H(()=>{r.value||(e.buttonId.value=null)});let o=w(null);t({el:o,$el:o}),r.value||Z(()=>{e.button.value=o.value});let m=ee(k(()=>({as:s.as,type:c.type})),o);function b(){var l;s.disabled||(r.value?(e.toggleDisclosure(),(l=$(e.button))==null||l.focus()):e.toggleDisclosure())}function h(l){var n;if(!s.disabled)if(r.value)switch(l.key){case B.Space:case B.Enter:l.preventDefault(),l.stopPropagation(),e.toggleDisclosure(),(n=$(e.button))==null||n.focus();break}else switch(l.key){case B.Space:case B.Enter:l.preventDefault(),l.stopPropagation(),e.toggleDisclosure();break}}function _(l){switch(l.key){case B.Space:l.preventDefault();break}}return()=>{var l;let n={open:e.disclosureState.value===0},{id:y,...S}=s,P=r.value?{ref:o,type:m.value,onClick:b,onKeydown:h}:{id:(l=e.buttonId.value)!=null?l:y,ref:o,type:m.value,"aria-expanded":e.disclosureState.value===0,"aria-controls":e.disclosureState.value===0||$(e.panel)?e.panelId.value:void 0,disabled:s.disabled?!0:void 0,onClick:b,onKeydown:h,onKeyup:_};return M({ourProps:P,theirProps:S,slot:n,attrs:c,slots:p,name:"DisclosureButton"})}}}),he=j({name:"DisclosurePanel",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:null}},setup(s,{attrs:c,slots:p,expose:t}){let e=R("DisclosurePanel");V(()=>{s.id!==null&&(e.panelId.value=s.id)}),H(()=>{e.panelId.value=null}),t({el:e.panel,$el:e.panel}),Q(G,e.panelId);let g=te(),r=k(()=>g!==null?(g.value&U.Open)===U.Open:e.disclosureState.value===0);return()=>{var o;let m={open:e.disclosureState.value===0,close:e.close},{id:b,...h}=s,_={id:(o=e.panelId.value)!=null?o:b,ref:e.panel};return M({ourProps:_,theirProps:h,slot:m,attrs:c,slots:p,features:T.RenderStrategy|T.Static,visible:r.value,name:"DisclosurePanel"})}}});const _e={class:"mx-auto px-8"},xe={class:"flex justify-between h-16 w-full"},we={class:"flex"},ke={class:"shrink-0 flex items-center"},Se=["href"],De=["src"],$e={class:"hidden sm:-my-px sm:ml-6 sm:flex sm:space-x-8"},Be={class:"hidden sm:ml-6 sm:flex sm:items-center"},Ie=["src"],Oe={class:"-mr-2 flex items-center sm:hidden"},Pe={class:"pt-2 pb-3 space-y-1"},Ce={class:"pt-4 pb-3 border-t border-gray-200"},Ue={class:"flex items-center px-4"},Ne={class:"shrink-0"},Ee=["src"],Le={class:"ml-3"},je={class:"text-base font-medium text-gray-800"},Me={class:"text-sm font-medium text-gray-500"},Re={class:"mt-3 space-y-1"},Te={__name:"TheSiteHeader",setup(s){const{t:c}=ae.useI18n(),p=X(),t=q(),e=[{title:c("navigation.logout"),link:`/${t.companySlug}/customer/login`}],g=Y(),r=oe(),o=w(""),m=k(()=>t.currentUser&&t.currentUser.avatar!==0?t.currentUser.avatar:b());function b(){return new URL("/build/assets/default-avatar-DiPf6Xay.jpg",import.meta.url)}re(p,n=>{o.value=n.path},{immediate:!0});const h=k(()=>window.customer_logo?window.customer_logo:!1);function _(n){return p.path.indexOf(n)>-1}function l(){g.logout(t.companySlug).then(n=>{n&&r.push({name:"customer.login"})})}return(n,y)=>{const S=C("router-link"),P=C("BaseDropdownItem"),J=C("BaseDropdown");return v(),D(u(be),{as:"nav",class:"bg-white shadow-sm fixed top-0 left-0 z-20 w-full"},{default:f(({open:W})=>[a("div",_e,[a("div",xe,[a("div",we,[a("div",ke,[a("a",{href:`/${u(t).companySlug}/customer/dashboard`,class:"float-none text-lg not-italic font-black tracking-wider text-white brand-main md:float-left font-base"},[h.value?(v(),O("img",{key:1,src:h.value,class:"h-6"},null,8,De)):(v(),D(le,{key:0,class:"h-6"}))],8,Se)]),a("div",$e,[(v(!0),O(N,null,E(u(t).mainMenu,i=>(v(),D(S,{key:i.title,to:`/${u(t).companySlug}${i.link}`,class:L([_(i.link)?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium"])},{default:f(()=>[I(x(n.$t(i.title)),1)]),_:2},1032,["to","class"]))),128))])]),a("div",Be,[y[0]||(y[0]=a("button",{type:"button",class:"bg-white p-1 rounded-full text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"},null,-1)),d(u(ne),{as:"div",class:"ml-3 relative"},{default:f(()=>[d(J,{"width-class":"w-48"},{activator:f(()=>[d(u(ce),{class:"bg-white flex text-sm rounded-full focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"},{default:f(()=>[a("img",{class:"h-8 w-8 rounded-full",src:m.value,alt:""},null,8,Ie)]),_:1})]),default:f(()=>[d(S,{to:{name:"customer.profile"}},{default:f(()=>[d(P,null,{default:f(()=>[d(u(ue),{class:"w-5 h-5 mr-3 text-gray-400 group-hover:text-gray-500","aria-hidden":"true"}),I(" "+x(n.$t("navigation.settings")),1)]),_:1})]),_:1}),d(P,{onClick:l},{default:f(()=>[d(u(ie),{class:"w-5 h-5 mr-3 text-gray-400 group-hover:text-gray-500","aria-hidden":"true"}),I(" "+x(n.$t("navigation.logout")),1)]),_:1})]),_:1})]),_:1})]),a("div",Oe,[d(u(ye),{class:"bg-white inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"},{default:f(()=>[y[1]||(y[1]=a("span",{class:"sr-only"},"Open main menu",-1)),W?(v(),D(u(pe),{key:1,class:"block h-6 w-6","aria-hidden":"true"})):(v(),D(u(de),{key:0,class:"block h-6 w-6","aria-hidden":"true"}))]),_:2,__:[1]},1024)])])]),d(u(he),{class:"sm:hidden"},{default:f(()=>[a("div",Pe,[(v(!0),O(N,null,E(u(t).mainMenu,i=>(v(),D(S,{key:i.title,to:`/${u(t).companySlug}${i.link}`,class:L([_(i.link)?"bg-primary-50 border-primary-500 text-primary-700":"border-transparent text-gray-600 hover:bg-gray-50 hover:border-gray-300 hover:text-gray-800","block pl-3 pr-4 py-2 border-l-4 text-base font-medium"]),"aria-current":i.current?"page":void 0},{default:f(()=>[I(x(n.$t(i.title)),1)]),_:2},1032,["to","class","aria-current"]))),128))]),a("div",Ce,[a("div",Ue,[a("div",Ne,[a("img",{class:"h-10 w-10 rounded-full",src:m.value,alt:""},null,8,Ee)]),a("div",Le,[a("div",je,x(u(t).currentUser.title),1),a("div",Me,x(u(t).currentUser.email),1)]),y[2]||(y[2]=a("button",{type:"button",class:"ml-auto bg-white shrink-0 p-1 rounded-full text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"},null,-1))]),a("div",Re,[(v(),O(N,null,E(e,i=>d(S,{key:i.title,to:i.link,class:L([_(i.link)?"bg-primary-50 border-primary-500 text-primary-700":"border-transparent text-gray-600 hover:bg-gray-50 hover:border-gray-300 hover:text-gray-800","block pl-3 pr-4 py-2 border-l-4 text-base font-medium"])},{default:f(()=>[I(x(n.$t(i.title)),1)]),_:2},1032,["to","class"])),64))])])]),_:1})]),_:1})}}},Ae={key:0,class:"h-full"},Ke={class:"mt-16 pb-16 h-screen overflow-y-auto min-h-0"},Xe={__name:"LayoutBasic",setup(s){const c=q(),p=X(),t=k(()=>c.isAppLoaded);e();async function e(){await c.bootstrap(p.params.company)}return(g,r)=>{const o=C("router-view");return t.value?(v(),O("div",Ae,[d(me),d(Te),a("main",Ke,[d(o)])])):fe("",!0)}}};export{Xe as default};
