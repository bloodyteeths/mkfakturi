import{h as r}from"./auth-IeXQ28U8.js";import{s as i,u as d}from"./main-DpDYmbyp.js";const u={name:null,phone:null,address_street_1:null,address_street_2:null,city:null,state:null,country_id:null,zip:null,type:null},{defineStore:m}=window.pinia,h=m({id:"customerUserStore",state:()=>({customers:[],userForm:{avatar:null,name:"",email:"",password:"",company:"",confirm_password:"",billing:{...u},shipping:{...u}}}),actions:{copyAddress(){this.userForm.shipping={...this.userForm.billing,type:"shipping"}},fetchCurrentUser(){const a=l();return new Promise((n,t)=>{i.get(`/${a.companySlug}/customer/me`).then(o=>{Object.assign(this.userForm,o.data.data),n(o)}).catch(o=>{r(o),t(o)})})},updateCurrentUser({data:a,message:n}){const t=l();return new Promise((o,e)=>{i.post(`/${t.companySlug}/customer/profile`,a).then(s=>{this.userForm=s.data.data,t.currentUser=s.data.data,o(s),n&&d(!0).showNotification({type:"success",message:n})}).catch(s=>{r(s),e(s)})})}}}),{defineStore:p}=window.pinia,{global:c}=window.i18n,l=p({id:"CustomerPortalGlobalStore",state:()=>({languages:[],currency:null,isAppLoaded:!1,countries:[],getDashboardDataLoaded:!1,currentUser:null,companySlug:"",mainMenu:null,enabledModules:[]}),actions:{bootstrap(a){this.companySlug=a;const n=h();return new Promise((t,o)=>{i.get(`/${a}/customer/bootstrap`).then(e=>{this.currentUser=e.data.data,this.mainMenu=e.data.meta.menu,this.currency=e.data.data.currency,this.enabledModules=e.data.meta.modules,Object.assign(n.userForm,e.data.data),typeof c.locale!="string"&&(c.locale.value=e.data.meta.current_company_language||"en"),this.isAppLoaded=!0,t(e)}).catch(e=>{r(e),o(e)})})},fetchCountries(){return new Promise((a,n)=>{this.countries.length?a(this.countries):i.get(`/${this.companySlug}/customer/countries`).then(t=>{this.countries=t.data.data,a(t)}).catch(t=>{r(t),n(t)})})}}});export{h as a,l as u};
