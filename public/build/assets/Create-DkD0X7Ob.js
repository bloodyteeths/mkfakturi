import{v as L,u as R,e as A,j as y,I as D,i as H,k as z,K as J,w as r,s as B,N as K,n as O,r as u,f as g,h as Q,g as w,J as W,a2 as X,o as I,b as l,m as Y,a as t,q,t as _,M as Z,c as ee,L as ae,l as i}from"./main-rC5xHABW.js";const te={class:"flex items-center justify-end space-x-3"},se={class:"grid grid-cols-5 gap-4 mb-8"},ne={class:"col-span-5 text-lg font-semibold text-left lg:col-span-1"},re={class:"grid grid-cols-5 gap-4 mb-8"},oe={class:"col-span-5 text-lg font-semibold text-left lg:col-span-1"},le={class:"grid grid-cols-5 gap-4 mb-8"},ie={class:"col-span-5 text-lg font-semibold text-left lg:col-span-1"},de={value:"pending"},pe={value:"under_review"},me={value:"approved"},ue={value:"rejected"},ce={key:0,class:"grid grid-cols-5 gap-4 mb-8"},_e={class:"col-span-5 text-lg font-semibold text-left lg:col-span-1"},fe={class:"grid grid-cols-5 gap-4"},ge={class:"col-span-5 text-lg font-semibold text-left lg:col-span-1"},$e={__name:"Create",setup(be){const V=K(),h=O(),{t:m}=L.useI18n(),v=R(),$=A(!1),f=y(()=>!!V.params.id),k=y(()=>f.value?m("partners.edit_partner"):m("partners.new_partner")),s=D({name:"",email:"",phone:"",company_name:"",tax_id:"",registration_number:"",bank_account:"",bank_name:"",commission_rate:10,is_active:!0,kyc_status:"pending",notes:"",password:"",password_confirmation:""}),U=y(()=>{const a={partnerForm:{name:{required:g.withMessage(m("validation.required"),w)},email:{required:g.withMessage(m("validation.required"),w),email:g.withMessage(m("validation.email_incorrect"),Q)}}};return f.value||(a.partnerForm.password={required:g.withMessage(m("validation.required"),w),minLength:g.withMessage(m("validation.password_min_length",{min:8}),W(8))},a.partnerForm.password_confirmation={required:g.withMessage(m("validation.required"),w),sameAsPassword:g.withMessage(m("validation.password_confirmation_match"),X(s.password))}),a}),o=H(U,{partnerForm:s});async function M(){if(f.value)try{const e=(await B.get(`/partners/${V.params.id}`)).data;Object.keys(s).forEach(d=>{e[d]!==void 0&&(s[d]=e[d])})}catch{v.showNotification({type:"error",message:m("partners.fetch_failed")}),h.push("/admin/partners")}}async function N(){var a,e;if(o.value.$touch(),!o.value.$invalid){$.value=!0;try{const d={...s};f.value&&(delete d.password,delete d.password_confirmation),f.value?(await B.put(`/partners/${V.params.id}`,d),v.showNotification({type:"success",message:m("partners.updated_successfully")})):(await B.post("/partners",d),v.showNotification({type:"success",message:m("partners.created_successfully")})),h.push("/admin/partners")}catch(d){v.showNotification({type:"error",message:((e=(a=d.response)==null?void 0:a.data)==null?void 0:e.message)||m("partners.save_failed")})}finally{$.value=!1}}}return z(()=>{M()}),(a,e)=>{const d=u("BaseBreadcrumbItem"),C=u("BaseBreadcrumb"),F=u("BaseButton"),S=u("BaseIcon"),P=u("BasePageHeader"),c=u("BaseInput"),p=u("BaseInputGroup"),b=u("BaseInputGrid"),j=u("BaseSelect"),E=u("BaseSwitch"),G=u("BaseTextarea"),T=u("BaseCard"),x=u("BasePage");return I(),J(x,null,{default:r(()=>[l("form",{onSubmit:Y(N,["prevent"])},[t(P,{title:k.value},{actions:r(()=>[l("div",te,[t(F,{variant:"primary-outline",type:"button",onClick:e[0]||(e[0]=n=>a.$router.push("/admin/partners"))},{default:r(()=>[q(_(a.$t("general.cancel")),1)]),_:1}),t(F,{type:"submit",loading:$.value,disabled:$.value},{left:r(n=>[t(S,{name:"CheckIcon",class:Z(n.class)},null,8,["class"])]),default:r(()=>[q(" "+_(f.value?a.$t("partners.update_partner"):a.$t("partners.save_partner")),1)]),_:1},8,["loading","disabled"])])]),default:r(()=>[t(C,null,{default:r(()=>[t(d,{title:a.$t("general.home"),to:"dashboard"},null,8,["title"]),t(d,{title:a.$t("partners.title",2),to:"/admin/partners"},null,8,["title"]),t(d,{title:k.value,to:"#",active:""},null,8,["title"])]),_:1})]),_:1},8,["title"]),t(T,{class:"mt-5"},{default:r(()=>[l("div",se,[l("h6",ne,_(a.$t("partners.basic_info")),1),t(b,{class:"col-span-5 lg:col-span-4"},{default:r(()=>[t(p,{label:a.$t("partners.name"),required:"",error:i(o).partnerForm.name.$error&&i(o).partnerForm.name.$errors[0].$message},{default:r(()=>[t(c,{modelValue:s.name,"onUpdate:modelValue":e[1]||(e[1]=n=>s.name=n),type:"text",name:"name",invalid:i(o).partnerForm.name.$error,onInput:e[2]||(e[2]=n=>i(o).partnerForm.name.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["label","error"]),t(p,{label:a.$t("partners.email"),required:"",error:i(o).partnerForm.email.$error&&i(o).partnerForm.email.$errors[0].$message},{default:r(()=>[t(c,{modelValue:s.email,"onUpdate:modelValue":e[3]||(e[3]=n=>s.email=n),type:"email",name:"email",invalid:i(o).partnerForm.email.$error,onInput:e[4]||(e[4]=n=>i(o).partnerForm.email.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["label","error"]),t(p,{label:a.$t("partners.phone")},{default:r(()=>[t(c,{modelValue:s.phone,"onUpdate:modelValue":e[5]||(e[5]=n=>s.phone=n),type:"text",name:"phone"},null,8,["modelValue"])]),_:1},8,["label"]),t(p,{label:a.$t("partners.company_name")},{default:r(()=>[t(c,{modelValue:s.company_name,"onUpdate:modelValue":e[6]||(e[6]=n=>s.company_name=n),type:"text",name:"company_name"},null,8,["modelValue"])]),_:1},8,["label"]),t(p,{label:a.$t("partners.tax_id")},{default:r(()=>[t(c,{modelValue:s.tax_id,"onUpdate:modelValue":e[7]||(e[7]=n=>s.tax_id=n),type:"text",name:"tax_id"},null,8,["modelValue"])]),_:1},8,["label"]),t(p,{label:a.$t("partners.registration_number")},{default:r(()=>[t(c,{modelValue:s.registration_number,"onUpdate:modelValue":e[8]||(e[8]=n=>s.registration_number=n),type:"text",name:"registration_number"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),l("div",re,[l("h6",oe,_(a.$t("partners.banking_info")),1),t(b,{class:"col-span-5 lg:col-span-4"},{default:r(()=>[t(p,{label:a.$t("partners.bank_account")},{default:r(()=>[t(c,{modelValue:s.bank_account,"onUpdate:modelValue":e[9]||(e[9]=n=>s.bank_account=n),type:"text",name:"bank_account"},null,8,["modelValue"])]),_:1},8,["label"]),t(p,{label:a.$t("partners.bank_name")},{default:r(()=>[t(c,{modelValue:s.bank_name,"onUpdate:modelValue":e[10]||(e[10]=n=>s.bank_name=n),type:"text",name:"bank_name"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),l("div",le,[l("h6",ie,_(a.$t("partners.commission_status")),1),t(b,{class:"col-span-5 lg:col-span-4"},{default:r(()=>[t(p,{label:a.$t("partners.commission_rate"),"helper-text":a.$t("partners.commission_rate_help")},{default:r(()=>[t(c,{modelValue:s.commission_rate,"onUpdate:modelValue":e[11]||(e[11]=n=>s.commission_rate=n),type:"number",name:"commission_rate",step:"0.01",min:"0",max:"100"},{right:r(()=>e[19]||(e[19]=[l("span",{class:"text-gray-500"},"%",-1)])),_:1},8,["modelValue"])]),_:1},8,["label","helper-text"]),t(p,{label:a.$t("partners.kyc_status"),required:""},{default:r(()=>[t(j,{modelValue:s.kyc_status,"onUpdate:modelValue":e[12]||(e[12]=n=>s.kyc_status=n)},{default:r(()=>[l("option",de,_(a.$t("partners.kyc.pending")),1),l("option",pe,_(a.$t("partners.kyc.under_review")),1),l("option",me,_(a.$t("partners.kyc.approved")),1),l("option",ue,_(a.$t("partners.kyc.rejected")),1)]),_:1},8,["modelValue"])]),_:1},8,["label"]),t(p,{label:a.$t("general.status")},{default:r(()=>[t(E,{modelValue:s.is_active,"onUpdate:modelValue":e[13]||(e[13]=n=>s.is_active=n),label:s.is_active?a.$t("general.active"):a.$t("general.inactive")},null,8,["modelValue","label"])]),_:1},8,["label"])]),_:1})]),f.value?ae("",!0):(I(),ee("div",ce,[l("h6",_e,_(a.$t("partners.credentials")),1),t(b,{class:"col-span-5 lg:col-span-4"},{default:r(()=>[t(p,{label:a.$t("partners.password"),required:"",error:i(o).partnerForm.password.$error&&i(o).partnerForm.password.$errors[0].$message},{default:r(()=>[t(c,{modelValue:s.password,"onUpdate:modelValue":e[14]||(e[14]=n=>s.password=n),type:"password",name:"password",autocomplete:"new-password",invalid:i(o).partnerForm.password.$error,onInput:e[15]||(e[15]=n=>i(o).partnerForm.password.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["label","error"]),t(p,{label:a.$t("partners.password_confirmation"),required:"",error:i(o).partnerForm.password_confirmation.$error&&i(o).partnerForm.password_confirmation.$errors[0].$message},{default:r(()=>[t(c,{modelValue:s.password_confirmation,"onUpdate:modelValue":e[16]||(e[16]=n=>s.password_confirmation=n),type:"password",name:"password_confirmation",autocomplete:"new-password",invalid:i(o).partnerForm.password_confirmation.$error,onInput:e[17]||(e[17]=n=>i(o).partnerForm.password_confirmation.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["label","error"])]),_:1})])),l("div",fe,[l("h6",ge,_(a.$t("partners.notes")),1),t(b,{class:"col-span-5 lg:col-span-4"},{default:r(()=>[t(p,{label:a.$t("partners.internal_notes")},{default:r(()=>[t(G,{modelValue:s.notes,"onUpdate:modelValue":e[18]||(e[18]=n=>s.notes=n),rows:"4",placeholder:a.$t("partners.notes_placeholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1})])]),_:1})],32)]),_:1})}}};export{$e as default};
