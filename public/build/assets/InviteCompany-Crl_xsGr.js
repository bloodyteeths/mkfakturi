import{v as S,u as T,e as l,k as j,K as z,w as i,s as w,r as a,o as m,a as s,b as e,c as g,L as k,t as o,q as $,M,m as G}from"./main-C3HD31Qx.js";const H={class:"mt-6 grid grid-cols-1 gap-6 md:grid-cols-2"},Q={class:"p-6 bg-white border border-gray-200 rounded-lg shadow"},R={class:"text-lg font-medium text-gray-900 mb-4"},A={class:"text-sm text-gray-600 mb-4"},F={key:0,class:"flex items-center justify-center h-64"},K={key:1,class:"space-y-4"},U={class:"flex justify-center p-6 bg-gray-50 rounded"},J=["src"],O={class:"text-center"},W={class:"text-xs text-gray-500 mb-2"},X={class:"p-6 bg-white border border-gray-200 rounded-lg shadow"},Y={class:"text-lg font-medium text-gray-900 mb-4"},Z={class:"text-sm text-gray-600 mb-4"},ee={key:0,class:"space-y-4"},te={class:"pt-4 border-t border-gray-200"},oe={class:"text-sm font-medium text-gray-900 mb-3"},se={class:"mt-6 p-6 bg-white border border-gray-200 rounded-lg shadow"},ae={class:"text-lg font-medium text-gray-900 mb-4"},ne={class:"grid grid-cols-1 gap-4 md:grid-cols-3"},ie={class:"p-4 bg-gray-50 rounded"},le={class:"text-sm text-gray-500"},ce={class:"text-2xl font-bold text-primary-600"},re={class:"p-4 bg-gray-50 rounded"},de={class:"text-sm text-gray-500"},me={class:"text-2xl font-bold text-green-600"},_e={class:"p-4 bg-gray-50 rounded"},ue={class:"text-sm text-gray-500"},pe={class:"text-2xl font-bold text-blue-600"},ge={__name:"InviteCompany",setup(ve){const{t:c}=S.useI18n(),r=T(),_=l(!0),u=l(!1),p=l(!1),n=l(null),v=l({}),d=l({email:""});async function I(){_.value=!0;try{const t=await w.post("/invitations/partner-to-company");n.value=t.data}catch{r.showNotification({type:"error",message:c("console.invite_company.load_failed")})}finally{_.value=!1}}function C(){navigator.clipboard.writeText(n.value.link),p.value=!0,r.showNotification({type:"success",message:c("console.invite_company.link_copied")}),setTimeout(()=>p.value=!1,2e3)}function N(){const t=document.createElement("a");t.href=n.value.qr_code_url,t.download="partner-referral-qr.png",t.click()}async function q(){u.value=!0;try{await w.post("/invitations/send-email",{email:d.value.email,link:n.value.link}),r.showNotification({type:"success",message:c("console.invite_company.email_sent")}),d.value.email=""}catch{r.showNotification({type:"error",message:c("console.invite_company.email_failed")})}finally{u.value=!1}}return j(()=>{I()}),(t,h)=>{const f=a("BaseBreadcrumbItem"),V=a("BaseBreadcrumb"),E=a("BasePageHeader"),L=a("BaseLoader"),b=a("BaseIcon"),B=a("BaseButton"),x=a("BaseInput"),D=a("BaseInputGroup"),P=a("BasePage");return m(),z(P,null,{default:i(()=>[s(E,{title:t.$t("console.invite_company.title")},{default:i(()=>[s(V,null,{default:i(()=>[s(f,{title:t.$t("general.home"),to:"/admin/console"},null,8,["title"]),s(f,{title:t.$t("console.invite_company.title"),to:"#",active:""},null,8,["title"])]),_:1})]),_:1},8,["title"]),e("div",H,[e("div",Q,[e("h3",R,o(t.$t("console.invite_company.qr_code")),1),e("p",A,o(t.$t("console.invite_company.qr_description")),1),_.value?(m(),g("div",F,[s(L)])):n.value?(m(),g("div",K,[e("div",U,[e("img",{src:n.value.qr_code_url,alt:"QR Code",class:"w-64 h-64"},null,8,J)]),e("div",O,[e("p",W,o(t.$t("console.invite_company.scan_to_signup")),1),s(B,{variant:"primary-outline",size:"sm",onClick:N},{left:i(y=>[s(b,{name:"ArrowDownTrayIcon",class:M(y.class)},null,8,["class"])]),default:i(()=>[$(" "+o(t.$t("console.invite_company.download_qr")),1)]),_:1})])])):k("",!0)]),e("div",X,[e("h3",Y,o(t.$t("console.invite_company.share_link")),1),e("p",Z,o(t.$t("console.invite_company.link_description")),1),n.value?(m(),g("div",ee,[s(D,{label:t.$t("console.invite_company.your_link")},{default:i(()=>[s(x,{"model-value":n.value.link,readonly:""},{right:i(()=>[e("button",{onClick:C,class:"text-primary-500 hover:text-primary-700"},[s(b,{name:p.value?"CheckIcon":"ClipboardDocumentIcon",class:"w-5 h-5"},null,8,["name"])])]),_:1},8,["model-value"])]),_:1},8,["label"]),e("div",te,[e("h4",oe,o(t.$t("console.invite_company.email_invite")),1),e("form",{onSubmit:G(q,["prevent"]),class:"space-y-3"},[s(x,{modelValue:d.value.email,"onUpdate:modelValue":h[0]||(h[0]=y=>d.value.email=y),type:"email",placeholder:t.$t("console.invite_company.email_placeholder")},null,8,["modelValue","placeholder"]),s(B,{type:"submit",loading:u.value,size:"sm"},{default:i(()=>[$(o(t.$t("console.invite_company.send_email")),1)]),_:1},8,["loading"])],32)])])):k("",!0)])]),e("div",se,[e("h3",ae,o(t.$t("console.invite_company.referral_stats")),1),e("div",ne,[e("div",ie,[e("div",le,o(t.$t("console.invite_company.total_signups")),1),e("div",ce,o(v.value.total_signups||0),1)]),e("div",re,[e("div",de,o(t.$t("console.invite_company.active_clients")),1),e("div",me,o(v.value.active_clients||0),1)]),e("div",_e,[e("div",ue,o(t.$t("console.invite_company.conversion_rate")),1),e("div",pe,o(v.value.conversion_rate||0)+"%",1)])])])]),_:1})}}};export{ge as default};
