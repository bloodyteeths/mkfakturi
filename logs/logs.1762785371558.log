[stacktrace]
#0 /var/www/html/vendor/laravel/framework/src/Illuminate/Database/Connection.php(776): Illuminate\\Database\\Connection->runQueryCallback('update `users` ...', Array, Object(Closure))
#1 /var/www/html/vendor/laravel/framework/src/Illuminate/Database/Connection.php(581): Illuminate\\Database\\Connection->run('update `users` ...', Array, Object(Closure))
#2 /var/www/html/vendor/laravel/framework/src/Illuminate/Database/Connection.php(533): Illuminate\\Database\\Connection->affectingStatement('update `users` ...', Array)
#3 /var/www/html/vendor/laravel/framework/src/Illuminate/Database/Query/Builder.php(3843): Illuminate\\Database\\Connection->update('update `users` ...', Array)
#4 /var/www/html/database/migrations/2025_11_13_000000_assign_super_admin_to_company.php(20): Illuminate\\Database\\Query\\Builder->update(Object(Illuminate\\Support\\Collection))
#5 /var/www/html/vendor/laravel/framework/src/Illuminate/Database/Migrations/Migrator.php(514): Illuminate\\Database\\Migrations\\Migration@anonymous->up()
#6 /var/www/html/vendor/laravel/framework/src/Illuminate/Database/Migrations/Migrator.php(439): Illuminate\\Database\\Migrations\\Migrator->runMethod(Object(Illuminate\\Database\\MySqlConnection), Object(Illuminate\\Database\\Migrations\\Migration@anonymous), 'up')
#7 /var/www/html/vendor/laravel/framework/src/Illuminate/Database/Migrations/Migrator.php(448): Illuminate\\Database\\Migrations\\Migrator->Illuminate\\Database\\Migrations\\{closure}()
#8 /var/www/html/vendor/laravel/framework/src/Illuminate/Database/Migrations/Migrator.php(250): Illuminate\\Database\\Migrations\\Migrator->runMigration(Object(Illuminate\\Database\\Migrations\\Migration@anonymous), 'up')
#9 /var/www/html/vendor/laravel/framework/src/Illuminate/Console/View/Components/Task.php(41): Illuminate\\Database\\Migrations\\Migrator->Illuminate\\Database\\Migrations\\{closure}()
#10 /var/www/html/vendor/laravel/framework/src/Illuminate/Database/Migrations/Migrator.php(805): Illuminate\\Console\\View\\Components\\Task->render('2025_11_13_0000...', Object(Closure))
#11 /var/www/html/vendor/laravel/framework/src/Illuminate/Database/Migrations/Migrator.php(250): Illuminate\\Database\\Migrations\\Migrator->write('Illuminate\\\\Cons...', '2025_11_13_0000...', Object(Closure))
#12 /var/www/html/vendor/laravel/framework/src/Illuminate/Database/Migrations/Migrator.php(210): Illuminate\\Database\\Migrations\\Migrator->runUp('/var/www/html/d...', 25, false)
#13 /var/www/html/vendor/laravel/framework/src/Illuminate/Database/Migrations/Migrator.php(137): Illuminate\\Database\\Migrations\\Migrator->runPending(Array, Array)
#14 /var/www/html/vendor/laravel/framework/src/Illuminate/Database/Console/Migrations/MigrateCommand.php(116): Illuminate\\Database\\Migrations\\Migrator->run(Array, Array)
#15 /var/www/html/vendor/laravel/framework/src/Illuminate/Database/Migrations/Migrator.php(665): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()
#16 /var/www/html/vendor/laravel/framework/src/Illuminate/Database/Console/Migrations/MigrateCommand.php(109): Illuminate\\Database\\Migrations\\Migrator->usingConnection(NULL, Object(Closure))
#17 /var/www/html/vendor/laravel/framework/src/Illuminate/Database/Console/Migrations/MigrateCommand.php(88): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->runMigrations()
#18 /var/www/html/vendor/laravel/framework/src/Illuminate/Container/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()
#19 /var/www/html/vendor/laravel/framework/src/Illuminate/Container/Util.php(43): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()
#20 /var/www/html/vendor/laravel/framework/src/Illuminate/Container/BoundMethod.php(96): Illuminate\\Container\\Util::unwrapIfClosure(Object(Closure))
#21 /var/www/html/vendor/laravel/framework/src/Illuminate/Container/BoundMethod.php(35): Illuminate\\Container\\BoundMethod::callBoundMethod(Object(Illuminate\\Foundation\\Application), Array, Object(Closure))
#22 /var/www/html/vendor/laravel/framework/src/Illuminate/Container/Container.php(754): Illuminate\\Container\\BoundMethod::call(Object(Illuminate\\Foundation\\Application), Array, Array, NULL)
#23 /var/www/html/vendor/laravel/framework/src/Illuminate/Console/Command.php(211): Illuminate\\Container\\Container->call(Array)
#24 /var/www/html/vendor/symfony/console/Command/Command.php(279): Illuminate\\Console\\Command->execute(Object(Symfony\\Component\\Console\\Input\\ArgvInput), Object(Illuminate\\Console\\OutputStyle))
#25 /var/www/html/vendor/laravel/framework/src/Illuminate/Console/Command.php(180): Symfony\\Component\\Console\\Command\\Command->run(Object(Symfony\\Component\\Console\\Input\\ArgvInput), Object(Illuminate\\Console\\OutputStyle))
#26 /var/www/html/vendor/symfony/console/Application.php(1094): Illuminate\\Console\\Command->run(Object(Symfony\\Component\\Console\\Input\\ArgvInput), Object(Symfony\\Component\\Console\\Output\\ConsoleOutput))
#27 /var/www/html/vendor/symfony/console/Application.php(342): Symfony\\Component\\Console\\Application->doRunCommand(Object(Illuminate\\Database\\Console\\Migrations\\MigrateCommand), Object(Symfony\\Component\\Console\\Input\\ArgvInput), Object(Symfony\\Component\\Console\\Output\\ConsoleOutput))
#28 /var/www/html/vendor/symfony/console/Application.php(193): Symfony\\Component\\Console\\Application->doRun(Object(Symfony\\Component\\Console\\Input\\ArgvInput), Object(Symfony\\Component\\Console\\Output\\ConsoleOutput))
#29 /var/www/html/vendor/laravel/framework/src/Illuminate/Foundation/Console/Kernel.php(197): Symfony\\Component\\Console\\Application->run(Object(Symfony\\Component\\Console\\Input\\ArgvInput), Object(Symfony\\Component\\Console\\Output\\ConsoleOutput))
#30 /var/www/html/vendor/laravel/framework/src/Illuminate/Foundation/Application.php(1234): Illuminate\\Foundation\\Console\\Kernel->handle(Object(Symfony\\Component\\Console\\Input\\ArgvInput), Object(Symfony\\Component\\Console\\Output\\ConsoleOutput))
#31 /var/www/html/artisan(13): Illuminate\\Foundation\\Application->handleCommand(Object(Symfony\\Component\\Console\\Input\\ArgvInput))
#32 {main}

[previous exception] [object] (PDOException(code: 42S22): SQLSTATE[42S22]: Column not found: 1054 Unknown column 'company_id' in 'where clause' at /var/www/html/vendor/laravel/framework/src/Illuminate/Database/Connection.php:589)
[stacktrace]
#0 /var/www/html/vendor/laravel/framework/src/Illuminate/Database/Connection.php(589): PDO->prepare('update `users` ...')
#1 /var/www/html/vendor/laravel/framework/src/Illuminate/Database/Connection.php(809): Illuminate\\Database\\Connection->Illuminate\\Database\\{closure}('update `users` ...', Array)
#2 /var/www/html/vendor/laravel/framework/src/Illuminate/Database/Connection.php(776): Illuminate\\Database\\Connection->runQueryCallback('update `users` ...', Array, Object(Closure))
#3 /var/www/html/vendor/laravel/framework/src/Illuminate/Database/Connection.php(581): Illuminate\\Database\\Connection->run('update `users` ...', Array, Object(Closure))
#4 /var/www/html/vendor/laravel/framework/src/Illuminate/Database/Connection.php(533): Illuminate\\Database\\Connection->affectingStatement('update `users` ...', Array)
#5 /var/www/html/vendor/laravel/framework/src/Illuminate/Database/Query/Builder.php(3843): Illuminate\\Database\\Connection->update('update `users` ...', Array)
#6 /var/www/html/database/migrations/2025_11_13_000000_assign_super_admin_to_company.php(20): Illuminate\\Database\\Query\\Builder->update(Object(Illuminate\\Support\\Collection))
#7 /var/www/html/vendor/laravel/framework/src/Illuminate/Database/Migrations/Migrator.php(514): Illuminate\\Database\\Migrations\\Migration@anonymous->up()
#8 /var/www/html/vendor/laravel/framework/src/Illuminate/Database/Migrations/Migrator.php(439): Illuminate\\Database\\Migrations\\Migrator->runMethod(Object(Illuminate\\Database\\MySqlConnection), Object(Illuminate\\Database\\Migrations\\Migration@anonymous), 'up')
#9 /var/www/html/vendor/laravel/framework/src/Illuminate/Database/Migrations/Migrator.php(448): Illuminate\\Database\\Migrations\\Migrator->Illuminate\\Database\\Migrations\\{closure}()
#10 /var/www/html/vendor/laravel/framework/src/Illuminate/Database/Migrations/Migrator.php(250): Illuminate\\Database\\Migrations\\Migrator->runMigration(Object(Illuminate\\Database\\Migrations\\Migration@anonymous), 'up')
#11 /var/www/html/vendor/laravel/framework/src/Illuminate/Console/View/Components/Task.php(41): Illuminate\\Database\\Migrations\\Migrator->Illuminate\\Database\\Migrations\\{closure}()
#12 /var/www/html/vendor/laravel/framework/src/Illuminate/Database/Migrations/Migrator.php(805): Illuminate\\Console\\View\\Components\\Task->render('2025_11_13_0000...', Object(Closure))
#13 /var/www/html/vendor/laravel/framework/src/Illuminate/Database/Migrations/Migrator.php(250): Illuminate\\Database\\Migrations\\Migrator->write('Illuminate\\\\Cons...', '2025_11_13_0000...', Object(Closure))
#14 /var/www/html/vendor/laravel/framework/src/Illuminate/Database/Migrations/Migrator.php(210): Illuminate\\Database\\Migrations\\Migrator->runUp('/var/www/html/d...', 25, false)
#15 /var/www/html/vendor/laravel/framework/src/Illuminate/Database/Migrations/Migrator.php(137): Illuminate\\Database\\Migrations\\Migrator->runPending(Array, Array)
#16 /var/www/html/vendor/laravel/framework/src/Illuminate/Database/Console/Migrations/MigrateCommand.php(116): Illuminate\\Database\\Migrations\\Migrator->run(Array, Array)
#17 /var/www/html/vendor/laravel/framework/src/Illuminate/Database/Migrations/Migrator.php(665): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()
#18 /var/www/html/vendor/laravel/framework/src/Illuminate/Database/Console/Migrations/MigrateCommand.php(109): Illuminate\\Database\\Migrations\\Migrator->usingConnection(NULL, Object(Closure))
#19 /var/www/html/vendor/laravel/framework/src/Illuminate/Database/Console/Migrations/MigrateCommand.php(88): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->runMigrations()
#20 /var/www/html/vendor/laravel/framework/src/Illuminate/Container/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()
#21 /var/www/html/vendor/laravel/framework/src/Illuminate/Container/Util.php(43): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()
#22 /var/www/html/vendor/laravel/framework/src/Illuminate/Container/BoundMethod.php(96): Illuminate\\Container\\Util::unwrapIfClosure(Object(Closure))
#23 /var/www/html/vendor/laravel/framework/src/Illuminate/Container/BoundMethod.php(35): Illuminate\\Container\\BoundMethod::callBoundMethod(Object(Illuminate\\Foundation\\Application), Array, Object(Closure))
#24 /var/www/html/vendor/laravel/framework/src/Illuminate/Container/Container.php(754): Illuminate\\Container\\BoundMethod::call(Object(Illuminate\\Foundation\\Application), Array, Array, NULL)
#25 /var/www/html/vendor/laravel/framework/src/Illuminate/Console/Command.php(211): Illuminate\\Container\\Container->call(Array)
#26 /var/www/html/vendor/symfony/console/Command/Command.php(279): Illuminate\\Console\\Command->execute(Object(Symfony\\Component\\Console\\Input\\ArgvInput), Object(Illuminate\\Console\\OutputStyle))
#27 /var/www/html/vendor/laravel/framework/src/Illuminate/Console/Command.php(180): Symfony\\Component\\Console\\Command\\Command->run(Object(Symfony\\Component\\Console\\Input\\ArgvInput), Object(Illuminate\\Console\\OutputStyle))
#28 /var/www/html/vendor/symfony/console/Application.php(1094): Illuminate\\Console\\Command->run(Object(Symfony\\Component\\Console\\Input\\ArgvInput), Object(Symfony\\Component\\Console\\Output\\ConsoleOutput))
#29 /var/www/html/vendor/symfony/console/Application.php(342): Symfony\\Component\\Console\\Application->doRunCommand(Object(Illuminate\\Database\\Console\\Migrations\\MigrateCommand), Object(Symfony\\Component\\Console\\Input\\ArgvInput), Object(Symfony\\Component\\Console\\Output\\ConsoleOutput))
#30 /var/www/html/vendor/symfony/console/Application.php(193): Symfony\\Component\\Console\\Application->doRun(Object(Symfony\\Component\\Console\\Input\\ArgvInput), Object(Symfony\\Component\\Console\\Output\\ConsoleOutput))
#31 /var/www/html/vendor/laravel/framework/src/Illuminate/Foundation/Console/Kernel.php(197): Symfony\\Component\\Console\\Application->run(Object(Symfony\\Component\\Console\\Input\\ArgvInput), Object(Symfony\\Component\\Console\\Output\\ConsoleOutput))
#32 /var/www/html/vendor/laravel/framework/src/Illuminate/Foundation/Application.php(1234): Illuminate\\Foundation\\Console\\Kernel->handle(Object(Symfony\\Component\\Console\\Input\\ArgvInput), Object(Symfony\\Component\\Console\\Output\\ConsoleOutput))
#33 /var/www/html/artisan(13): Illuminate\\Foundation\\Application->handleCommand(Object(Symfony\\Component\\Console\\Input\\ArgvInput))
#34 {main}
"} 
[2025-11-13 14:26:20] production.INFO: CompanyResource::toArray - Returning to frontend {"company_id":2,"vat_id":"MK12345678901","vat_number_raw":"MK12345678901","vat_number_returned":"MK12345678901","tax_id":"MK12345678901"} 
[2025-11-13 14:26:20] production.INFO: CompanyResource::toArray - Returning to frontend {"company_id":2,"vat_id":"MK12345678901","vat_number_raw":"MK12345678901","vat_number_returned":"MK12345678901","tax_id":"MK12345678901"} 
[2025-11-13 14:26:20] production.INFO: CompanyResource::toArray - Returning to frontend {"company_id":2,"vat_id":"MK12345678901","vat_number_raw":"MK12345678901","vat_number_returned":"MK12345678901","tax_id":"MK12345678901"} 
[2025-11-13 14:26:20] production.WARNING: Slow operation detected {"operation":"req_6915ea8b92b74","execution_time_ms":756.45,"memory_used_bytes":14680064,"memory_used_mb":14.0} 
[2025-11-13 14:26:20] production.WARNING: Slow request detected {"operation":"req_6915ea8b92b74","execution_time_ms":756.45,"memory_used_bytes":14680064,"memory_used_mb":14.0,"method":"GET","url":"https://www.facturino.mk/api/v1/bootstrap","route":null,"user_id":2,"company_id":"2","ip":"46.217.85.1","user_agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36","response_status":200} 
[2025-11-13 14:26:35] production.INFO: [ImportController] Upload started {"has_file":true,"type":"customers","user_id":2} 
[2025-11-13 14:26:35] production.INFO: [ImportController] User and company loaded {"user_id":2,"company_id":"2"} 
[2025-11-13 14:26:35] production.INFO: [ImportController] Storing file {"filename":"cc05e6e8-e1eb-4b95-8d62-3de18b45934e.csv","original_name":"02_macedonian_chars_customers.csv","size":1053} 
[2025-11-13 14:26:35] production.INFO: [ImportController] File stored successfully {"path":"imports/2/cc05e6e8-e1eb-4b95-8d62-3de18b45934e.csv"} 
[2025-11-13 14:26:35] production.INFO: [ImportController] ImportJob created {"id":15} 
[2025-11-13 14:26:35] production.INFO: [ImportController] Upload completed successfully {"import_id":15,"response_data":{"id":15,"name":"Import from 02_macedonian_chars_customers.csv","type":"customers","status":"pending","source_system":null,"file_type":"csv","file_info":{"size":1053,"mime_type":"text/csv","original_name":"02_macedonian_chars_customers.csv"},"file_path":"imports/2/cc05e6e8-e1eb-4b95-8d62-3de18b45934e.csv","mapping_config":null,"validation_rules":null,"total_records":0,"processed_records":0,"successful_records":0,"failed_records":0,"started_at":null,"completed_at":null,"error_message":null,"error_details":null,"summary":null,"company_id":2,"creator_id":2,"created_at":"2025-11-13T14:26:35.000000Z","updated_at":"2025-11-13T14:26:35.000000Z","formattedCreatedAt":"13.11.2025","formattedStartedAt":null,"formattedCompletedAt":null,"progressPercentage":0,"duration":null,"isInProgress":false,"canRetry":false}} 
[2025-11-13 14:26:37] production.INFO: [ImportController] show() - detecting fields {"import_id":"15","file_path":"imports/2/cc05e6e8-e1eb-4b95-8d62-3de18b45934e.csv"} 
[2025-11-13 14:26:37] production.INFO: [ImportController] File path constructed {"file_path":"/var/www/html/storage/app/imports/2/cc05e6e8-e1eb-4b95-8d62-3de18b45934e.csv","exists":true} 
[2025-11-13 14:26:37] production.INFO: [ImportController] Fields detected successfully {"count":7,"field_names":["name","email","phone","address","vat_number","website","currency"],"suggestions":{"name":"name","email":"email","phone":"phone","address":"billing_address_street_1","vat_number":"vat_number","website":"website","currency":"currency"},"confidence":1.0} 
[2025-11-13 14:26:41] production.INFO: [ImportController] validateData() called {"import_id":"15","file_path":"imports/2/cc05e6e8-e1eb-4b95-8d62-3de18b45934e.csv"} 
[2025-11-13 14:26:41] production.INFO: [ImportController] Validation completed {"total_records":6,"valid_records":6,"invalid_records":0} 
[2025-11-13 14:26:44] production.INFO: [ImportController] commit() started {"import_id":"15","type":"customers","file_path":"imports/2/cc05e6e8-e1eb-4b95-8d62-3de18b45934e.csv"} 
[2025-11-13 14:26:44] production.ERROR: [ImportController] Record import failed {"row":1,"error":"SQLSTATE[23000]: Integrity constraint violation: 1452 Cannot add or update a child row: a foreign key constraint fails (`railway`.`addresses`, CONSTRAINT `addresses_user_id_foreign` FOREIGN KEY (`user_id`) REFERENCES `users` (`id`) ON DELETE CASCADE) (Connection: mysql, SQL: insert into `addresses` (`name`, `address_street_1`, `address_street_2`, `city`, `state`, `zip`, `phone`, `type`, `user_id`, `company_id`, `updated_at`, `created_at`) values (КИРИЛИЦА ООД Скопје, ул. Џон Кенеди 33, Скопје, ?, ?, ?, ?, +38970111222, billing, 7, 2, 2025-11-13 14:26:44, 2025-11-13 14:26:44))","data":{"name":"КИРИЛИЦА ООД Скопје","email":"кирилица@пример.мк","phone":"+38970111222","billing_address_street_1":"ул. Џон Кенеди 33, Скопје","vat_number":"MK4080012562126","website":"https://кирилица.мк","currency":"MKD"}} 
[2025-11-13 14:26:44] production.ERROR: [ImportController] Record import failed {"row":2,"error":"SQLSTATE[23000]: Integrity constraint violation: 1452 Cannot add or update a child row: a foreign key constraint fails (`railway`.`addresses`, CONSTRAINT `addresses_user_id_foreign` FOREIGN KEY (`user_id`) REFERENCES `users` (`id`) ON DELETE CASCADE) (Connection: mysql, SQL: insert into `addresses` (`name`, `address_street_1`, `address_street_2`, `city`, `state`, `zip`, `phone`, `type`, `user_id`, `company_id`, `updated_at`, `created_at`) values (Čučuk Import-Export ДООЕЛ, ул. Широк Сокак 12, Битола, ?, ?, ?, ?, +38971222333, billing, 8, 2, 2025-11-13 14:26:44, 2025-11-13 14:26:44))","data":{"name":"Čučuk Import-Export ДООЕЛ","email":"cucuk@example.mk","phone":"+38971222333","billing_address_street_1":"ул. Широк Сокак 12, Битола","vat_number":"MK4080012562127","website":"https://cucuk.mk","currency":"MKD"}} 
[2025-11-13 14:26:44] production.ERROR: [ImportController] Record import failed {"row":3,"error":"SQLSTATE[23000]: Integrity constraint violation: 1452 Cannot add or update a child row: a foreign key constraint fails (`railway`.`addresses`, CONSTRAINT `addresses_user_id_foreign` FOREIGN KEY (`user_id`) REFERENCES `users` (`id`) ON DELETE CASCADE) (Connection: mysql, SQL: insert into `addresses` (`name`, `address_street_1`, `address_street_2`, `city`, `state`, `zip`, `phone`, `type`, `user_id`, `company_id`, `updated_at`, `created_at`) values (Živković & Šarić DOO, бул. Гоце Делчев 88, Прилеп, ?, ?, ?, ?, +38972333444, billing, 9, 2, 2025-11-13 14:26:44, 2025-11-13 14:26:44))","data":{"name":"Živković & Šarić DOO","email":"zivkovic@example.mk","phone":"+38972333444","billing_address_street_1":"бул. Гоце Делчев 88, Прилеп","vat_number":"MK4080012562128","website":"https://zivkovic.mk","currency":"MKD"}} 
[2025-11-13 14:26:44] production.ERROR: [ImportController] Record import failed {"row":4,"error":"SQLSTATE[23000]: Integrity constraint violation: 1452 Cannot add or update a child row: a foreign key constraint fails (`railway`.`addresses`, CONSTRAINT `addresses_user_id_foreign` FOREIGN KEY (`user_id`) REFERENCES `users` (`id`) ON DELETE CASCADE) (Connection: mysql, SQL: insert into `addresses` (`name`, `address_street_1`, `address_street_2`, `city`, `state`, `zip`, `phone`, `type`, `user_id`, `company_id`, `updated_at`, `created_at`) values (Ђорђевић Трговија ООД, ул. Маршал Тито 5, Велес, ?, ?, ?, ?, +38970444555, billing, 10, 2, 2025-11-13 14:26:44, 2025-11-13 14:26:44))","data":{"name":"Ђорђевић Трговија ООД","email":"djordjevic@example.mk","phone":"+38970444555","billing_address_street_1":"ул. Маршал Тито 5, Велес","vat_number":"MK4080012562129","website":"https://djordjevic.mk","currency":"MKD"}} 
[2025-11-13 14:26:44] production.ERROR: [ImportController] Record import failed {"row":5,"error":"SQLSTATE[23000]: Integrity constraint violation: 1452 Cannot add or update a child row: a foreign key constraint fails (`railway`.`addresses`, CONSTRAINT `addresses_user_id_foreign` FOREIGN KEY (`user_id`) REFERENCES `users` (`id`) ON DELETE CASCADE) (Connection: mysql, SQL: insert into `addresses` (`name`, `address_street_1`, `address_street_2`, `city`, `state`, `zip`, `phone`, `type`, `user_id`, `company_id`, `updated_at`, `created_at`) values (Љубљана-Скопје Експрес ДООЕЛ, бул. Партизанска 99, Скопје, ?, ?, ?, ?, +38971555666, billing, 11, 2, 2025-11-13 14:26:44, 2025-11-13 14:26:44))","data":{"name":"Љубљана-Скопје Експрес ДООЕЛ","email":"ljubjana@example.mk","phone":"+38971555666","billing_address_street_1":"бул. Партизанска 99, Скопје","vat_number":"MK4080012562130","website":"https://ljubjana-express.mk","currency":"MKD"}} 
[2025-11-13 14:26:44] production.ERROR: [ImportController] Record import failed {"row":6,"error":"SQLSTATE[23000]: Integrity constraint violation: 1452 Cannot add or update a child row: a foreign key constraint fails (`railway`.`addresses`, CONSTRAINT `addresses_user_id_foreign` FOREIGN KEY (`user_id`) REFERENCES `users` (`id`) ON DELETE CASCADE) (Connection: mysql, SQL: insert into `addresses` (`name`, `address_street_1`, `address_street_2`, `city`, `state`, `zip`, `phone`, `type`, `user_id`, `company_id`, `updated_at`, `created_at`) values (Њујорк-Македонија Трансфер ООД, ул. Илинденска 7, Охрид, ?, ?, ?, ?, +38972666777, billing, 12, 2, 2025-11-13 14:26:44, 2025-11-13 14:26:44))","data":{"name":"Њујорк-Македонија Трансфер ООД","email":"njujork@example.mk","phone":"+38972666777","billing_address_street_1":"ул. Илинденска 7, Охрид","vat_number":"MK4080012562131","website":"https://ny-mk-transfer.mk","currency":"USD"}} 
[2025-11-13 14:26:44] production.INFO: [ImportController] commit() completed {"import_id":"15","successful_records":0,"failed_records":6} 
[2025-11-13 14:26:51] production.INFO: CompanyResource::toArray - Returning to frontend {"company_id":2,"vat_id":"MK12345678901","vat_number_raw":"MK12345678901","vat_number_returned":"MK12345678901","tax_id":"MK12345678901"} 
[2025-11-13 14:26:51] production.INFO: CompanyResource::toArray - Returning to frontend {"company_id":2,"vat_id":"MK12345678901","vat_number_raw":"MK12345678901","vat_number_returned":"MK12345678901","tax_id":"MK12345678901"} 
[2025-11-13 14:26:52] production.INFO: CompanyResource::toArray - Returning to frontend {"company_id":2,"vat_id":"MK12345678901","vat_number_raw":"MK12345678901","vat_number_returned":"MK12345678901","tax_id":"MK12345678901"} 
[2025-11-13 14:26:52] production.INFO: CompanyResource::toArray - Returning to frontend {"company_id":2,"vat_id":"MK12345678901","vat_number_raw":"MK12345678901","vat_number_returned":"MK12345678901","tax_id":"MK12345678901"} 
[2025-11-13 14:26:52] production.INFO: CompanyResource::toArray - Returning to frontend {"company_id":2,"vat_id":"MK12345678901","vat_number_raw":"MK12345678901","vat_number_returned":"MK12345678901","tax_id":"MK12345678901"} 
[2025-11-13 14:26:52] production.INFO: CompanyResource::toArray - Returning to frontend {"company_id":2,"vat_id":"MK12345678901","vat_number_raw":"MK12345678901","vat_number_returned":"MK12345678901","tax_id":"MK12345678901"} 
[2025-11-13 14:26:52] production.INFO: CompanyResource::toArray - Returning to frontend {"company_id":2,"vat_id":"MK12345678901","vat_number_raw":"MK12345678901","vat_number_returned":"MK12345678901","tax_id":"MK12345678901"} 
[2025-11-13 14:26:52] production.WARNING: Slow operation detected {"operation":"req_6915eaab8e89c","execution_time_ms":914.04,"memory_used_bytes":0,"memory_used_mb":0.0} 
[2025-11-13 14:26:52] production.WARNING: Slow request detected {"operation":"req_6915eaab8e89c","execution_time_ms":914.04,"memory_used_bytes":0,"memory_used_mb":0.0,"method":"GET","url":"https://www.facturino.mk/api/v1/items","route":"items.index","user_id":2,"company_id":"2","ip":"46.217.85.1","user_agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36","response_status":200} 
[2025-11-13 14:26:52] production.INFO: CompanyResource::toArray - Returning to frontend {"company_id":2,"vat_id":"MK12345678901","vat_number_raw":"MK12345678901","vat_number_returned":"MK12345678901","tax_id":"MK12345678901"} 
[2025-11-13 14:26:52] production.INFO: CompanyResource::toArray - Returning to frontend {"company_id":2,"vat_id":"MK12345678901","vat_number_raw":"MK12345678901","vat_number_returned":"MK12345678901","tax_id":"MK12345678901"} 
[2025-11-13 14:26:53] production.INFO: CompanyResource::toArray - Returning to frontend {"company_id":2,"vat_id":"MK12345678901","vat_number_raw":"MK12345678901","vat_number_returned":"MK12345678901","tax_id":"MK12345678901"} 
[2025-11-13 14:26:53] production.INFO: CompanyResource::toArray - Returning to frontend {"company_id":2,"vat_id":"MK12345678901","vat_number_raw":"MK12345678901","vat_number_returned":"MK12345678901","tax_id":"MK12345678901"} 
[2025-11-13 14:26:53] production.INFO: CompanyResource::toArray - Returning to frontend {"company_id":2,"vat_id":"MK12345678901","vat_number_raw":"MK12345678901","vat_number_returned":"MK12345678901","tax_id":"MK12345678901"} 
[2025-11-13 14:26:53] production.INFO: CompanyResource::toArray - Returning to frontend {"company_id":2,"vat_id":"MK12345678901","vat_number_raw":"MK12345678901","vat_number_returned":"MK12345678901","tax_id":"MK12345678901"} 
[2025-11-13 14:26:53] production.INFO: CompanyResource::toArray - Returning to frontend {"company_id":2,"vat_id":"MK12345678901","vat_number_raw":"MK12345678901","vat_number_returned":"MK12345678901","tax_id":"MK12345678901"} 
[2025-11-13 14:26:53] production.WARNING: Slow operation detected {"operation":"req_6915eaac938f8","execution_time_ms":920.26,"memory_used_bytes":2097152,"memory_used_mb":2.0} 
[2025-11-13 14:26:53] production.WARNING: Slow request detected {"operation":"req_6915eaac938f8","execution_time_ms":920.26,"memory_used_bytes":2097152,"memory_used_mb":2.0,"method":"GET","url":"https://www.facturino.mk/api/v1/items","route":"items.index","user_id":2,"company_id":"2","ip":"46.217.85.1","user_agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36","response_status":200} 
[2025-11-13 14:26:55] production.INFO: CompanyResource::toArray - Returning to frontend {"company_id":2,"vat_id":"MK12345678901","vat_number_raw":"MK12345678901","vat_number_returned":"MK12345678901","tax_id":"MK12345678901"} 
[2025-11-13 14:26:55] production.INFO: CompanyResource::toArray - Returning to frontend {"company_id":2,"vat_id":"MK12345678901","vat_number_raw":"MK12345678901","vat_number_returned":"MK12345678901","tax_id":"MK12345678901"} 
[2025-11-13 14:26:55] production.INFO: CompanyResource::toArray - Returning to frontend {"company_id":2,"vat_id":"MK12345678901","vat_number_raw":"MK12345678901","vat_number_returned":"MK12345678901","tax_id":"MK12345678901"} 
[2025-11-13 14:26:55] production.INFO: CompanyResource::toArray - Returning to frontend {"company_id":2,"vat_id":"MK12345678901","vat_number_raw":"MK12345678901","vat_number_returned":"MK12345678901","tax_id":"MK12345678901"} 
[2025-11-13 14:26:55] production.INFO: CompanyResource::toArray - Returning to frontend {"company_id":2,"vat_id":"MK12345678901","vat_number_raw":"MK12345678901","vat_number_returned":"MK12345678901","tax_id":"MK12345678901"} 
[2025-11-13 14:26:55] production.INFO: CompanyResource::toArray - Returning to frontend {"company_id":2,"vat_id":"MK12345678901","vat_number_raw":"MK12345678901","vat_number_returned":"MK12345678901","tax_id":"MK12345678901"} 
[2025-11-13 14:26:55] production.INFO: CompanyResource::toArray - Returning to frontend {"company_id":2,"vat_id":"MK12345678901","vat_number_raw":"MK12345678901","vat_number_returned":"MK12345678901","tax_id":"MK12345678901"} 
[2025-11-13 14:26:56] production.INFO: CompanyResource::toArray - Returning to frontend {"company_id":2,"vat_id":"MK12345678901","vat_number_raw":"MK12345678901","vat_number_returned":"MK12345678901","tax_id":"MK12345678901"} 
[2025-11-13 14:26:56] production.INFO: CompanyResource::toArray - Returning to frontend {"company_id":2,"vat_id":"MK12345678901","vat_number_raw":"MK12345678901","vat_number_returned":"MK12345678901","tax_id":"MK12345678901"} 
[2025-11-13 14:26:56] production.INFO: CompanyResource::toArray - Returning to frontend {"company_id":2,"vat_id":"MK12345678901","vat_number_raw":"MK12345678901","vat_number_returned":"MK12345678901","tax_id":"MK12345678901"} 
[2025-11-13 14:26:56] production.WARNING: Slow operation detected {"operation":"req_6915eaaef3873","execution_time_ms":1255.88,"memory_used_bytes":2097152,"memory_used_mb":2.0} 
[2025-11-13 14:26:56] production.WARNING: Slow request detected {"operation":"req_6915eaaef3873","execution_time_ms":1255.88,"memory_used_bytes":2097152,"memory_used_mb":2.0,"method":"GET","url":"https://www.facturino.mk/api/v1/customers","route":"customers.index","user_id":2,"company_id":"2","ip":"46.217.85.1","user_agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36","response_status":200} 
[2025-11-13 14:27:01] production.INFO: CompanyResource::toArray - Returning to frontend {"company_id":2,"vat_id":"MK12345678901","vat_number_raw":"MK12345678901","vat_number_returned":"MK12345678901","tax_id":"MK12345678901"} 
[2025-11-13 14:27:01] production.INFO: CompanyResource::toArray - Returning to frontend {"company_id":2,"vat_id":"MK12345678901","vat_number_raw":"MK12345678901","vat_number_returned":"MK12345678901","tax_id":"MK12345678901"} 
[2025-11-13 14:27:01] production.WARNING: Slow operation detected {"operation":"req_6915eab519d22","execution_time_ms":337.46,"memory_used_bytes":2097152,"memory_used_mb":2.0} 
[2025-11-13 14:27:01] production.WARNING: Slow request detected {"operation":"req_6915eab519d22","execution_time_ms":337.46,"memory_used_bytes":2097152,"memory_used_mb":2.0,"method":"GET","url":"https://www.facturino.mk/api/v1/customers","route":"customers.index","user_id":2,"company_id":"2","ip":"46.217.85.1","user_agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36","response_status":200} 
[2025-11-13 14:27:04] production.INFO: CompanyResource::toArray - Returning to frontend {"company_id":2,"vat_id":"MK12345678901","vat_number_raw":"MK12345678901","vat_number_returned":"MK12345678901","tax_id":"MK12345678901"} 
[2025-11-13 14:27:05] production.INFO: CompanyResource::toArray - Returning to frontend {"company_id":2,"vat_id":"MK12345678901","vat_number_raw":"MK12345678901","vat_number_returned":"MK12345678901","tax_id":"MK12345678901"} 
[2025-11-13 14:27:05] production.INFO: CompanyResource::toArray - Returning to frontend {"company_id":2,"vat_id":"MK12345678901","vat_number_raw":"MK12345678901","vat_number_returned":"MK12345678901","tax_id":"MK12345678901"} 
[2025-11-13 14:27:05] production.INFO: CompanyResource::toArray - Returning to frontend {"company_id":2,"vat_id":"MK12345678901","vat_number_raw":"MK12345678901","vat_number_returned":"MK12345678901","tax_id":"MK12345678901"} 
[2025-11-13 14:27:05] production.INFO: CompanyResource::toArray - Returning to frontend {"company_id":2,"vat_id":"MK12345678901","vat_number_raw":"MK12345678901","vat_number_returned":"MK12345678901","tax_id":"MK12345678901"} 
[2025-11-13 14:27:05] production.INFO: CompanyResource::toArray - Returning to frontend {"company_id":2,"vat_id":"MK12345678901","vat_number_raw":"MK12345678901","vat_number_returned":"MK12345678901","tax_id":"MK12345678901"} 
[2025-11-13 14:27:05] production.INFO: CompanyResource::toArray - Returning to frontend {"company_id":2,"vat_id":"MK12345678901","vat_number_raw":"MK12345678901","vat_number_returned":"MK12345678901","tax_id":"MK12345678901"} 
[2025-11-13 14:27:05] production.INFO: CompanyResource::toArray - Returning to frontend {"company_id":2,"vat_id":"MK12345678901","vat_number_raw":"MK12345678901","vat_number_returned":"MK12345678901","tax_id":"MK12345678901"} 
[2025-11-13 14:27:05] production.INFO: CompanyResource::toArray - Returning to frontend {"company_id":2,"vat_id":"MK12345678901","vat_number_raw":"MK12345678901","vat_number_returned":"MK12345678901","tax_id":"MK12345678901"} 
[2025-11-13 14:27:05] production.INFO: CompanyResource::toArray - Returning to frontend {"company_id":2,"vat_id":"MK12345678901","vat_number_raw":"MK12345678901","vat_number_returned":"MK12345678901","tax_id":"MK12345678901"} 
[2025-11-13 14:27:05] production.WARNING: Slow operation detected {"operation":"req_6915eab8a6283","execution_time_ms":1204.69,"memory_used_bytes":2097152,"memory_used_mb":2.0} 
[2025-11-13 14:27:05] production.WARNING: Slow request detected {"operation":"req_6915eab8a6283","execution_time_ms":1204.69,"memory_used_bytes":2097152,"memory_used_mb":2.0,"method":"GET","url":"https://www.facturino.mk/api/v1/customers","route":"customers.index","user_id":2,"company_id":"2","ip":"46.217.85.1","user_agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36","response_status":200} 
[2025-11-13 17:12:59] production.INFO: [ImportController] Upload started {"has_file":true,"type":"customers","user_id":2} 
[2025-11-13 17:12:59] production.INFO: [ImportController] User and company loaded {"user_id":2,"company_id":"2"} 
[2025-11-13 17:12:59] production.INFO: [ImportController] Storing file {"filename":"864aaae4-0982-43a3-a829-8e4f031547e7.csv","original_name":"04_missing_optional_fields_customers.csv","size":538} 
[2025-11-13 17:12:59] production.INFO: [ImportController] File stored successfully {"path":"imports/2/864aaae4-0982-43a3-a829-8e4f031547e7.csv"} 
[2025-11-13 17:12:59] production.INFO: [ImportController] ImportJob created {"id":16} 
[2025-11-13 17:12:59] production.INFO: [ImportController] Upload completed successfully {"import_id":16,"response_data":{"id":16,"name":"Import from 04_missing_optional_fields_customers.csv","type":"customers","status":"pending","source_system":null,"file_type":"csv","file_info":{"size":538,"mime_type":"text/csv","original_name":"04_missing_optional_fields_customers.csv"},"file_path":"imports/2/864aaae4-0982-43a3-a829-8e4f031547e7.csv","mapping_config":null,"validation_rules":null,"total_records":0,"processed_records":0,"successful_records":0,"failed_records":0,"started_at":null,"completed_at":null,"error_message":null,"error_details":null,"summary":null,"company_id":2,"creator_id":2,"created_at":"2025-11-13T17:12:59.000000Z","updated_at":"2025-11-13T17:12:59.000000Z","formattedCreatedAt":"13.11.2025","formattedStartedAt":null,"formattedCompletedAt":null,"progressPercentage":0,"duration":null,"isInProgress":false,"canRetry":false}} 
[2025-11-13 17:13:07] production.INFO: [ImportController] show() - detecting fields {"import_id":"16","file_path":"imports/2/864aaae4-0982-43a3-a829-8e4f031547e7.csv"} 
[2025-11-13 17:13:07] production.INFO: [ImportController] File path constructed {"file_path":"/var/www/html/storage/app/imports/2/864aaae4-0982-43a3-a829-8e4f031547e7.csv","exists":true} 
[2025-11-13 17:13:07] production.INFO: [ImportController] Fields detected successfully {"count":7,"field_names":["name","email","phone","address","vat_number","website","currency"],"suggestions":{"name":"name","email":"email","phone":"phone","address":"billing_address_street_1","vat_number":"vat_number","website":"website","currency":"currency"},"confidence":1.0} 
[2025-11-13 17:13:21] production.INFO: [ImportController] validateData() called {"import_id":"16","file_path":"imports/2/864aaae4-0982-43a3-a829-8e4f031547e7.csv"} 
[2025-11-13 17:13:21] production.INFO: [ImportController] Validation completed {"total_records":5,"valid_records":5,"invalid_records":0} 
[2025-11-13 17:13:44] production.INFO: [ImportController] commit() started {"import_id":"16","type":"customers","file_path":"imports/2/864aaae4-0982-43a3-a829-8e4f031547e7.csv"} 
[2025-11-13 17:13:44] production.INFO: [ImportController] Customer imported {"customer_id":13,"name":"Минимал ООД"} 
[2025-11-13 17:13:44] production.INFO: [ImportController] Customer imported {"customer_id":14,"name":"Само Име ДООЕЛ"} 
[2025-11-13 17:13:44] production.ERROR: [ImportController] Record import failed {"row":3,"error":"SQLSTATE[23000]: Integrity constraint violation: 1452 Cannot add or update a child row: a foreign key constraint fails (`railway`.`addresses`, CONSTRAINT `addresses_user_id_foreign` FOREIGN KEY (`user_id`) REFERENCES `users` (`id`) ON DELETE CASCADE) (Connection: mysql, SQL: insert into `addresses` (`name`, `address_street_1`, `address_street_2`, `city`, `state`, `zip`, `phone`, `type`, `user_id`, `company_id`, `updated_at`, `created_at`) values (Без Веб ООД, ул. Македонија 10, Скопје, ?, ?, ?, ?, +38971234567, billing, 15, 2, 2025-11-13 17:13:44, 2025-11-13 17:13:44))","data":{"name":"Без Веб ООД","email":"bezweb@example.mk","phone":"+38971234567","billing_address_street_1":"ул. Македонија 10, Скопје","vat_number":"MK4080012562140","website":"","currency":"MKD"}} 
[2025-11-13 17:13:44] production.ERROR: [ImportController] Record import failed {"row":4,"error":"SQLSTATE[23000]: Integrity constraint violation: 1452 Cannot add or update a child row: a foreign key constraint fails (`railway`.`addresses`, CONSTRAINT `addresses_user_id_foreign` FOREIGN KEY (`user_id`) REFERENCES `users` (`id`) ON DELETE CASCADE) (Connection: mysql, SQL: insert into `addresses` (`name`, `address_street_1`, `address_street_2`, `city`, `state`, `zip`, `phone`, `type`, `user_id`, `company_id`, `updated_at`, `created_at`) values (Без ДДВ ДООЕЛ, ул. Партизанска 20, Битола, ?, ?, ?, ?, +38972345678, billing, 16, 2, 2025-11-13 17:13:44, 2025-11-13 17:13:44))","data":{"name":"Без ДДВ ДООЕЛ","email":"bezddv@example.mk","phone":"+38972345678","billing_address_street_1":"ул. Партизанска 20, Битола","vat_number":"","website":"https://bezddv.mk","currency":"MKD"}} 
[2025-11-13 17:13:44] production.INFO: [ImportController] Customer imported {"customer_id":17,"name":"Само Задолжителни"} 
[2025-11-13 17:13:44] production.INFO: [ImportController] commit() completed {"import_id":"16","successful_records":3,"failed_records":2} 
[2025-11-13 17:13:51] production.INFO: CompanyResource::toArray - Returning to frontend {"company_id":2,"vat_id":"MK12345678901","vat_number_raw":"MK12345678901","vat_number_returned":"MK12345678901","tax_id":"MK12345678901"} 
[2025-11-13 17:13:51] production.INFO: CompanyResource::toArray - Returning to frontend {"company_id":2,"vat_id":"MK12345678901","vat_number_raw":"MK12345678901","vat_number_returned":"MK12345678901","tax_id":"MK12345678901"} 
[2025-11-13 17:13:51] production.INFO: CompanyResource::toArray - Returning to frontend {"company_id":2,"vat_id":"MK12345678901","vat_number_raw":"MK12345678901","vat_number_returned":"MK12345678901","tax_id":"MK12345678901"} 
[2025-11-13 17:13:52] production.INFO: CompanyResource::toArray - Returning to frontend {"company_id":2,"vat_id":"MK12345678901","vat_number_raw":"MK12345678901","vat_number_returned":"MK12345678901","tax_id":"MK12345678901"} 
[2025-11-13 17:13:52] production.INFO: CompanyResource::toArray - Returning to frontend {"company_id":2,"vat_id":"MK12345678901","vat_number_raw":"MK12345678901","vat_number_returned":"MK12345678901","tax_id":"MK12345678901"} 
[2025-11-13 17:13:52] production.INFO: CompanyResource::toArray - Returning to frontend {"company_id":2,"vat_id":"MK12345678901","vat_number_raw":"MK12345678901","vat_number_returned":"MK12345678901","tax_id":"MK12345678901"} 
[2025-11-13 17:13:52] production.INFO: CompanyResource::toArray - Returning to frontend {"company_id":2,"vat_id":"MK12345678901","vat_number_raw":"MK12345678901","vat_number_returned":"MK12345678901","tax_id":"MK12345678901"} 
[2025-11-13 17:13:52] production.INFO: CompanyResource::toArray - Returning to frontend {"company_id":2,"vat_id":"MK12345678901","vat_number_raw":"MK12345678901","vat_number_returned":"MK12345678901","tax_id":"MK12345678901"} 
[2025-11-13 17:13:52] production.INFO: CompanyResource::toArray - Returning to frontend {"company_id":2,"vat_id":"MK12345678901","vat_number_raw":"MK12345678901","vat_number_returned":"MK12345678901","tax_id":"MK12345678901"} 
[2025-11-13 17:13:52] production.INFO: CompanyResource::toArray - Returning to frontend {"company_id":2,"vat_id":"MK12345678901","vat_number_raw":"MK12345678901","vat_number_returned":"MK12345678901","tax_id":"MK12345678901"} 
[2025-11-13 17:13:52] production.WARNING: Slow operation detected {"operation":"req_691611cf7af26","execution_time_ms":1271.83,"memory_used_bytes":2097152,"memory_used_mb":2.0} 
[2025-11-13 17:13:52] production.WARNING: Slow request detected {"operation":"req_691611cf7af26","execution_time_ms":1271.83,"memory_used_bytes":2097152,"memory_used_mb":2.0,"method":"GET","url":"https://www.facturino.mk/api/v1/customers","route":"customers.index","user_id":2,"company_id":"2","ip":"77.28.0.198","user_agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36","response_status":200} 
[2025-11-13 17:14:06] production.INFO: [ImportController] Upload started {"has_file":true,"type":"customers","user_id":2} 
[2025-11-13 17:14:06] production.INFO: [ImportController] User and company loaded {"user_id":2,"company_id":"2"} 
[2025-11-13 17:14:06] production.INFO: [ImportController] Storing file {"filename":"1fb96d90-eb6e-400a-9289-d8d04fdaaf0a.csv","original_name":"06_duplicate_customers.csv","size":758} 
[2025-11-13 17:14:06] production.INFO: [ImportController] File stored successfully {"path":"imports/2/1fb96d90-eb6e-400a-9289-d8d04fdaaf0a.csv"} 
[2025-11-13 17:14:06] production.INFO: [ImportController] ImportJob created {"id":17} 
[2025-11-13 17:14:06] production.INFO: [ImportController] Upload completed successfully {"import_id":17,"response_data":{"id":17,"name":"Import from 06_duplicate_customers.csv","type":"customers","status":"pending","source_system":null,"file_type":"csv","file_info":{"size":758,"mime_type":"text/csv","original_name":"06_duplicate_customers.csv"},"file_path":"imports/2/1fb96d90-eb6e-400a-9289-d8d04fdaaf0a.csv","mapping_config":null,"validation_rules":null,"total_records":0,"processed_records":0,"successful_records":0,"failed_records":0,"started_at":null,"completed_at":null,"error_message":null,"error_details":null,"summary":null,"company_id":2,"creator_id":2,"created_at":"2025-11-13T17:14:06.000000Z","updated_at":"2025-11-13T17:14:06.000000Z","formattedCreatedAt":"13.11.2025","formattedStartedAt":null,"formattedCompletedAt":null,"progressPercentage":0,"duration":null,"isInProgress":false,"canRetry":false}} 
[2025-11-13 17:14:09] production.INFO: [ImportController] show() - detecting fields {"import_id":"17","file_path":"imports/2/1fb96d90-eb6e-400a-9289-d8d04fdaaf0a.csv"} 
[2025-11-13 17:14:09] production.INFO: [ImportController] File path constructed {"file_path":"/var/www/html/storage/app/imports/2/1fb96d90-eb6e-400a-9289-d8d04fdaaf0a.csv","exists":true} 
[2025-11-13 17:14:09] production.INFO: [ImportController] Fields detected successfully {"count":7,"field_names":["name","email","phone","address","vat_number","website","currency"],"suggestions":{"name":"name","email":"email","phone":"phone","address":"billing_address_street_1","vat_number":"vat_number","website":"website","currency":"currency"},"confidence":1.0} 
[2025-11-13 17:14:40] production.INFO: [ImportController] validateData() called {"import_id":"17","file_path":"imports/2/1fb96d90-eb6e-400a-9289-d8d04fdaaf0a.csv"} 
[2025-11-13 17:14:40] production.INFO: [ImportController] Validation completed {"total_records":5,"valid_records":5,"invalid_records":0} 
[2025-11-13 17:14:49] production.INFO: [ImportController] commit() started {"import_id":"17","type":"customers","file_path":"imports/2/1fb96d90-eb6e-400a-9289-d8d04fdaaf0a.csv"} 
[2025-11-13 17:14:49] production.ERROR: [ImportController] Record import failed {"row":1,"error":"SQLSTATE[23000]: Integrity constraint violation: 1452 Cannot add or update a child row: a foreign key constraint fails (`railway`.`addresses`, CONSTRAINT `addresses_user_id_foreign` FOREIGN KEY (`user_id`) REFERENCES `users` (`id`) ON DELETE CASCADE) (Connection: mysql, SQL: insert into `addresses` (`name`, `address_street_1`, `address_street_2`, `city`, `state`, `zip`, `phone`, `type`, `user_id`, `company_id`, `updated_at`, `created_at`) values (Дупликат ООД, ул. Дупликат 1, Скопје, ?, ?, ?, ?, +38970123456, billing, 18, 2, 2025-11-13 17:14:49, 2025-11-13 17:14:49))","data":{"name":"Дупликат ООД","email":"duplicate@example.mk","phone":"+38970123456","billing_address_street_1":"ул. Дупликат 1, Скопје","vat_number":"MK4080012562160","website":"https://duplicate.mk","currency":"MKD"}} 
[2025-11-13 17:14:49] production.ERROR: [ImportController] Record import failed {"row":2,"error":"SQLSTATE[23000]: Integrity constraint violation: 1062 Duplicate entry 'duplicate@example.mk-2' for key 'customers.customers_email_company_id_unique' (Connection: mysql, SQL: insert into `customers` (`name`, `email`, `phone`, `website`, `company_id`, `creator_id`, `currency_id`, `updated_at`, `created_at`) values (Дупликат ООД, duplicate@example.mk, +38971234567, https://duplicate2.mk, 2, 2, 74, 2025-11-13 17:14:49, 2025-11-13 17:14:49))","data":{"name":"Дупликат ООД","email":"duplicate@example.mk","phone":"+38971234567","billing_address_street_1":"ул. Дупликат 2, Битола","vat_number":"MK4080012562161","website":"https://duplicate2.mk","currency":"MKD"}} 
[2025-11-13 17:14:49] production.ERROR: [ImportController] Record import failed {"row":3,"error":"SQLSTATE[23000]: Integrity constraint violation: 1452 Cannot add or update a child row: a foreign key constraint fails (`railway`.`addresses`, CONSTRAINT `addresses_user_id_foreign` FOREIGN KEY (`user_id`) REFERENCES `users` (`id`) ON DELETE CASCADE) (Connection: mysql, SQL: insert into `addresses` (`name`, `address_street_1`, `address_street_2`, `city`, `state`, `zip`, `phone`, `type`, `user_id`, `company_id`, `updated_at`, `created_at`) values (Дупликат ООД, ул. Дупликат 3, Охрид, ?, ?, ?, ?, +38972345678, billing, 20, 2, 2025-11-13 17:14:49, 2025-11-13 17:14:49))","data":{"name":"Дупликат ООД","email":"different@example.mk","phone":"+38972345678","billing_address_street_1":"ул. Дупликат 3, Охрид","vat_number":"MK4080012562162","website":"https://duplicate3.mk","currency":"MKD"}} 
[2025-11-13 17:14:49] production.ERROR: [ImportController] Record import failed {"row":4,"error":"SQLSTATE[23000]: Integrity constraint violation: 1062 Duplicate entry 'duplicate@example.mk-2' for key 'customers.customers_email_company_id_unique' (Connection: mysql, SQL: insert into `customers` (`name`, `email`, `phone`, `website`, `company_id`, `creator_id`, `currency_id`, `updated_at`, `created_at`) values (Различен Име ООД, duplicate@example.mk, +38970456789, https://different.mk, 2, 2, 3, 2025-11-13 17:14:49, 2025-11-13 17:14:49))","data":{"name":"Различен Име ООД","email":"duplicate@example.mk","phone":"+38970456789","billing_address_street_1":"ул. Различен 1, Скопје","vat_number":"MK4080012562163","website":"https://different.mk","currency":"EUR"}} 
[2025-11-13 17:14:49] production.ERROR: [ImportController] Record import failed {"row":5,"error":"SQLSTATE[23000]: Integrity constraint violation: 1062 Duplicate entry 'duplicate@example.mk-2' for key 'customers.customers_email_company_id_unique' (Connection: mysql, SQL: insert into `customers` (`name`, `email`, `phone`, `website`, `company_id`, `creator_id`, `currency_id`, `updated_at`, `created_at`) values (Друг Компанија ООД, duplicate@example.mk, +38971567890, https://drug.mk, 2, 2, 1, 2025-11-13 17:14:49, 2025-11-13 17:14:49))","data":{"name":"Друг Компанија ООД","email":"duplicate@example.mk","phone":"+38971567890","billing_address_street_1":"ул. Друг 1, Скопје","vat_number":"MK4080012562164","website":"https://drug.mk","currency":"USD"}} 
[2025-11-13 17:14:49] production.INFO: [ImportController] commit() completed {"import_id":"17","successful_records":0,"failed_records":5} 
[2025-11-13 17:15:11] production.INFO: [ImportController] Upload started {"has_file":true,"type":"invoices","user_id":2} 
[2025-11-13 17:15:11] production.INFO: [ImportController] User and company loaded {"user_id":2,"company_id":"2"} 
[2025-11-13 17:15:11] production.INFO: [ImportController] Storing file {"filename":"f86d3ab7-93b9-4460-ac64-afb080ca3fa0.csv","original_name":"07_happy_path_invoices.csv","size":789} 
[2025-11-13 17:15:11] production.INFO: [ImportController] File stored successfully {"path":"imports/2/f86d3ab7-93b9-4460-ac64-afb080ca3fa0.csv"} 
[2025-11-13 17:15:11] production.INFO: [ImportController] ImportJob created {"id":18} 
[2025-11-13 17:15:11] production.INFO: [ImportController] Upload completed successfully {"import_id":18,"response_data":{"id":18,"name":"Import from 07_happy_path_invoices.csv","type":"invoices","status":"pending","source_system":null,"file_type":"csv","file_info":{"size":789,"mime_type":"text/csv","original_name":"07_happy_path_invoices.csv"},"file_path":"imports/2/f86d3ab7-93b9-4460-ac64-afb080ca3fa0.csv","mapping_config":null,"validation_rules":null,"total_records":0,"processed_records":0,"successful_records":0,"failed_records":0,"started_at":null,"completed_at":null,"error_message":null,"error_details":null,"summary":null,"company_id":2,"creator_id":2,"created_at":"2025-11-13T17:15:11.000000Z","updated_at":"2025-11-13T17:15:11.000000Z","formattedCreatedAt":"13.11.2025","formattedStartedAt":null,"formattedCompletedAt":null,"progressPercentage":0,"duration":null,"isInProgress":false,"canRetry":false}} 
[2025-11-13 17:15:16] production.INFO: [ImportController] show() - detecting fields {"import_id":"18","file_path":"imports/2/f86d3ab7-93b9-4460-ac64-afb080ca3fa0.csv"} 
[2025-11-13 17:15:16] production.INFO: [ImportController] File path constructed {"file_path":"/var/www/html/storage/app/imports/2/f86d3ab7-93b9-4460-ac64-afb080ca3fa0.csv","exists":true} 
[2025-11-13 17:15:16] production.INFO: [ImportController] Fields detected successfully {"count":10,"field_names":["invoice_number","customer_name","invoice_date","due_date","total","subtotal","tax","status","currency","notes"],"suggestions":{"invoice_number":"invoice_number","customer_name":"customer_name","invoice_date":"invoice_date","due_date":"due_date","total":"total","subtotal":"subtotal","tax":"tax","status":"status","currency":"currency","notes":"notes"},"confidence":1.0} 