# Facturino Monitoring Environment Variables
# Copy this file to your Railway environment variables or .env file

# ============================================
# FEATURE FLAGS
# ============================================

# Enable the /metrics endpoint (required for monitoring)
FEATURE_MONITORING=true

# ============================================
# PROMETHEUS CONFIGURATION
# ============================================

# Prometheus namespace (prefix for all metrics)
PROMETHEUS_NAMESPACE=invoiceshelf

# Storage adapter: memory, redis, or apc
# Use 'memory' for Railway (single container)
# Use 'redis' for multi-container setups
PROMETHEUS_STORAGE_ADAPTER=memory

# Enable default metrics collection
PROMETHEUS_COLLECT_DEFAULT_METRICS=true

# Enable business metrics
PROMETHEUS_BUSINESS_METRICS_ENABLED=true

# Business metrics cache TTL (seconds)
PROMETHEUS_BUSINESS_METRICS_CACHE_TTL=300

# Enable performance metrics
PROMETHEUS_PERFORMANCE_METRICS_ENABLED=true

# Track database queries in performance metrics
PROMETHEUS_TRACK_DB_QUERIES=true

# Track cache operations
PROMETHEUS_TRACK_CACHE_OPS=true

# Track queue jobs
PROMETHEUS_TRACK_QUEUE_JOBS=true

# ============================================
# HEALTH CHECK CONFIGURATION
# ============================================

# Enable health check endpoint
PROMETHEUS_HEALTH_CHECK_ENABLED=true

# Health check route path
PROMETHEUS_HEALTH_ROUTE_PATH=health

# ============================================
# GRAFANA CLOUD CREDENTIALS
# ============================================
# These are used if you're pushing metrics directly from Laravel
# (not recommended - use Grafana Agent instead)

# GRAFANA_CLOUD_PROMETHEUS_URL=https://prometheus-prod-XX-XXX.grafana.net/api/prom/push
# GRAFANA_CLOUD_PROMETHEUS_USER=123456
# GRAFANA_CLOUD_API_KEY=your-api-key-here

# ============================================
# ALERT NOTIFICATION SETTINGS
# ============================================

# Email for critical alerts
MONITORING_ALERT_EMAIL=ops@facturino.mk

# Slack webhook for alerts (optional)
# MONITORING_SLACK_WEBHOOK=https://hooks.slack.com/services/YOUR/WEBHOOK/URL

# PagerDuty integration key (optional)
# MONITORING_PAGERDUTY_KEY=your-pagerduty-integration-key

# ============================================
# UPTIMEROBOT CONFIGURATION
# ============================================
# UptimeRobot API key for programmatic access (optional)
# UPTIMEROBOT_API_KEY=your-uptimerobot-api-key

# ============================================
# CERTIFICATE MONITORING
# ============================================

# Path to XML signing certificate (for expiry monitoring)
XML_SIGNING_CERTIFICATE_PATH=/path/to/certificate.pfx

# Alert when certificate expires in X days
CERTIFICATE_EXPIRY_WARNING_DAYS=7

# ============================================
# LOGGING CONFIGURATION
# ============================================

# Log level for monitoring operations
LOG_LEVEL=info

# Log channel for monitoring
LOG_CHANNEL=stack

# Enable debug logging for Prometheus (development only)
# PROMETHEUS_DEBUG=false

# ============================================
# PERFORMANCE THRESHOLDS
# ============================================

# Response time warning threshold (milliseconds)
RESPONSE_TIME_WARNING_MS=1000

# Response time critical threshold (milliseconds)
RESPONSE_TIME_CRITICAL_MS=3000

# Disk usage warning threshold (percent)
DISK_USAGE_WARNING_PERCENT=80

# Disk usage critical threshold (percent)
DISK_USAGE_CRITICAL_PERCENT=90

# Memory usage warning threshold (percent)
MEMORY_USAGE_WARNING_PERCENT=85

# Memory usage critical threshold (percent)
MEMORY_USAGE_CRITICAL_PERCENT=95

# Queue jobs warning threshold
QUEUE_JOBS_WARNING_COUNT=1000

# Queue jobs critical threshold
QUEUE_JOBS_CRITICAL_COUNT=5000

# Failed jobs warning threshold
FAILED_JOBS_WARNING_COUNT=10

# Failed jobs critical threshold
FAILED_JOBS_CRITICAL_COUNT=100

# ============================================
# BUSINESS METRICS THRESHOLDS
# ============================================

# Overdue invoices warning threshold
OVERDUE_INVOICES_WARNING=20

# Bank match rate warning threshold (percent)
BANK_MATCH_RATE_WARNING=70

# Bank sync errors warning threshold (24h)
BANK_SYNC_ERRORS_WARNING=50

# ============================================
# OPTIONAL: EXTERNAL MONITORING SERVICES
# ============================================

# Sentry DSN for error tracking (optional)
# SENTRY_LARAVEL_DSN=https://your-sentry-dsn

# New Relic license key (optional)
# NEW_RELIC_LICENSE_KEY=your-new-relic-key

# Datadog API key (optional)
# DATADOG_API_KEY=your-datadog-key
